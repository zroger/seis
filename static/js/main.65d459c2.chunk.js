(this.webpackJsonpseis=this.webpackJsonpseis||[]).push([[0],{117:function(e,a,t){e.exports={base:"marbles_base__KvHeE",piece:"marbles_piece__3NAxU",enabled:"marbles_enabled__dKJpt",Red1_0:"marbles_Red1_0__K3jhJ marbles_base__KvHeE",Red1_1:"marbles_Red1_1__10X69 marbles_Red1_0__K3jhJ marbles_base__KvHeE",Red1_2:"marbles_Red1_2__1wOkO marbles_Red1_0__K3jhJ marbles_base__KvHeE",Red1_3:"marbles_Red1_3__Rdiwk marbles_Red1_0__K3jhJ marbles_base__KvHeE",Blue1_0:"marbles_Blue1_0__3iDtD marbles_base__KvHeE",Blue1_1:"marbles_Blue1_1__SQx9M marbles_Blue1_0__3iDtD marbles_base__KvHeE",Blue1_2:"marbles_Blue1_2__QCNGZ marbles_Blue1_0__3iDtD marbles_base__KvHeE",Blue1_3:"marbles_Blue1_3__1m1PW marbles_Blue1_0__3iDtD marbles_base__KvHeE",Green1_0:"marbles_Green1_0__6eau1 marbles_base__KvHeE",Green1_1:"marbles_Green1_1__1MUHH marbles_Green1_0__6eau1 marbles_base__KvHeE",Green1_2:"marbles_Green1_2__3_2Je marbles_Green1_0__6eau1 marbles_base__KvHeE",Green1_3:"marbles_Green1_3__4rWUy marbles_Green1_0__6eau1 marbles_base__KvHeE",Yellow1_0:"marbles_Yellow1_0__21rld marbles_base__KvHeE",Yellow1_1:"marbles_Yellow1_1__13qra marbles_Yellow1_0__21rld marbles_base__KvHeE",Yellow1_2:"marbles_Yellow1_2__iBFhy marbles_Yellow1_0__21rld marbles_base__KvHeE",Yellow1_3:"marbles_Yellow1_3__236le marbles_Yellow1_0__21rld marbles_base__KvHeE"}},134:function(e,a,t){e.exports=t(181)},139:function(e,a,t){},176:function(e,a){},180:function(e,a,t){},181:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(17),s=t.n(o);t(139),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(58),l=t(16),c=t(19),_=t(9),d=t.n(_),u=t(25),m=t(12),p=t(71),f=t(62),b="10.0.1.27"===window.location.hostname?"http://10.0.1.27:8000":"https://seis-game.herokuapp.com";function y(e){return v.apply(this,arguments)}function v(){return(v=Object(m.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/games/seis/create",{method:"POST",body:JSON.stringify({numPlayers:a,unlisted:!0}),headers:{"Content-Type":"application/json"}});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("HTTP status "+t.status);case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n.gameID);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return h.apply(this,arguments)}function h(){return(h=Object(m.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/games/seis/"+a);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Room ".concat(a," not found"));case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,a,t){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(d.a.mark((function e(a,t,n){var r,o,s,i,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attempting to join room ".concat(a)),e.next=3,E(a);case 3:if(r=e.sent,1!==(o=r.players.filter((function(e){var a;return(null===(a=e.data)||void 0===a?void 0:a.clientId)===n.clientId}))).length){e.next=8;break}return console.log("previously joined room ".concat(a," at seat ").concat(o[0].id)),e.abrupt("return",""+o[0].id);case 8:if(!(o.length>1)){e.next=12;break}return console.warn("previously joined room ".concat(a," in ").concat(o.length," seats")),e.next=12,C(a,n);case 12:return e.next=14,E(a);case 14:r=e.sent,s=r.players.filter((function(e){return!e.name})),console.log("found ".concat(s.length," open seats in room ").concat(a)),i=Object(f.a)(s),e.prev=18,i.s();case 20:if((l=i.n()).done){e.next=34;break}return c=l.value,console.log("attempting to join at seat ".concat(c.id)),e.next=25,fetch("".concat(b,"/games/seis/").concat(a,"/join"),{method:"POST",body:JSON.stringify({playerID:c.id,playerName:t,data:{clientId:n.clientId}}),headers:{"Content-Type":"application/json","bgio-credentials":n.credentials}});case 25:if(!e.sent.ok){e.next=31;break}return console.log("successfully joined at seat ".concat(c.id)),e.abrupt("return",""+c.id);case 31:console.log("unable to join at seat ".concat(c.id));case 32:e.next=20;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(18),i.e(e.t0);case 39:return e.prev=39,i.f(),e.finish(39);case 42:throw console.log("unable to join any seat"),new Error("Unable to join room");case 44:case"end":return e.stop()}}),e,null,[[18,36,39,42]])})))).apply(this,arguments)}function C(e,a){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function e(a,t){var n,r,o,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(a);case 2:n=e.sent,r=n.players.filter((function(e){var a;return(null===(a=e.data)||void 0===a?void 0:a.clientId)===t.clientId})),o=Object(f.a)(r),e.prev=5,o.s();case 7:if((s=o.n()).done){e.next=14;break}return i=s.value,console.log("leaving seat ".concat(i.id," of room ").concat(a)),e.next=12,fetch("".concat(b,"/games/seis/").concat(a,"/leave"),{method:"POST",body:JSON.stringify({playerID:i.id,credentials:t.credentials}),headers:{"Content-Type":"application/json"}});case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))).apply(this,arguments)}var S,O=t(235),k=function(){var e=Object(m.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)(a,1),n=t[0],e.next=3,y(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),N=function(e){var a=e.numPlayers,t=e.onSuccess,o=e.children,s=Object(c.a)(e,["numPlayers","onSuccess","children"]),i=Object(p.a)({deferFn:k});return Object(n.useEffect)((function(){t&&i.data&&t(i.data)}),[i.data,t]),r.a.createElement(O.a,Object.assign({},s,{disabled:i.isPending,onClick:function(e){e.preventDefault(),i.run(a)}}),o)},j=t(227),H=t(123),R=t(225),B=t(81),I=t(226),G=Object(R.a)((function(e){return{main:{display:"flex",flexFlow:"column nowrap",alignItems:"center"},title:{fontFamily:'"Rye", cursive',color:"#ffcc80",fontSize:"3rem",padding:e.spacing(2,0)},button:{display:"block",margin:e.spacing(2,"auto"),minWidth:"50%",backgroundImage:"linear-gradient(300deg, ".concat(B.a[100]," 0%, ").concat(B.a[200]," 100%)"),color:I.a[900],fontFamily:'"Rye", cursive',fontSize:"1.5rem",boxShadow:e.shadows[2]}}})),D=function(){var e=G(),a=Object(l.f)(),t=function(e){var t="string"===typeof e?e:e.roomID;a.push("/games/".concat(t))};return r.a.createElement("div",null,r.a.createElement(j.a,{className:e.main,component:"main",maxWidth:"xs"},r.a.createElement(H.a,{variant:"h1",className:e.title},"seis"),r.a.createElement(H.a,{variant:"body2",align:"center"},"Play seis online with friends.",r.a.createElement("br",null),"Start a game and share the link."),[2,3,4].map((function(a){return r.a.createElement(N,{key:a,className:e.button,onSuccess:t,numPlayers:a},a," players")}))))},P=t(79),K=t(83),M=t(234),T=t(229),A=t(233),Y=t(231),L=t(232),V=t(230),J=t(14),F=t(4),U=t(3),z=t(116),W=t(10),Z=t.n(W);!function(e){e.CIRCUIT="C",e.HOME="H",e.START="S"}(S||(S={}));function Q(e,a,t){return(e+a.toString(16)+t.toString(16)).toUpperCase()}var X=Z.a.curry(Q)(S.HOME),q=Z.a.curry(Q)(S.CIRCUIT),$=Z.a.curry(Q)(S.START);function ee(e,a){var t,n={type:(t=e)[0],seat:parseInt(t[1],16),index:parseInt(t[2],16)};if(ne(e))return q(n.seat,0);if(function(e){return"C"===e[0].toUpperCase()}(e)){if(n.index<11)return q(n.seat,n.index+1);var r=(n.seat+1)%4;return r===a?X(r,0):q(r,0)}return function(e){return"H"===e[0].toUpperCase()}(e)&&n.index<3?X(n.seat,n.index+1):U.f}function ae(e,a,t){var n,r,o=t.find((function(a){return a.position===e}));if("undefined"===typeof o)throw new Error("No piece in that position");if(ne(e)&&![1,6].includes(a))return U.f;try{if((n=Z.a.range(a).reduce((function(e,a){var n=ee(e,o.seat);if(n===U.f)throw U.f;if(function(e,a,t){return e.some(Z.a.matches({position:t,seat:a}))}(t,o.seat,n))throw U.f;return n}),e))===e)return e}catch(s){return U.f}return"C"===(r=n)[0].toUpperCase()&&"5"===r[2]&&t.find((function(e){return n===e.position}))?U.f:n}function te(e,a,t){var n=ae(e,a,t);if(n===U.f)throw new Error("invalid move");var r={};r[e]=n;var o=t.find(Z.a.matches({position:n}));return o&&(r[o.position]=function(e,a){var t=Z.a.first(Z.a.difference(Z.a.range(4).map((function(e){return $(a,e)})),e.map((function(e){return e.position}))));if(!t)throw new Error("cannot capture");return t}(t,o.seat)),r}function ne(e){return"S"===e[0].toUpperCase()}function re(e,a){var t=e.players.find((function(e){return e.id===a.currentPlayer}));if(void 0!==t)return t}function oe(e,a){if("undefined"===typeof e.dieRoll)return[];var t=function(e,a){var t=e.players.find((function(e){return e.id===a}));if(void 0===t)throw Error("undefined player");return t}(e,a.currentPlayer);return e.pieces.map((function(a){var n=a.seat===t.seat?ae(a.position,e.dieRoll,e.pieces):U.f;return{from:a.position,to:n}})).filter((function(e){return e.to!==U.f}))}var se,ie={name:"seis",setup:function(){return{players:[],pieces:[]}},phases:{setup:{turn:{activePlayers:{all:U.B.NULL}},moves:{ChooseSeat:function(e,a,t,n){var r;if(console.log("ChooseSeat",{playerID:a.playerID,seat:t,name:n}),e.players.some((function(e){return e.seat===t})))return U.f;if("string"!==typeof a.playerID)return U.f;var o=e.players.find((function(e){return e.id===a.playerID}));o&&(e.players=e.players.filter((function(e){return e.id!==o.id})),e.pieces=e.pieces.filter((function(e){return e.seat!==o.seat}))),e.players.push({seat:t,name:n,id:a.playerID,color:["red","blue","yellow","green"][t]}),(r=e.pieces).push.apply(r,Object(J.a)([0,1,2,3].map((function(e){return{id:e,seat:t,position:"S".concat(t).concat(e)}}))))},ChangeName:function(e,a,t){if("string"!==typeof a.playerID)return U.f;var n=e.players.find((function(e){return e.id===a.playerID}));if(!n)return U.f;n.name=t}},start:!0,endIf:function(e,a){return e.players.length===a.numPlayers},next:"play"},play:{moves:{rollDie:function(e,a,t){var n;return"undefined"!==typeof e.dieRoll?U.f:Object(F.a)({},e,{dieRoll:t||(null===(n=a.random)||void 0===n?void 0:n.D6())})},movePiece:function(e,a,t){if(void 0===e.dieRoll)return U.f;if(""===t){var n;if(!(null===(n=a.events)||void 0===n?void 0:n.endTurn))throw new Error("ctx.events.endTurn is undefined");return a.events.endTurn(),Object(F.a)({},e,{dieRoll:void 0})}var r;try{r=te(t,e.dieRoll,e.pieces)}catch(s){return U.f}if(!a.events||!a.events.endTurn)throw new Error("ctx.events is undefined");if(e.dieRoll<6){var o;if(!(null===(o=a.events)||void 0===o?void 0:o.endTurn))throw new Error("ctx.events.endTurn is undefined");a.events.endTurn()}return Object(F.a)({},e,{dieRoll:void 0,pieces:e.pieces.map((function(e){return Z.a.has(r,e.position)?Object(F.a)({},e,{position:r[e.position]}):e}))})}},turn:{order:{first:function(e,a){return 0},next:function(e,a){return(a.playOrderPos+1)%a.numPlayers},playOrder:function(e){return Z.a.sortBy(e.players,["seat"]).map((function(e){return e.id}))}}}}},moves:{},turn:{},plugins:[Object(z.a)({setup:function(e){return{}}})],endIf:function(e,a){return e.players.find((function(a){return e.pieces.filter((function(e){return e.seat===a.seat})).every((function(e){return"H"===e.position[0]}))}))}},le=t(55),ce=t.n(le),_e=t(24),de=t(82),ue=t.n(de),me=_e.m,pe={default:{1:_e.c,2:_e.f,3:_e.e,4:_e.b,5:_e.a,6:_e.d},inverted:{1:_e.g,2:_e.h,3:_e.i,4:_e.j,5:_e.k,6:_e.l}},fe=function(e){var a=e.seat,t=e.size,n=void 0===t?10:t,o=e.value,s=e.variant,i=void 0===s?"default":s,l=Object(c.a)(e,["seat","size","value","variant"]),_=o?pe[i][o]:me,d=o?ue.a.icon:ue.a.iconRandom,u={"--icon-size":n};return r.a.createElement("div",Object.assign({className:d+" "+ue.a["seat-".concat(a)],style:u},l),r.a.createElement(_,null))},be=t(29),ye=t.n(be),ve=function(e){var a=e.onRoll,t=e.seat,n=function(e){return function(t){t.preventDefault(),a(e)}};return r.a.createElement("div",{className:ye.a.diceContainer},r.a.createElement("div",{className:ye.a.diceLeft},r.a.createElement(fe,{size:20,onClick:n(),seat:t})),r.a.createElement("div",{className:ye.a.diceRight},[1,2,3,4,5,6].map((function(e){return r.a.createElement(fe,{value:e,size:10,onClick:n(e),seat:t})}))))};!function(e){e[e.NONE=0]="NONE",e[e.CHOOSE_SEAT=1]="CHOOSE_SEAT",e[e.PENDING_START=2]="PENDING_START",e[e.ROLL=3]="ROLL",e[e.MOVE=4]="MOVE",e[e.PENDING_MOVE=5]="PENDING_MOVE",e[e.GAME_OVER=6]="GAME_OVER"}(se||(se={}));var Ee=function(e){var a=e.G,t=e.ctx,n=e.moves,o=e.playerID,s=e.isActive,i=(e.gameMetadata,re(a,t)),l=oe(a,t),c=function(e,a,t,n){if("setup"===a.phase){if(n)if(!e.players.find((function(e){return e.id===t})))return se.CHOOSE_SEAT;return se.PENDING_START}return"play"===a.phase&&n?e.dieRoll?se.MOVE:se.ROLL:"play"===a.phase?se.PENDING_MOVE:a.gameover?se.GAME_OVER:se.NONE}(a,t,o,s);return r.a.createElement("div",{className:ye.a.root},c===se.CHOOSE_SEAT&&r.a.createElement("div",{className:ye.a.message},"Choose your color by clicking on an open spot on the board."),c===se.PENDING_START&&r.a.createElement("div",{className:ye.a.message},"Waiting for ",t.numPlayers-a.players.length,t.numPlayers-a.players.length===1?" player ":" players ","to join..."),c===se.MOVE&&(l.length>0?r.a.createElement("div",{className:ye.a.message},"Make a move..."):r.a.createElement("div",{className:ye.a.message},r.a.createElement("p",null,"No moves"),r.a.createElement("div",null,r.a.createElement(O.a,{variant:"contained",onClick:function(){n.movePiece("")}},"Pass")))),c===se.ROLL&&r.a.createElement(ve,{onRoll:n.rollDie,seat:null===i||void 0===i?void 0:i.seat}),c===se.PENDING_MOVE&&r.a.createElement("div",{className:ye.a.message},"Waiting for ",r.a.createElement("strong",null,null===i||void 0===i?void 0:i.name)," to move..."),c===se.GAME_OVER&&r.a.createElement("div",{className:ye.a.message},r.a.createElement("h1",null,"Game Over"),r.a.createElement("p",null,t.gameover.name," is the winner")),c===se.NONE&&r.a.createElement("div",null,"lolwut"))},he=t(6),xe=t(117),ge=t.n(xe),Ce=function(e){var a=e.position,t=e.variant,n=e.index,o=e.onSelect,s=e.onActivate,i=e.onDeactivate,l=e.className;return r.a.createElement("div",{className:l+" "+ge.a["".concat(t,"_").concat(n)],onClick:function(){(o||Z.a.noop)(a)},onMouseEnter:function(){(s||Z.a.noop)(a)},onMouseLeave:function(){(i||Z.a.noop)(a)}})},we=t(20),Se=t.n(we),Oe=function(e){return Se.a["pos-"+e]},ke=function(e){var a=e.G,t=e.ctx,o=e.moves,s=e.playerID,i=e.isActive,l=e.gameMetadata,c=Object(n.useState)(),_=Object(u.a)(c,2),d=_[0],m=_[1];console.log(t.player);var p,f=re(a,t),b=oe(a,t),y=b.find((function(e){return d&&d===e.from})),v=function(e){b.find((function(a){return a.from===e}))&&(o.movePiece(e),m(void 0))},E=function(e){m(e)},h=function(e){m(void 0)};return r.a.createElement("div",{className:Se.a.board},r.a.createElement("div",{className:Se.a["nowPlaying".concat(null===f||void 0===f?void 0:f.seat)]}),r.a.createElement("div",{className:Se.a.home0}),r.a.createElement("div",{className:Se.a.home1}),r.a.createElement("div",{className:Se.a.home2}),r.a.createElement("div",{className:Se.a.home3}),r.a.createElement("div",{className:Se.a.start0}),r.a.createElement("div",{className:Se.a.start1}),r.a.createElement("div",{className:Se.a.start2}),r.a.createElement("div",{className:Se.a.start3}),a.players.map((function(e){return r.a.createElement("div",{key:e.seat,className:Se.a["name".concat(e.seat)]},e.name)})),Z.a.flatten(Z.a.range(4).map((function(e){return Z.a.concat([],Z.a.range(4).map((function(a){return $(e,a)})),Z.a.range(12).map((function(a){return q(e,a)})),Z.a.range(4).map((function(a){return X(e,a)})))}))).map((function(e){var a=(null===y||void 0===y?void 0:y.to)===e;return r.a.createElement("div",{key:e,className:Object(he.a)(Se.a.cell,Oe(e),a&&Se.a.highlight),onClick:function(a){a.preventDefault(),function(e){if(i&&"setup"===t.phase){var a=parseInt(e[1],10),n=l.find((function(e){return""+e.id===s}));o.ChooseSeat(a,(null===n||void 0===n?void 0:n.name)||"Player ".concat(a+1))}}(e)}})})),a.pieces.map((function(e){return r.a.createElement(Ce,{key:e.position,position:e.position,variant:["Red1","Blue1","Yellow1","Green1"][e.seat],index:e.id,onSelect:i?v:void 0,onActivate:i?E:void 0,onDeactivate:i?h:void 0,className:Object(he.a)(Se.a.piece,Oe(e.position),i&&b.some(Z.a.matches({from:e.position}))&&Se.a.enabled)})})),a.dieRoll&&r.a.createElement("div",{className:Object(he.a)(Se.a.diceView,(p=null===f||void 0===f?void 0:f.seat,"number"===typeof p?Se.a["seat-"+p]:"")),style:{transform:"rotate(".concat((a.dieRoll+t.turn)%18*10,"deg)")}},r.a.createElement(fe,{value:a.dieRoll,size:10,seat:null===f||void 0===f?void 0:f.seat})))},Ne=t(119),je=t(118),He=t.n(je);function Re(e,a){return Z.a.range(a).map((function(){return Math.floor(Math.random()*e).toString(e)})).join("")}Z.a.curry(Re)(10);var Be=Z.a.curry(Re)(16);function Ie(){var e=localStorage.getItem("creds");return e||(e=Be(16),localStorage.setItem("creds",e)),{credentials:e,clientId:He()(e)}}var Ge=t(93),De=t.n(Ge),Pe=function(e){var a=Object(l.g)("/games/:game_id"),t=Object(l.f)(),n=function(){var e=Object(m.a)(d.a.mark((function e(n){var r,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o=Ie(),s=null===a||void 0===a||null===(r=a.params)||void 0===r?void 0:r.game_id,e.next=5,C(s,o);case 5:t.push("/");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:De.a.title},"seis"),r.a.createElement("button",{className:De.a.exit,onClick:n},r.a.createElement(Ne.a,null)))},Ke=function(){var e=window.innerHeight/100,a=window.innerWidth/100;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--vw","".concat(a,"px")),document.documentElement.style.setProperty("--vmin","".concat(Math.min(e,a),"px")),document.documentElement.style.setProperty("--vmax","".concat(Math.max(e,a),"px"))},Me=function(e){var a=e.children;return Object(n.useEffect)((function(){return Ke(),window.addEventListener("resize",Ke),function(){window.removeEventListener("resize",Ke)}}),[]),r.a.createElement(r.a.Fragment,null,a)},Te=function(e){return r.a.createElement(Me,null,r.a.createElement("div",{className:ce.a.container},r.a.createElement("header",{className:ce.a.header},r.a.createElement(Pe,null)),r.a.createElement("section",{className:ce.a.primary},r.a.createElement("div",{className:ce.a.board},r.a.createElement(ke,e))),r.a.createElement("section",{className:ce.a.secondary},r.a.createElement(Ee,e))))},Ae=t(183),Ye=t(228),Le=t(184),Ve=Object(R.a)((function(e){return{main:{},loading:{padding:e.spacing(2)}}})),Je=function(){var e=Ve();return r.a.createElement(Ae.a,{open:!0},r.a.createElement(Le.a,{className:e.loading},r.a.createElement(Ye.a,{color:"inherit"})))},Fe=Object(P.a)({game:ie,board:Te,multiplayer:Object(K.b)({server:b}),loading:Je}),Ue=function(){var e=Object(m.a)(d.a.mark((function e(a){var t,n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.gameID,n=a.user,e.next=3,E(t);case 3:if(r=e.sent,1!==(o=r.players.filter((function(e){var a;return(null===(a=e.data)||void 0===a?void 0:a.clientId)===n.clientId}))).length){e.next=8;break}return console.log("previously joined room ".concat(t," at seat ").concat(o[0].id)),e.abrupt("return",{room:r,playerID:""+o[0].id,credentials:n.credentials});case 8:if(!(o.length>1)){e.next=12;break}return console.warn("previously joined room ".concat(t," in ").concat(o.length," seats")),e.next=12,C(t,n);case 12:return e.abrupt("return",{room:r});case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(m.a)(d.a.mark((function e(a,t){var n,r,o,s,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(a,1),r=n[0],o=t.gameID,s=t.user,e.next=4,E(o);case 4:return i=e.sent,e.next=7,x(o,r,s);case 7:if(!(l=e.sent)){e.next=10;break}return e.abrupt("return",{room:i,playerID:l,credentials:s.credentials});case 10:return e.abrupt("return",{room:i});case 11:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),We=function(){var e=Object(l.f)();return r.a.createElement(T.a,{open:!0},r.a.createElement(V.a,null,"Game not found"),r.a.createElement(Y.a,null,r.a.createElement(L.a,null,"The game you're trying to access wasn't found. This probably means the game finished, or all players left.")),r.a.createElement(A.a,null,r.a.createElement(O.a,{onClick:function(){e.push("/")},color:"primary"},"Back")))},Ze=function(e){var a=e.open,t=e.onClose,o=Object(n.useState)(window.localStorage.getItem("playerName")||""),s=Object(u.a)(o,2),i=s[0],l=s[1],c=function(e){window.localStorage.setItem("playerName",i),t(i,e)};return r.a.createElement(T.a,{open:a},r.a.createElement(V.a,null,"Join the game"),r.a.createElement(Y.a,null,r.a.createElement(L.a,null,"Enter the name you want to use in the game, then click play. You can also choose to Just Watch if you don't want to play."),r.a.createElement(M.a,{autoFocus:!0,margin:"dense",label:"Your name",fullWidth:!0,value:i,onChange:function(e){l(e.target.value)}})),r.a.createElement(A.a,null,r.a.createElement(O.a,{onClick:function(){c(!0)},color:"secondary"},"Just watch"),r.a.createElement(O.a,{onClick:function(){c(!1)},color:"primary"},"Play")))},Qe=function(){var e,a=Object(l.g)("/games/:game_id"),t=null===a||void 0===a||null===(e=a.params)||void 0===e?void 0:e.game_id,o=Ie(),s=Object(p.a)({promiseFn:Ue,deferFn:ze,gameID:t,user:o}),i=Object(n.useState)(!1),c=Object(u.a)(i,2),_=c[0],d=c[1];return r.a.createElement(r.a.Fragment,null,s.isPending&&r.a.createElement(Je,null),s.isRejected&&r.a.createElement(We,null),s.isFulfilled&&_&&r.a.createElement(Fe,Object.assign({debug:!1},s.data)),s.isFulfilled&&s.data.playerID&&r.a.createElement(Fe,{debug:!1,gameID:s.data.room.roomID,playerID:s.data.playerID,credentials:s.data.credentials}),s.isFulfilled&&!_&&!s.data.playerID&&r.a.createElement(Ze,{open:!0,onClose:function(e,a){d(a),a||s.run(e)}}))},Xe=Object(P.a)({game:ie,board:Te}),qe=t(121),$e=t(21),ea=t.n($e),aa={S00:{x:180,y:-120},S01:{x:160,y:-140},S02:{x:140,y:-160},S03:{x:120,y:-180},S10:{x:120,y:180},S11:{x:140,y:160},S12:{x:160,y:140},S13:{x:180,y:120},S20:{x:-180,y:120},S21:{x:-160,y:140},S22:{x:-140,y:160},S23:{x:-120,y:180},S30:{x:-120,y:-180},S31:{x:-140,y:-160},S32:{x:-160,y:-140},S33:{x:-180,y:-120},C00:{x:30,y:-180},C01:{x:30,y:-150},C02:{x:30,y:-120},C03:{x:30,y:-90},C04:{x:30,y:-60},C05:{x:30,y:-30},C06:{x:60,y:-30},C07:{x:90,y:-30},C08:{x:120,y:-30},C09:{x:150,y:-30},C0A:{x:180,y:-30},C0B:{x:180,y:0},C10:{x:180,y:30},C11:{x:150,y:30},C12:{x:120,y:30},C13:{x:90,y:30},C14:{x:60,y:30},C15:{x:30,y:30},C16:{x:30,y:60},C17:{x:30,y:90},C18:{x:30,y:120},C19:{x:30,y:150},C1A:{x:30,y:180},C1B:{x:0,y:180},C20:{x:-30,y:180},C21:{x:-30,y:150},C22:{x:-30,y:120},C23:{x:-30,y:90},C24:{x:-30,y:60},C25:{x:-30,y:30},C26:{x:-60,y:30},C27:{x:-90,y:30},C28:{x:-120,y:30},C29:{x:-150,y:30},C2A:{x:-180,y:30},C2B:{x:-180,y:0},C30:{x:-180,y:-30},C31:{x:-150,y:-30},C32:{x:-120,y:-30},C33:{x:-90,y:-30},C34:{x:-60,y:-30},C35:{x:-30,y:-30},C36:{x:-30,y:-60},C37:{x:-30,y:-90},C38:{x:-30,y:-120},C39:{x:-30,y:-150},C3A:{x:-30,y:-180},C3B:{x:0,y:-180},H00:{x:0,y:-150},H01:{x:0,y:-120},H02:{x:0,y:-90},H03:{x:0,y:-60},H10:{x:150,y:0},H11:{x:120,y:0},H12:{x:90,y:0},H13:{x:60,y:0},H20:{x:0,y:150},H21:{x:0,y:120},H22:{x:0,y:90},H23:{x:0,y:60},H30:{x:-150,y:0},H31:{x:-120,y:0},H32:{x:-90,y:0},H33:{x:-60,y:0}},ta=function(){return r.a.createElement("g",{pointerEvents:"none"},Z.a.range(-201,200,6).map((function(e){return r.a.createElement("line",{key:e,x1:"-200",y1:e,x2:"200",y2:e,className:ea.a.gridMinor})})),Z.a.range(-201,200,6).map((function(e){return r.a.createElement("line",{key:e,x1:e,y1:"-200",x2:e,y2:"200",className:ea.a.gridMinor})})),Z.a.range(-180,200,30).map((function(e){return r.a.createElement("line",{key:e,x1:"-200",y1:e,x2:"200",y2:e,className:ea.a.gridMajor})})),Z.a.range(-180,200,30).map((function(e){return r.a.createElement("line",{key:e,x1:e,y1:"-200",x2:e,y2:"200",className:ea.a.gridMajor})})))},na=function(e){var a=e.position,t=e.r,n=void 0===t?10:t,o=Object(c.a)(e,["position","r"]),s=aa[a];return r.a.createElement("circle",Object.assign({cx:s.x,cy:s.y,r:n},o))},ra=function(e){var a=e.pos,t=e.seat,o=(Object(c.a)(e,["pos","seat"]),Object(n.useRef)());Object(n.useEffect)((function(){o.current=a}),[o,a]);var s=o.current,i=s&&s!==a?function(e,a,t){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=0,o=[e];o[o.length-1]!==a&&r++<n;){var s=ee(o[o.length-1],t);if("INVALID_MOVE"===s)break;o.push(s)}return o[o.length-1]!==a?[e,a]:o}(s,a,t):[a],l=[ea.a.tokenRed,ea.a.tokenBlue,ea.a.tokenYellow,ea.a.tokenGreen][t],_=i.length>1?{x:i.map((function(e){return aa[e].x-12})),y:i.map((function(e){return aa[e].y-14})),transition:{duration:Math.max(1,i.length/2),ease:"easeOut"}}:{x:aa[a].x-12,y:aa[a].y-14};return r.a.createElement(qe.a.use,{xlinkHref:"#token",height:24,width:24,animate:_,style:{x:aa[a].x-12,y:aa[a].y-14},className:l})},oa=function(e){var a=e.showGrid,t=void 0!==a&&a;e.children;return r.a.createElement("svg",{viewBox:"-200 -200 400 400",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:ea.a.root},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"buttonGradient",gradientTransform:"rotate(70)"},r.a.createElement("stop",{offset:"0%",stopColor:"#ffcdd2"}),r.a.createElement("stop",{offset:"100%",stopColor:"#d32f2f"})),r.a.createElement("radialGradient",{id:"cellGradient",fx:"70%",fy:"70%"},r.a.createElement("stop",{offset:"0%",stopColor:"black",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"80%",stopColor:"black",stopOpacity:"0.5"})),r.a.createElement("radialGradient",{id:"boardGradient"},r.a.createElement("stop",{offset:"50%",stopColor:"transparent"}),r.a.createElement("stop",{offset:"100%",stopColor:"black",stopOpacity:"0.25"})),r.a.createElement("radialGradient",{id:"tokenGradient1",fx:"30%",fy:"30%"},r.a.createElement("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.5"}),r.a.createElement("stop",{offset:"80%",stopColor:"#0a0a0a",stopOpacity:"0.5"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0.5"})),r.a.createElement("radialGradient",{id:"shadowGradient1"},r.a.createElement("stop",{offset:"50%",stopColor:"#000000",stopOpacity:"1"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0"})),r.a.createElement("symbol",{id:"token",viewBox:"-10 -10 20 20",x:"0",y:"0"},r.a.createElement("ellipse",{fill:"url(#shadowGradient1)",cx:"0",cy:"8",rx:"10",ry:"2"}),r.a.createElement("circle",{cx:"0",cy:"0",r:"10"}),r.a.createElement("circle",{fill:"url(#tokenGradient1)",cx:"0",cy:"0",r:"10"}))),t&&r.a.createElement(ta,null),r.a.createElement("g",{pointerEvents:"none",className:ea.a.paintedRed},r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(0) translate(0 -105)"}),r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(45) translate(0 -211)"}),r.a.createElement("text",{x:0,y:15,"dominant-baseline":"middle","text-anchor":"middle",transform:"rotate(45) translate(0 -195)"})),r.a.createElement("g",{className:ea.a.button,transform:"translate(100 -80)"},r.a.createElement("rect",{x:-30,y:-15,width:60,height:30,rx:5}),r.a.createElement("text",{x:0,y:5,fill:"black","dominant-baseline":"middle","text-anchor":"middle"},"Play!")),r.a.createElement("g",{pointerEvents:"none",className:ea.a.paintedBlue},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(135) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(90) translate(0 -105)"}),r.a.createElement("text",{x:0,y:15,"dominant-baseline":"middle","text-anchor":"middle",transform:"rotate(-45) translate(0 170)"},"Blue")),r.a.createElement("g",{pointerEvents:"none",className:ea.a.paintedYellow},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(225) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(180) translate(0 -105)"}),r.a.createElement("text",{x:0,y:15,"dominant-baseline":"middle","text-anchor":"middle",transform:"rotate(45) translate(0 170)"},"Yellow")),r.a.createElement("g",{pointerEvents:"none",className:ea.a.paintedGreen},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(315) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(270) translate(0 -105)"}),r.a.createElement("text",{x:0,y:15,"dominant-baseline":"middle","text-anchor":"middle",transform:"rotate(-45) translate(0 -195)"},"Green")),r.a.createElement("g",null,Z.a.keys(aa).map((function(e){return r.a.createElement(na,{key:e,position:e,r:10,className:ea.a.cell,onClick:(a=e,function(){console.log(a)})});var a}))),r.a.createElement(ra,{pos:"S00",seat:0}),r.a.createElement(ra,{pos:"S01",seat:0}),r.a.createElement(ra,{pos:"S02",seat:0}),r.a.createElement(ra,{pos:"S03",seat:0}),r.a.createElement(ra,{pos:"S10",seat:1}),r.a.createElement(ra,{pos:"S11",seat:1}),r.a.createElement(ra,{pos:"S12",seat:1}),r.a.createElement(ra,{pos:"S13",seat:1}),r.a.createElement(ra,{pos:"S20",seat:2}),r.a.createElement(ra,{pos:"S21",seat:2}),r.a.createElement(ra,{pos:"S22",seat:2}),r.a.createElement(ra,{pos:"S23",seat:2}),r.a.createElement(ra,{pos:"S30",seat:3}),r.a.createElement(ra,{pos:"S31",seat:3}),r.a.createElement(ra,{pos:"S32",seat:3}),r.a.createElement(ra,{pos:"S33",seat:3}),r.a.createElement("svg",{width:"20",height:"20",x:"-30",y:"-10",viewBox:"-10 -10 20 20"},r.a.createElement("rect",{x:"-10",y:"-10",width:"20",height:"20",rx:"2",fill:"blue"}),r.a.createElement("circle",{cx:"0",cy:"0",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"-6",cy:"-6",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"6",cy:"-6",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"-6",cy:"6",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"6",cy:"6",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"0",cy:"-6",r:"2",fill:"white"}),r.a.createElement("circle",{cx:"0",cy:"6",r:"2",fill:"white"})),r.a.createElement("svg",{width:"60",height:"20",x:"10",y:"-10",viewBox:"-30 -10 60 20"},r.a.createElement("rect",{x:"-30",y:"-10",width:"60",height:"20",rx:"2",fill:"blue"}),r.a.createElement("rect",{x:"-30",y:"-10",width:"60",height:"20",rx:"2",fill:"url('#boardGradient')"}),r.a.createElement("text",{x:0,y:4,dominantBaseline:"middle",textAnchor:"middle",fill:"white",style:{fontFamily:"Rye"}},"ROLL")))},sa=(t(180),function(){return r.a.createElement(Me,null,r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/games/:game_id"},r.a.createElement(Qe,null)),r.a.createElement(l.a,{exact:!0,path:"/svg"},r.a.createElement(oa,null)),r.a.createElement(l.a,{exact:!0,path:"/offline"},r.a.createElement(Xe,null)),r.a.createElement(l.a,null,r.a.createElement(D,null)))))});s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(sa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,a,t){e.exports={board:"board_board__1jNgh",name:"board_name__15Ow9",name0:"board_name0__2l8SU board_name__15Ow9",name1:"board_name1__3-upN board_name__15Ow9",name2:"board_name2__3oCap board_name__15Ow9",name3:"board_name3__1P7Qe board_name__15Ow9",cell:"board_cell__1SMco",highlight:"board_highlight__L8Yp-",nowPlaying:"board_nowPlaying__35KnZ",nowPlaying0:"board_nowPlaying0__JhRpy board_nowPlaying__35KnZ",nowPlaying1:"board_nowPlaying1__1gDbt board_nowPlaying__35KnZ",nowPlaying2:"board_nowPlaying2__3uN3w board_nowPlaying__35KnZ",nowPlaying3:"board_nowPlaying3__31HfA board_nowPlaying__35KnZ","pos-C00":"board_pos-C00__2Ji6l","pos-C01":"board_pos-C01__M8F2x","pos-C02":"board_pos-C02__RGWd8","pos-C03":"board_pos-C03__cky2O","pos-C04":"board_pos-C04__3j7bn","pos-C05":"board_pos-C05__uy_ZD","pos-C06":"board_pos-C06__3Nfpn","pos-C07":"board_pos-C07__FOi_-","pos-C08":"board_pos-C08__28teU","pos-C09":"board_pos-C09__1gxOU","pos-C0A":"board_pos-C0A__2JzMu","pos-C0B":"board_pos-C0B__1IXwd","pos-C10":"board_pos-C10__3zKul","pos-C11":"board_pos-C11__G31ka","pos-C12":"board_pos-C12__3mXAr","pos-C13":"board_pos-C13__33SUA","pos-C14":"board_pos-C14__2H3ZH","pos-C15":"board_pos-C15__3lo_q","pos-C16":"board_pos-C16__3etUi","pos-C17":"board_pos-C17__10I5o","pos-C18":"board_pos-C18__2pWou","pos-C19":"board_pos-C19__3HNOE","pos-C1A":"board_pos-C1A__ShBtS","pos-C1B":"board_pos-C1B__31nIA","pos-C20":"board_pos-C20__3tRWR","pos-C21":"board_pos-C21__3fy7r","pos-C22":"board_pos-C22__32_v7","pos-C23":"board_pos-C23__2Ouz7","pos-C24":"board_pos-C24__1Zdfs","pos-C25":"board_pos-C25__3vF2I","pos-C26":"board_pos-C26__3n6Yl","pos-C27":"board_pos-C27__31ooH","pos-C28":"board_pos-C28__1JtNh","pos-C29":"board_pos-C29__1t1VX","pos-C2A":"board_pos-C2A__2M453","pos-C2B":"board_pos-C2B__2ru84","pos-C30":"board_pos-C30__s762x","pos-C31":"board_pos-C31__1uepC","pos-C32":"board_pos-C32__3_M0J","pos-C33":"board_pos-C33__1WxUT","pos-C34":"board_pos-C34__xiCTI","pos-C35":"board_pos-C35__2fTy4","pos-C36":"board_pos-C36__3-9JX","pos-C37":"board_pos-C37__5rCDf","pos-C38":"board_pos-C38__3GYnz","pos-C39":"board_pos-C39__EOitK","pos-C3A":"board_pos-C3A__VhyfP","pos-C3B":"board_pos-C3B__Mjsxi","pos-H00":"board_pos-H00__1b6zA","pos-H01":"board_pos-H01__3xxlc","pos-H02":"board_pos-H02__AHYMc","pos-H03":"board_pos-H03__3VAUf","pos-H10":"board_pos-H10__1Do0H","pos-H11":"board_pos-H11__3mwZs","pos-H12":"board_pos-H12__2YNK9","pos-H13":"board_pos-H13__1iDTE","pos-H20":"board_pos-H20__3D4pg","pos-H21":"board_pos-H21__3tRqU","pos-H22":"board_pos-H22__1jtH1","pos-H23":"board_pos-H23__2ZwLX","pos-H30":"board_pos-H30__3TO6_","pos-H31":"board_pos-H31__288s1","pos-H32":"board_pos-H32__2x5bv","pos-H33":"board_pos-H33__1MOpw","pos-S00":"board_pos-S00__1Qd2V","pos-S01":"board_pos-S01__CjonI","pos-S02":"board_pos-S02__2jh3k","pos-S03":"board_pos-S03__23D4j","pos-S10":"board_pos-S10__258z2","pos-S11":"board_pos-S11__177ao","pos-S12":"board_pos-S12__2hsIs","pos-S13":"board_pos-S13__2gNIV","pos-S20":"board_pos-S20__3-Kgj","pos-S21":"board_pos-S21__z9T6P","pos-S22":"board_pos-S22__1-ZaZ","pos-S23":"board_pos-S23__1I05k","pos-S30":"board_pos-S30__2mwot","pos-S31":"board_pos-S31__3TuiA","pos-S32":"board_pos-S32__2ppp9","pos-S33":"board_pos-S33__3OfhY",home:"board_home__24RKK",home0:"board_home0__x5Y8b board_home__24RKK",home1:"board_home1__nJZQu board_home__24RKK",home2:"board_home2__m6GxB board_home__24RKK",home3:"board_home3__1GTL9 board_home__24RKK",start0:"board_start0__sk5rX board_home__24RKK",start1:"board_start1__3MAMV board_home__24RKK",start2:"board_start2__1bEzz board_home__24RKK",start3:"board_start3__3h9L2 board_home__24RKK",diceView:"board_diceView__3g0GM","seat-0":"board_seat-0__3mHa9","seat-1":"board_seat-1__2-QKu","seat-2":"board_seat-2__3GQbB","seat-3":"board_seat-3__17BTT",piece:"board_piece__10SvQ",enabled:"board_enabled__2dFkR"}},21:function(e,a,t){e.exports={root:"SvgBoard_root__2vlYo",painted:"SvgBoard_painted__1wL0c",paintedRed:"SvgBoard_paintedRed__1FwMr SvgBoard_painted__1wL0c",paintedBlue:"SvgBoard_paintedBlue__1Bcyf SvgBoard_painted__1wL0c",paintedYellow:"SvgBoard_paintedYellow__3Z1k5 SvgBoard_painted__1wL0c",paintedGreen:"SvgBoard_paintedGreen__2iWor SvgBoard_painted__1wL0c",gridMajor:"SvgBoard_gridMajor__3gWTi",gridMinor:"SvgBoard_gridMinor__34m8P",cell:"SvgBoard_cell__12JSt",tokenRed:"SvgBoard_tokenRed__35Di3",tokenBlue:"SvgBoard_tokenBlue__3S9iU",tokenYellow:"SvgBoard_tokenYellow__3S0qZ",tokenGreen:"SvgBoard_tokenGreen__1mE2h",button:"SvgBoard_button__3KjHV"}},29:function(e,a,t){e.exports={root:"controls_root__34suz",button:"controls_button__13r_Q",diceContainer:"controls_diceContainer__2GfqP",diceLeft:"controls_diceLeft__1jSIy",diceRight:"controls_diceRight__2BYdM",diceButton:"controls_diceButton__2k1xa",diceButtonRandom:"controls_diceButtonRandom__2_uzF controls_diceButton__2k1xa",message:"controls_message__1Ghgy"}},55:function(e,a,t){e.exports={container:"layout_container__Ml8q0",header:"layout_header__6jQJG",primary:"layout_primary__1YNVb",secondary:"layout_secondary__3lbCE",board:"layout_board__UFbpr"}},82:function(e,a,t){e.exports={icon:"dice_icon__e1cr0","seat-0":"dice_seat-0__3QYd-","seat-1":"dice_seat-1__3VnhK","seat-2":"dice_seat-2__3kJgG","seat-3":"dice_seat-3__2ukkL",iconRandom:"dice_iconRandom__3D_yR dice_icon__e1cr0"}},93:function(e,a,t){e.exports={title:"header_title__aB6b6",exit:"header_exit__1D1BM"}}},[[134,1,2]]]);
//# sourceMappingURL=main.65d459c2.chunk.js.map