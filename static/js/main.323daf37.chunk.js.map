{"version":3,"sources":["serviceWorker.js","api.ts","game/board.ts","game/index.ts","components/DiceIcon.tsx","components/Piece.tsx","components/Board.tsx","components/JoinRoomDialog.tsx","components/Loading.tsx","components/Layout.tsx","App.tsx","index.js"],"names":["Boolean","window","location","hostname","match","baseUrl","sleep","ms","Promise","resolve","setTimeout","getRoom","roomID","a","fetch","resp","ok","Error","json","data","joinRoom","playerName","playerID","method","body","JSON","stringify","headers","playerCredentials","BoardLocationType","encode","type","seat","index","toString","toUpperCase","Home","_","curry","HOME","Circuit","CIRCUIT","Start","START","calculateNextPosition","fromPos","activeSeat","position","current","parseInt","isStart","isCircuit","nextSeat","isHome","INVALID_MOVE","calculateMove","roll","pieces","nextPos","piece","find","p","includes","range","reduce","acc","cur","next","some","matches","isPassing","error","executeMove","updates","captured","pos","first","difference","map","i","findStartPosition","INITIAL_STATE","players","id","name","color","getPlayerBySeat","G","player","undefined","getValidMoves","ctx","dieRoll","currentPlayer","playerId","getPlayerById","board","from","to","filter","move","SeisGame","setup","moves","rollDie","value","random","D6","movePiece","events","endTurn","has","turn","RandomIcon","GiPerspectiveDiceSixFacesRandom","Icons","1","GiDiceSixFacesOne","2","GiDiceSixFacesTwo","3","GiDiceSixFacesThree","4","GiDiceSixFacesFour","5","GiDiceSixFacesFive","6","GiDiceSixFacesSix","useStyles","makeStyles","theme","createStyles","root","userSelect","width","height","display","fill","flexShrink","fontSize","transition","transitions","create","duration","shorter","DiceIcon","Component","classes","className","Piece","enabled","onSelect","onActivate","onDeactivate","onClick","noop","onMouseEnter","onMouseLeave","loading","padding","spacing","diceContainer","justifyContent","alignItems","diceRandom","flexBasis","margin","diceWrapper","flexFlow","diceButton","flexGrow","main","controls","Board","isActive","useState","activePiece","setActivePiece","getCurrentPlayer","validMoves","activeMove","m","selectPiece","activatePiece","deactivatePiece","flatten","concat","highlight","key","style","transform","Container","length","Typography","Button","variant","IconButton","e","JoinRoomDialog","open","onSubmit","initialState","fields","setValues","event","currentTarget","useForm","handleChange","setLoading","setError","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","required","fullWidth","label","autoFocus","onChange","helperText","disabled","DialogActions","api","room","credentials","gameID","Loading","Backdrop","Paper","CircularProgress","Layout","children","CssBaseline","OnlineClient","Client","game","Game","multiplayer","SocketIO","server","OfflineClient","App","parse","sessionStorage","getItem","setValue","useEffect","setItem","removeItem","useSessionState","gameProps","setGameProps","isLoading","debug","hash","indexOf","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"uPAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,oDCjBOC,EAAU,kCAEvB,SAASC,EAAMC,GACb,OAAO,IAAIC,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAASF,MA4B7C,SAAeI,EAAtB,kC,4CAAO,WAAuBC,GAAvB,iBAAAC,EAAA,sEACcC,MAAMT,EAAU,eAAiBO,GAD/C,WACCG,EADD,QAEKC,GAFL,sBAGG,IAAIC,MAAJ,eAAkBL,EAAlB,eAHH,uBAKCN,EAAM,KALP,uBAMcS,EAAKG,OANnB,cAMCC,EAND,yBAOEA,GAPF,6C,sBAUA,SAAeC,EAAtB,sC,4CAAO,WAAwBR,EAAgBS,EAAoBC,GAA5D,iBAAAT,EAAA,sEACCP,EAAM,KADP,uBAEcQ,MAAMT,EAAU,eAAiBO,EAAS,QAAS,CACpEW,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnB,SAAYJ,EACZ,WAAcD,IAEhBM,QAAS,CAAE,eAAgB,sBARxB,WAECZ,EAFD,QAUKC,GAVL,sBAWG,IAAIC,MAAJ,8BAAiCL,IAXpC,uBAaCN,EAAM,KAbP,wBAccS,EAAKG,OAdnB,eAcCC,EAdD,yBAeEA,EAAKS,mBAfP,6C,0BCvCFC,E,yCAAAA,K,YAAAA,E,SAAAA,E,WAAAA,M,KAQL,SAASC,EAAOC,EAAyBC,EAAcC,GACrD,OAAQF,EAAOC,EAAKE,SAAS,IAAMD,EAAMC,SAAS,KAAKC,cAWzD,IAAMC,EAAOC,IAAEC,MAAMR,EAARO,CAAgBR,EAAkBU,MACzCC,EAAUH,IAAEC,MAAMR,EAARO,CAAgBR,EAAkBY,SAC5CC,EAAQL,IAAEC,MAAMR,EAARO,CAAgBR,EAAkBc,OAahD,SAASC,EAAsBC,EAAiBC,GAC9C,IAxBcC,EAwBRC,EAvBC,CACLjB,MAFYgB,EAwBSF,GAtBN,GACfb,KAAMiB,SAASF,EAAS,GAAI,IAC5Bd,MAAOgB,SAASF,EAAS,GAAI,KAsB/B,GAAIG,EAAQL,GACV,OAAOL,EAAQQ,EAAQhB,KAAM,GAG/B,GAyFF,SAAmBe,GACjB,MAAqC,MAA9BA,EAAS,GAAGZ,cA1FfgB,CAAUN,GAAU,CACtB,GAAIG,EAAQf,MAAQ,GAClB,OAAOO,EAAQQ,EAAQhB,KAAMgB,EAAQf,MAAQ,GAE/C,IAAMmB,GAAYJ,EAAQhB,KAAO,GAxCnB,EAyCd,OAAIoB,IAAaN,EACRV,EAAKgB,EAAU,GAEjBZ,EAAQY,EAAU,GAG3B,OAkFF,SAAgBL,GACd,MAAqC,MAA9BA,EAAS,GAAGZ,cAnFfkB,CAAOR,IAAYG,EAAQf,MAAQ,EAC9BG,EAAKY,EAAQhB,KAAMgB,EAAQf,MAAQ,GAGrCqB,IAQF,SAASC,EAAcV,EAAiBW,EAAcC,GAC3D,IAQIC,EAqDYX,EA7DVY,EAAQF,EAAOG,MAAK,SAAAC,GAAC,OAAIA,EAAEd,WAAaF,KAC9C,GAAqB,qBAAVc,EAAuB,MAAM,IAAI1C,MAAM,6BAGlD,GAAIiC,EAAQL,KAAa,CAAC,EAAG,GAAGiB,SAASN,GACvC,OAAOF,IAIT,IASE,IARAI,EAAUrB,IAAE0B,MAAMP,GAAMQ,QACtB,SAACC,EAAaC,GACZ,IAAMC,EAAOvB,EAAsBqB,EAAKN,EAAM3B,MAC9C,GAAImC,IAASb,IAAc,MAAMA,IACjC,GA+DR,SAAmBG,EAAkBzB,EAAc0B,GACjD,OAAOD,EAAOW,KAAK/B,IAAEgC,QAAQ,CAACtB,SAAUW,EAAS1B,KAAMA,KAhE7CsC,CAAUb,EAAQE,EAAM3B,KAAMmC,GAAO,MAAMb,IAC/C,OAAOa,IACNtB,MAEWA,EAAS,OAAOA,EAChC,MAAO0B,GACP,OAAOjB,IAGT,MAuCqC,OADrBP,EAtCHW,GAuCG,GAAGvB,eAAyC,MAAhBY,EAAS,IAvC5BU,EAAOG,MAAK,SAAAC,GAAC,OAAIH,IAAYG,EAAEd,YAC/CO,IAEFI,EAMF,SAASc,EAAY3B,EAAiBW,EAAcC,GACzD,IAAMC,EAAUH,EAAcV,EAASW,EAAMC,GAC7C,GAAIC,IAAYJ,IACd,MAAM,IAAIrC,MAAM,gBAElB,IAAMwD,EAAkC,GACxCA,EAAQ5B,GAAWa,EAEnB,IAAMgB,EAAWjB,EAAOG,KAAKvB,IAAEgC,QAAQ,CAACtB,SAAUW,KAIlD,OAHIgB,IACFD,EAAQC,EAAS3B,UAQrB,SAA2BU,EAAkBzB,GAC3C,IAAM2C,EAAMtC,IAAEuC,MACZvC,IAAEwC,WACAxC,IAAE0B,MAAM,GAAGe,KAAI,SAAAC,GAAC,OAAIrC,EAAMV,EAAM+C,MAChCtB,EAAOqB,KAAI,SAAAjB,GAAC,OAAIA,EAAEd,cAGtB,IAAK4B,EAAK,MAAM,IAAI1D,MAAM,kBAC1B,OAAO0D,EAhBwBK,CAAkBvB,EAAQiB,EAAS1C,OAE3DyC,EA6BT,SAASvB,EAAQH,GACf,MAAqC,MAA9BA,EAAS,GAAGZ,cCrHrB,IAAM8C,EAAoB,CACxBxB,OAAQ,CACN,CAAEzB,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,OACrB,CAAEf,KAAM,EAAGe,SAAU,QAEvBmC,QAAS,CACP,CAAEC,GAAI,IAAKnD,KAAM,EAAGoD,KAAM,WAAYC,MAAO,OAC7C,CAAEF,GAAI,IAAKnD,KAAM,EAAGoD,KAAM,WAAYC,MAAO,QAC7C,CAAEF,GAAI,IAAKnD,KAAM,EAAGoD,KAAM,WAAYC,MAAO,UAC7C,CAAEF,GAAI,IAAKnD,KAAM,EAAGoD,KAAM,WAAYC,MAAO,WA2C1C,SAASC,EAAgBC,EAAOvD,GACrC,IAAMwD,EAASD,EAAEL,QAAQtB,KAAKvB,IAAEgC,QAAQ,CAAErC,UAC1C,QAAeyD,IAAXD,EACF,MAAMvE,MAAM,oBAEd,OAAOuE,EAYF,SAASE,EAAcH,EAAOI,GACnC,GAAyB,qBAAdJ,EAAEK,QAAyB,MAAO,GAE7C,IAAMC,EA/BD,SAAuBN,EAAOO,GACnC,IAAMN,EAASD,EAAEL,QAAQtB,MAAK,SAACC,GAAD,OAAOA,EAAEsB,KAAOW,KAC9C,QAAeL,IAAXD,EACF,MAAMvE,MAAM,oBAEd,OAAOuE,EA0BeO,CAAcR,EAAGI,EAAIE,eAC3C,OAAON,EAAE9B,OACNqB,KAAI,SAACnB,GACJ,IAAMD,EAAWC,EAAM3B,OAAS6D,EAAc7D,KAC5CgE,EAAoBrC,EAAMZ,SAAUwC,EAAEK,QAAmBL,EAAE9B,QACzDH,IACJ,MAAO,CAAE2C,KAAMtC,EAAMZ,SAAUmD,GAAIxC,MAEpCyC,QAAO,SAACC,GAAD,OAAiBA,EAAKF,KAAO5C,OAkDzC,IAUe+C,EAVY,CACzBjB,KAAM,OACNkB,MAAO,kBAAUrB,GACjBsB,MAAO,CACLC,QArHJ,SAAiBjB,EAAOI,EAAUc,GAA4C,IAAD,EAC3E,MAAyB,qBAAdlB,EAAEK,QACJtC,IAEF,eACFiC,EADL,CAEEK,QAASa,IAAK,UAAId,EAAIe,cAAR,aAAI,EAAYC,SAgH9BC,UAjDJ,SAAmBrB,EAAOI,EAAU5C,GAClC,QAAkB0C,IAAdF,EAAEK,QACJ,OAAOtC,IAGT,GAAiB,KAAbP,EAAiB,CAAC,IAAD,EACnB,KAAI,UAAC4C,EAAIkB,cAAL,aAAC,EAAYC,SACf,MAAM,IAAI7F,MAAM,mCAGlB,OADA0E,EAAIkB,OAAOC,UACJ,eACFvB,EADL,CAEEK,aAASH,IAIb,IAAIhB,EACJ,IACEA,EAAUuB,EAAkBjD,EAAUwC,EAAEK,QAAmBL,EAAE9B,QAC7D,MAAOc,GACP,OAAOjB,IAGT,IAAKqC,EAAIkB,SAAWlB,EAAIkB,OAAOC,QAC7B,MAAM,IAAI7F,MAAM,2BAIlB,GAAIsE,EAAEK,QAAU,EAAG,CAAC,IAAD,EACjB,KAAI,UAACD,EAAIkB,cAAL,aAAC,EAAYC,SACf,MAAM,IAAI7F,MAAM,mCAElB0E,EAAIkB,OAAOC,UAGb,OAAO,eACFvB,EADL,CAEEK,aAASH,EACThC,OAAQ8B,EAAE9B,OAAOqB,KACf,SAAAjB,GAAC,OAAMxB,IAAE0E,IAAItC,EAASZ,EAAEd,UAAjB,eAAiCc,EAAjC,CAAoCd,SAAU0B,EAAQZ,EAAEd,YAAac,SAYhFmD,KAAM,I,0BCnKFC,EAAaC,IACbC,EAAqC,CACzCC,EAAGC,IACHC,EAAGC,IACHC,EAAGC,IACHC,EAAGC,IACHC,EAAGC,IACHC,EAAGC,KAGCC,EAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXC,KAAM,CACJC,WAAY,OACZC,MAAO,MACPC,OAAQ,MACRC,QAAS,eACTC,KAAM,eACNC,WAAY,EACZC,SAAU,UACVC,WAAYV,EAAMW,YAAYC,OAAO,OAAQ,CAClDC,SAAUb,EAAMW,YAAYE,SAASC,gBAqBvBC,EAX4B,SAAC,GAErC,IADLxC,EACI,EADJA,MAEMyC,EAAYzC,EAAQU,EAAMV,GAASQ,EACnCkC,EAAUnB,IAEhB,OACE,kBAACkB,EAAD,CAAWE,UAAWD,EAAQf,QCZnBiB,EAxByB,SAAC,GASnC,EARJ9D,EAQI,EAPJI,IAOK,IANLH,EAMI,EANJA,OACAzC,EAKI,EALJA,SACAuG,EAII,EAJJA,QACAC,EAGI,EAHJA,SACAC,EAEI,EAFJA,WACAC,EACI,EADJA,aAMA,OACE,yBACEL,UAAW,SAAW5D,EAAOH,OAASiE,EAAU,WAAa,IAC7DI,QAPY,YAASH,GAAYlH,IAAEsH,MAAM5G,IAQzC6G,aAPiB,YAASJ,GAAcnH,IAAEsH,MAAM5G,IAQhD8G,aAPiB,YAASJ,GAAgBpH,IAAEsH,MAAM5G,O,mCCNlDiF,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvC4B,QAAS,CACPC,QAAS7B,EAAM8B,QAAQ,IAEzBC,cAAe,CACbzB,QAAS,OACT0B,eAAgB,eAChBC,WAAY,SACZ7B,MAAO,QAET8B,WAAY,CACVC,UAAW,MACX7B,QAAS,QACT8B,OAAQ,EACRP,QAAS,EACTzB,MAAO,OACPC,OAAQ,OACRI,SAAU,QAEZ4B,YAAa,CACXF,UAAW,MACX/B,MAAO,OACPC,OAAQ,OACRC,QAAS,OACTgC,SAAU,WACVL,WAAY,SACZD,eAAgB,gBAElBO,WAAY,CACVJ,UAAW,MACXK,SAAU,EACVlC,QAAS,QACT8B,OAAQ,EACRP,QAAS,EACTzB,MAAO,OACPC,OAAQ,OACRI,SAAU,OAIZgC,KAAM,CACJpC,OAAQ,QACRD,MAAO,QACPE,QAAS,OACT0B,eAAgB,SAChBC,WAAY,UAEdnE,MAAO,CACLjD,SAAU,WACVyF,QAAS,QAEXoC,SAAU,CACR7H,SAAU,WACVyF,QAAS,OACT0B,eAAgB,SAChBC,WAAY,UAGd,iCAAkC,CAChCQ,KAAM,CACJH,SAAU,iBAEZxE,MAAO,CACLuC,OAAQ,mBACRD,MAAO,oBAETsC,SAAU,CACRrC,OAAQ,OACRD,MAAO,UAIX,kCAAmC,CACjCqC,KAAM,CACJH,SAAU,cAEZxE,MAAO,CACLuC,OAAQ,mBACRD,MAAO,oBAETsC,SAAU,CACRrC,OAAQ,QACRD,MAAO,aA4IEuC,EA9HyB,SAAC,GAMlC,IALLtF,EAKI,EALJA,EACAI,EAII,EAJJA,IACAY,EAGI,EAHJA,MAEAuE,GACI,EAFJxJ,SAEI,EADJwJ,UAEM3B,EAAUnB,IADZ,EAIkC+C,qBAJlC,mBAIGC,EAJH,KAIgBC,EAJhB,KAMEpF,EH5DD,SAA0BN,EAAOI,GACtC,IAAMH,EAASD,EAAEL,QAAQtB,MAAK,SAACC,GAAD,OAAOA,EAAEsB,KAAOQ,EAAIE,iBAClD,QAAeJ,IAAXD,EACF,MAAMvE,MAAM,oBAEd,OAAOuE,EGuDe0F,CAAiB3F,EAAGI,GAEpCwF,EAAazF,EAAcH,EAAGI,GAC9ByF,EAAaD,EAAWvH,MAAK,SAAAyH,GAAC,OAAIL,GAAeA,IAAgBK,EAAEpF,QAEnEqF,EAAc,SAACvI,GACfoI,EAAWvH,MAAK,SAAAyH,GAAC,OAAIA,EAAEpF,OAASlD,OAClCwD,EAAMK,UAAU7D,GAChBkI,OAAexF,KAIb8F,EAAgB,SAACxI,GACrBkI,EAAelI,IAGXyI,EAAkB,SAACzI,GACvBkI,OAAexF,IAQjB,OACE,yBAAK2D,UAAS,UAAKD,EAAQwB,KAAb,qCAA8C9E,EAAc7D,OACxE,yBAAKoH,UAAS,UAAKD,EAAQnD,MAAb,YJHX3D,IAAEoJ,QACPpJ,IAAE0B,MAlJY,GAkJKe,KACjB,SAAA9C,GAAI,OACFK,IAAEqJ,OACA,GACArJ,IAAE0B,MAAM,GAAGe,KAAI,SAAAC,GAAC,OAAIrC,EAAMV,EAAM+C,MAChC1C,IAAE0B,MAAM,IAAIe,KAAI,SAAAC,GAAC,OAAIvC,EAAQR,EAAM+C,MACnC1C,IAAE0B,MAAM,GAAGe,KAAI,SAAAC,GAAC,OAAI3C,EAAKJ,EAAM+C,WIHfD,KAAK,SAAAH,GACrB,IAAMhB,EAAQ4B,EAAE9B,OAAOG,MAAK,SAAAC,GAAC,OAAIA,EAAEd,WAAa4B,KAC1CgH,GAAsB,OAAVP,QAAU,IAAVA,OAAA,EAAAA,EAAYlF,MAAOvB,EACrC,OACE,yBAAKiH,IAAKjH,EAAKyE,UAAS,eAAUzE,IAChC,yBAAKyE,UAAS,eAAUuC,EAAY,YAAc,KAC9ChI,GACA,kBAAC,EAAD,CACE4B,EAAGA,EAAGI,IAAKA,EACXH,OAAQF,EAAgBC,EAAG5B,EAAM3B,MACjCe,SAAU4B,EACV4E,SAAUuB,EAAWQ,OAAc7F,EACnC+D,WAAYsB,EAAWS,OAAgB9F,EACvCgE,aAAcqB,EAAWU,OAAkB/F,EAC3C6D,QAASwB,GAAYK,EAAW/G,KAAK/B,IAAEgC,QAAQ,CAAC4B,KAAMtB,YAOhEY,EAAEK,SACF,yBACEwD,UAAS,8BAAyBvD,EAAc7D,MAChD6J,MAAO,CAACC,UAAU,UAAD,QAAcvG,EAAEK,QAAUD,EAAIqB,MAAQ,GAAM,GAA5C,UACjB,kBAAC,EAAD,CAAUP,MAAOlB,EAAEK,YAKzB,kBAACmG,EAAA,EAAD,CAAW3C,UAAWD,EAAQyB,aACxBE,IAAYvF,EAAEK,SAAiC,IAAtBuF,EAAWa,SACtC,6BACE,kBAACC,EAAA,EAAD,iBACA,6BACE,kBAACC,EAAA,EAAD,CAAQC,QAAQ,YAAYzC,QA3C3B,WAEXnD,EAAMK,UAAU,MAyCN,cAKLkE,IAAavF,EAAEK,SACd,yBAAKwD,UAAWD,EAAQc,eACtB,kBAACmC,EAAA,EAAD,CACEhD,UAAWD,EAAQiB,WACnBV,QAAS,SAAA2C,GAAM9F,EAAMC,YACrB,kBAAC,EAAD,OAEF,yBAAK4C,UAAWD,EAAQoB,aACtB,kBAAC6B,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,KAEnB,kBAAC2F,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,KAEnB,kBAAC2F,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,KAEnB,kBAAC2F,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,KAEnB,kBAAC2F,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,KAEnB,kBAAC2F,EAAA,EAAD,CACEhD,UAAWD,EAAQsB,WACnBf,QAAS,SAAA2C,GAAM9F,EAAMC,QAAQ,KAC7B,kBAAC,EAAD,CAAUC,MAAO,U,0EClMjC,IAsFe6F,GAnFV,SAAC,GAGC,IAFLC,EAEI,EAFJA,KACAC,EACI,EADJA,SACI,EApBC,SACLC,GACsD,IAAD,EACzB1B,mBAAY0B,GADa,mBAC9CC,EAD8C,KACtCC,EADsC,KASrD,MAAO,CAAED,EANY,SAACE,GACpBD,EAAU,eACLD,EADI,eAENE,EAAMC,cAAc1H,GAAKyH,EAAMC,cAAcpG,WAanBqG,CAAmB,CAAClM,OAAQ,GAAIwE,KAAM,KADjE,mBACGsH,EADH,KACWK,EADX,OAE0BhC,oBAAkB,GAF5C,mBAEGjB,EAFH,KAEYkD,EAFZ,OAGsBjC,qBAHtB,mBAGGxG,EAHH,KAGU0I,EAHV,KAwCJ,OACE,kBAACC,EAAA,EAAD,CAAQX,KAAMA,GACZ,kBAACY,EAAA,EAAD,4BACA,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,8DAGA,kBAACC,GAAA,EAAD,CACEC,UAAU,EACVC,WAAW,EACXrI,GAAG,OACHC,KAAK,OACLqI,MAAM,OACNC,WAAW,EACXC,SAAUZ,EACVtG,MAAOiG,EAAOtH,KACdwI,WAAW,uCACXC,SAAU/D,IAEZ,kBAACwD,GAAA,EAAD,CACEC,UAAU,EACVC,WAAW,EACXrI,GAAG,SACHC,KAAK,SACLqI,MAAM,UACNE,SAAUZ,EACVtG,MAAOiG,EAAO9L,OACdgN,WAAYrJ,GAAS,4BACrBsJ,SAAU/D,KAGd,kBAACgE,GAAA,EAAD,KACE,kBAAC5B,EAAA,EAAD,CAAQxC,QAnEO,WACnB,sBAAC,oCAAA7I,EAAA,6DACCmM,GAAW,GACXC,OAASxH,GAFV,kBAMgBsI,EAAYrB,EAAO9L,QANnC,OAMGoN,EANH,8DAQGhB,GAAW,GACXC,EAAS,kBATZ,yCAYoBe,EAAK9I,SAZzB,gEAYYlD,EAZZ,SAaYoD,KAbZ,mFAiB+B2I,EAAarB,EAAO9L,OAAQ8L,EAAOtH,KAAMpD,EAAKmD,IAjB7E,eAiBW8I,EAjBX,OAkBKzB,EAAS,CACP0B,OAAQxB,EAAO9L,OACfU,SAAUU,EAAKmD,GAAK,GACpB8I,gBAEFjB,GAAW,GAvBhB,sOA6BCA,GAAW,GACXC,EAAS,iBA9BV,8EAAD,IAkEmC5H,MAAM,WAArC,W,wCC/GF2C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCyC,KAAM,GACNb,QAAS,CACPC,QAAS7B,EAAM8B,QAAQ,QAeZmE,GAXoB,WACjC,IAAMhF,EAAUnB,KAChB,OACE,kBAACoG,GAAA,EAAD,CAAU7B,MAAM,GACd,kBAAC8B,GAAA,EAAD,CAAOjF,UAAWD,EAAQW,SACxB,kBAACwE,GAAA,EAAD,CAAkBjJ,MAAM,eCR1B2C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCyC,KAAM,OA2BO4D,GAtBV,SAAC,GAGC,IAAD,IAFJzE,eAEI,SADJ0E,EACI,EADJA,SAEMrF,EAAUnB,KAEhB,OACE,kBAAC,WAAD,KACE,kBAACyG,GAAA,EAAD,MACA,0BAAMrF,UAAWD,EAAQwB,MACtBb,EACC,kBAAC,GAAD,MAEA,kBAAC,WAAD,KACG0E,MCYPE,I,OAAeC,YAAO,CAC1BC,KAAMC,EACN7I,MAAO6E,EACPiE,YAAaC,YAAS,CAAEC,OAAQ,oCAChClF,QAASqE,MAGLc,GAAgBN,YAAO,CAC3BC,KAAMC,EACN7I,MAAO6E,IAwCMqE,GArCgB,WAAO,IAAD,EAhCb,SAACtD,GAAiB,IAAD,EACbb,oBAAS,WACjC,IACE,OAAOtJ,KAAK0N,MAAMC,eAAeC,QAAQzD,IAAQ,QACjD,MAAOrH,GACP,WALmC,mBAChCkC,EADgC,KACzB6I,EADyB,KAiBvC,OARAC,qBAAU,WACJ9I,EACF2I,eAAeI,QAAQ5D,EAAKnK,KAAKC,UAAU+E,IAE3C2I,eAAeK,WAAW7D,KAE3B,CAACA,EAAKnF,IAEF,CAACA,EAAO6I,GAgBmBI,CAAgB,QADf,mBAC5BC,EAD4B,KACjBC,EADiB,OAEH7E,oBAAkB,GAFf,mBAE5B8E,EAF4B,KAEjB7C,EAFiB,KAI7B8C,EAAQ7P,OAAOC,SAAS6P,KAAKC,QAAQ,SAAW,EAiBtD,OAfAT,qBAAU,WACJO,IAGJ9C,GAAW,GACX,sBAAC,sBAAAnM,EAAA,+EAESkN,EAAY4B,EAAUzB,QAF/B,sDAIG0B,OAAanK,GAJhB,OAMCuH,GAAW,GANZ,uDAAD,MAQC,CAAC8C,EAAOH,EAAWC,IAGpB,kBAAC,GAAD,CAAQ9F,QAAS+F,GACbC,EACE,kBAACb,GAAD,CAAea,OAAO,IAEtBH,EACE,kBAACjB,GAAD,iBAAkBiB,EAAlB,CAA6BG,OAAO,KAEpC,kBAAC,GAAD,CAAgBvD,MAAM,EAAMC,SAAUoD,MC7ElDK,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFC,SAASC,eAAe,SXwHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAArM,GACLsM,QAAQtM,MAAMA,EAAMuM,c","file":"static/js/main.323daf37.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","// export const baseUrl = 'http://10.0.1.27:8000';\nexport const baseUrl = 'https://seis-game.herokuapp.com';\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport async function createRoom(): Promise<IRoom> {\n  const resp = await fetch(baseUrl + '/games/seis/create', {\n    method: 'POST',\n    body: JSON.stringify({\n      numPlayers: 4,\n      unlisted: true,\n    }),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  if (!resp.ok) {\n    throw new Error('HTTP status ' + resp.status);\n  }\n  const data = await resp.json();\n  return await getRoom(data.roomID);\n}\n\nexport interface IRoom {\n  roomID: string,\n  players: {\n    id: string,\n    name?: string,\n  }[],\n  setupData?: any,\n}\n\nexport async function getRoom(roomID: string): Promise<IRoom> {\n  const resp = await fetch(baseUrl + '/games/seis/' + roomID);\n  if (!resp.ok) {\n    throw new Error(`Room ${roomID} not found`)\n  }\n  await sleep(1000);\n  const data = await resp.json();\n  return data;\n}\n\nexport async function joinRoom(roomID: string, playerName: string, playerID: string) {\n  await sleep(1000);\n  const resp = await fetch(baseUrl + '/games/seis/' + roomID + '/join', {\n    method: 'POST',\n    body: JSON.stringify({\n      \"playerID\": playerID,\n      \"playerName\": playerName,\n    }),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  if (!resp.ok) {\n    throw new Error(`Unable to join room ${roomID}`)\n  }\n  await sleep(1000);\n  const data = await resp.json();\n  return data.playerCredentials;\n}\n","import _ from 'lodash';\nimport { INVALID_MOVE } from \"boardgame.io/core\";\n\nenum BoardLocationType {\n  CIRCUIT = \"C\",\n  HOME = \"H\",\n  START = \"S\",\n}\n\nconst NUM_SEATS = 4;\n\nfunction encode(type: BoardLocationType, seat: number, index: number): string {\n  return (type + seat.toString(16) + index.toString(16)).toUpperCase();\n}\n\nfunction decode(position: string): {type: string, seat: number, index: number} {\n  return {\n    type: position[0],\n    seat: parseInt(position[1], 16),\n    index: parseInt(position[2], 16),\n  }\n}\n\nconst Home = _.curry(encode)(BoardLocationType.HOME)\nconst Circuit = _.curry(encode)(BoardLocationType.CIRCUIT)\nconst Start = _.curry(encode)(BoardLocationType.START)\n\n\ninterface IPiece {\n  seat: number,\n  position: string,\n}\n\n/**\n * Calculate the next position (N+1) for a token with the given seat position.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nfunction calculateNextPosition(fromPos: string, activeSeat: number): string {\n  const current = decode(fromPos);\n\n  if (isStart(fromPos)) {\n    return Circuit(current.seat, 0);\n  }\n\n  if (isCircuit(fromPos)) {\n    if (current.index < 11) {\n      return Circuit(current.seat, current.index + 1);\n    }\n    const nextSeat = (current.seat + 1) % NUM_SEATS;\n    if (nextSeat === activeSeat) {\n      return Home(nextSeat, 0)\n    }\n    return Circuit(nextSeat, 0)\n  }\n\n  if (isHome(fromPos) && current.index < 3) {\n    return Home(current.seat, current.index + 1)\n  }\n\n  return INVALID_MOVE;\n}\n\n/**\n * Calculate the next position for a token moving `roll` positions.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nexport function calculateMove(fromPos: string, roll: number, pieces: IPiece[]): string {\n  const piece = pieces.find(p => p.position === fromPos)\n  if (typeof piece === \"undefined\") throw new Error(\"No piece in that position\")\n\n  // only a 1 or a 6 can get you out of the start position.\n  if (isStart(fromPos) && ![1, 6].includes(roll)) {\n    return INVALID_MOVE;\n  }\n\n  let nextPos: string;\n  try {\n    nextPos = _.range(roll).reduce(\n      (acc: string, cur: any): string => {\n        const next = calculateNextPosition(acc, piece.seat);\n        if (next === INVALID_MOVE) throw INVALID_MOVE;\n        if (isPassing(pieces, piece.seat, next)) throw INVALID_MOVE;\n        return next;\n      }, fromPos\n    )\n    if (nextPos === fromPos) return fromPos;\n  } catch (error) {\n    return INVALID_MOVE;\n  }\n\n  if (isSafety(nextPos) && pieces.find(p => nextPos === p.position)) {\n    return INVALID_MOVE;\n  }\n  return nextPos;\n}\n\n/**\n * Perform the given move, returning an updated list of pieces.\n */\nexport function executeMove(fromPos: string, roll: number, pieces: IPiece[]): Record<string, string> {\n  const nextPos = calculateMove(fromPos, roll, pieces);\n  if (nextPos === INVALID_MOVE) {\n    throw new Error(\"invalid move\")\n  }\n  const updates: Record<string, string> = {};\n  updates[fromPos] = nextPos;\n\n  const captured = pieces.find(_.matches({position: nextPos}));\n  if (captured) {\n    updates[captured.position] = findStartPosition(pieces, captured.seat);\n  }\n  return updates;\n}\n\n/**\n * Find an unoccupied START location to return the captured piece to.\n */\nfunction findStartPosition(pieces: IPiece[], seat: number): string {\n  const pos = _.first(\n    _.difference(\n      _.range(4).map(i => Start(seat, i)),\n      pieces.map(p => p.position)\n    )\n  )\n  if (!pos) throw new Error(\"cannot capture\")\n  return pos;\n}\n\nfunction isSafety(position: string): boolean {\n  return position[0].toUpperCase() === \"C\" && position[2] === \"5\"\n}\n\nfunction isCircuit(position: string): boolean {\n  return position[0].toUpperCase() === \"C\"\n}\n\nfunction isHome(position: string): boolean {\n  return position[0].toUpperCase() === \"H\"\n}\n\nfunction isStart(position: string): boolean {\n  return position[0].toUpperCase() === \"S\"\n}\n\nfunction isPassing(pieces: IPiece[], seat: number, nextPos: string): boolean {\n  return pieces.some(_.matches({position: nextPos, seat: seat}))\n}\n\n/**\n * Return an Array of all positions on the board.\n */\nexport function BoardPositions() {\n  return _.flatten(\n    _.range(NUM_SEATS).map(\n      seat => (\n        _.concat(\n          [],\n          _.range(4).map(i => Start(seat, i)),\n          _.range(12).map(i => Circuit(seat, i)),\n          _.range(4).map(i => Home(seat, i)),\n        )\n      )\n    )\n  );\n}\n","import { INVALID_MOVE } from \"boardgame.io/core\";\nimport { Game, Ctx } from \"boardgame.io\";\nimport _ from 'lodash';\n\nimport { DiceValue } from \"../constants\";\nimport * as board from \"./board\";\nexport { BoardPositions } from './board';\n\nexport interface IPiece {\n  seat: number,\n  position: string;\n}\n\nexport interface IPlayer {\n  id: string;\n  seat: number;\n  name: string;\n  color: string;\n}\n\nexport interface IG {\n  pieces: IPiece[];\n  players: IPlayer[];\n  dieRoll?: number;\n}\n\nconst INITIAL_STATE: IG = {\n  pieces: [\n    { seat: 0, position: \"S00\" },\n    { seat: 0, position: \"S01\" },\n    { seat: 0, position: \"S02\" },\n    { seat: 0, position: \"S03\" },\n    { seat: 1, position: \"S10\" },\n    { seat: 1, position: \"S11\" },\n    { seat: 1, position: \"S12\" },\n    { seat: 1, position: \"S13\" },\n    { seat: 2, position: \"S20\" },\n    { seat: 2, position: \"S21\" },\n    { seat: 2, position: \"S22\" },\n    { seat: 2, position: \"S23\" },\n    { seat: 3, position: \"S30\" },\n    { seat: 3, position: \"S31\" },\n    { seat: 3, position: \"S32\" },\n    { seat: 3, position: \"S33\" },\n  ],\n  players: [\n    { id: \"0\", seat: 0, name: \"Player 1\", color: \"red\" },\n    { id: \"1\", seat: 1, name: \"Player 2\", color: \"blue\" },\n    { id: \"2\", seat: 2, name: \"Player 3\", color: \"yellow\" },\n    { id: \"3\", seat: 3, name: \"Player 4\", color: \"green\" },\n  ],\n};\n\n/**\n * Roll the die. If passed a number 1-6, use that as the value,\n * otherwise, use a random die roll.\n */\nfunction rollDie(G: IG, ctx: Ctx, value: DiceValue | undefined): IG | string {\n  if (typeof G.dieRoll !== \"undefined\") {\n    return INVALID_MOVE;\n  }\n  return {\n    ...G,\n    dieRoll: value || ctx.random?.D6(),\n  };\n}\n\n/**\n * Selector to get the current player instance.\n */\nexport function getCurrentPlayer(G: IG, ctx: Ctx): IPlayer {\n  const player = G.players.find((p) => p.id === ctx.currentPlayer);\n  if (player === undefined) {\n    throw Error(\"undefined player\");\n  }\n  return player;\n}\n\n/**\n * Selector to get the current player instance.\n */\nexport function getPlayerById(G: IG, playerId: string): IPlayer {\n  const player = G.players.find((p) => p.id === playerId);\n  if (player === undefined) {\n    throw Error(\"undefined player\");\n  }\n  return player;\n}\n\n/**\n * Selector to get a player by their seat number.\n */\nexport function getPlayerBySeat(G: IG, seat: number): IPlayer {\n  const player = G.players.find(_.matches({ seat }));\n  if (player === undefined) {\n    throw Error(\"undefined player\");\n  }\n  return player;\n}\n\nexport interface IMove {\n  from: string,\n  to: string,\n}\n\n/**\n * Get a list of valid moves from the current game state.\n */\n// export function getValidMoves(G: IG, ctx: Ctx): IPiece[] {\nexport function getValidMoves(G: IG, ctx: Ctx): IMove[] {\n  if (typeof G.dieRoll === \"undefined\") return [];\n\n  const currentPlayer = getPlayerById(G, ctx.currentPlayer);\n  return G.pieces\n    .map((piece): IMove => {\n      const nextPos = (piece.seat === currentPlayer.seat) ? (\n        board.calculateMove(piece.position, G.dieRoll as number, G.pieces)\n      ) : INVALID_MOVE;\n      return { from: piece.position, to: nextPos };\n    })\n    .filter((move: IMove) => move.to !== INVALID_MOVE);\n}\n\n/**\n * Move the piece at the given position.\n */\nfunction movePiece(G: IG, ctx: Ctx, position: string): IG | string {\n  if (G.dieRoll === undefined) {\n    return INVALID_MOVE;\n  }\n\n  if (position === \"\") {\n    if (!ctx.events?.endTurn) {\n      throw new Error(\"ctx.events.endTurn is undefined\");\n    }\n    ctx.events.endTurn();\n    return {\n      ...G,\n      dieRoll: undefined,\n    };\n  }\n\n  let updates: any;\n  try {\n    updates = board.executeMove(position, G.dieRoll as number, G.pieces);\n  } catch (error) {\n    return INVALID_MOVE;\n  }\n\n  if (!ctx.events || !ctx.events.endTurn) {\n    throw new Error(\"ctx.events is undefined\");\n  }\n\n  // The turn is over unless a 6 was rolled AND a move was made.\n  if (G.dieRoll < 6) {\n    if (!ctx.events?.endTurn) {\n      throw new Error(\"ctx.events.endTurn is undefined\");\n    }\n    ctx.events.endTurn();\n  }\n\n  return {\n    ...G,\n    dieRoll: undefined,\n    pieces: G.pieces.map(\n      p => ( _.has(updates, p.position) ? {...p, position: updates[p.position]} : p)\n    ),\n  };\n}\n\nconst SeisGame: Game<IG> = {\n  name: \"seis\",\n  setup: (): IG => INITIAL_STATE,\n  moves: {\n    rollDie,\n    movePiece,\n  },\n  turn: {},\n};\n\nexport default SeisGame;\n","import React, {FunctionComponent} from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport { IconType} from 'react-icons';\nimport {\n  GiDiceSixFacesOne,\n  GiDiceSixFacesTwo,\n  GiDiceSixFacesThree,\n  GiDiceSixFacesFour,\n  GiDiceSixFacesFive,\n  GiDiceSixFacesSix,\n  GiPerspectiveDiceSixFacesRandom,\n} from 'react-icons/gi';\nimport { DiceValue } from \"../constants\";\n\nconst RandomIcon = GiPerspectiveDiceSixFacesRandom;\nconst Icons: Record<DiceValue, IconType> = {\n  1: GiDiceSixFacesOne,\n  2: GiDiceSixFacesTwo,\n  3: GiDiceSixFacesThree,\n  4: GiDiceSixFacesFour,\n  5: GiDiceSixFacesFive,\n  6: GiDiceSixFacesSix,\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      userSelect: 'none',\n      width: '1em',\n      height: '1em',\n      display: 'inline-block',\n      fill: 'currentColor',\n      flexShrink: 0,\n      fontSize: 'inherit',\n      transition: theme.transitions.create('fill', {\n\tduration: theme.transitions.duration.shorter,\n      }),\n    },\n  }),\n);\n\ninterface Props {\n  value?: DiceValue,\n}\n\nconst DiceIcon: FunctionComponent<Props> = ({\n  value,\n}) => {\n  const Component = value ? Icons[value] : RandomIcon;\n  const classes = useStyles();\n\n  return (\n    <Component className={classes.root} />\n  );\n};\n\nexport default DiceIcon;\n","import _ from 'lodash';\nimport React, {FunctionComponent} from 'react';\nimport { Ctx } from 'boardgame.io';\nimport { IG, IPlayer } from '../game';\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  player: IPlayer,\n  position: string,\n  enabled?: boolean,\n  onSelect?: (position: string) => void,\n  onActivate?: (position: string) => void,\n  onDeactivate?: (position: string) => void,\n}\n\nconst Piece: FunctionComponent<Props> = ({\n  G,\n  ctx,\n  player,\n  position,\n  enabled,\n  onSelect,\n  onActivate,\n  onDeactivate,\n}) => {\n  const onClick = () => { (onSelect || _.noop)(position); }\n  const onMouseEnter = () => { (onActivate || _.noop)(position); }\n  const onMouseLeave = () => { (onDeactivate || _.noop)(position); }\n\n  return (\n    <div\n      className={\"Piece \" + player.color + (enabled ? ' enabled' : '')}\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    />\n  )\n}\n\nexport default Piece;\n","import _ from 'lodash';\nimport React, { FunctionComponent, useState } from 'react';\nimport { Ctx } from 'boardgame.io';\n\nimport {\n  IG,\n  getCurrentPlayer,\n  getPlayerBySeat,\n  getValidMoves,\n  BoardPositions,\n} from '../game';\n\nimport ActionDrawer from './ActionDrawer';\nimport DiceIcon from './DiceIcon';\nimport Piece from './Piece';\n\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  loading: {\n    padding: theme.spacing(2),\n  },\n  diceContainer: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n    width: '80vw',\n  },\n  diceRandom: {\n    flexBasis: '40%',\n    display: 'block',\n    margin: 0,\n    padding: 0,\n    width: '20vw',\n    height: '20vw',\n    fontSize: '20vw',\n  },\n  diceWrapper: {\n    flexBasis: '60%',\n    width: '40vw',\n    height: '20vw',\n    display: 'flex',\n    flexFlow: 'row wrap',\n    alignItems: 'center',\n    justifyContent: 'space-evenly',\n  },\n  diceButton: {\n    flexBasis: '33%',\n    flexGrow: 0,\n    display: 'block',\n    margin: 0,\n    padding: 0,\n    width: '10vw',\n    height: '10vw',\n    fontSize: '8vw',\n  },\n\n\n  main: {\n    height: '100vh',\n    width: '100vw',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  board: {\n    position: 'relative',\n    display: 'flex',\n  },\n  controls: {\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n\n  '@media (orientation: portrait)': {\n    main: {\n      flexFlow: 'column nowrap',\n    },\n    board: {\n      height: 'min(60vh, 100vw)',\n      width: 'min(60vh, 100vw)',\n    },\n    controls: {\n      height: '40vh',\n      width: '100vw',\n    },\n  },\n\n  '@media (orientation: landscape)': {\n    main: {\n      flexFlow: 'row nowrap',\n    },\n    board: {\n      height: 'min(60vw, 100vh)',\n      width: 'min(60vw, 100vh)',\n    },\n    controls: {\n      height: '100vh',\n      width: '40vw',\n    },\n  }\n}));\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  moves: any,\n  playerID?: string,\n  isActive: boolean,\n}\n\n\nconst Board: FunctionComponent<Props> = ({\n  G,\n  ctx,\n  moves,\n  playerID,\n  isActive,\n}) => {\n  const classes = useStyles();\n\n  // The position of the currently hightlighed piece.\n  const [activePiece, setActivePiece] = useState<string|undefined>();\n\n  const currentPlayer = getCurrentPlayer(G, ctx);\n\n  const validMoves = getValidMoves(G, ctx);\n  const activeMove = validMoves.find(m => activePiece && activePiece === m.from);\n\n  const selectPiece = (position: string) => {\n    if (validMoves.find(m => m.from === position)) {\n      moves.movePiece(position);\n      setActivePiece(undefined);\n    }\n  };\n\n  const activatePiece = (position: string) => {\n    setActivePiece(position);\n  };\n\n  const deactivatePiece = (position: string) => {\n    setActivePiece(undefined);\n  };\n\n  const skip = () => {\n    // TODO: there should probably be a specific game state move for this.\n    moves.movePiece(\"\");\n  };\n\n  return (\n    <div className={`${classes.main} game-view current-player-${currentPlayer.seat}`}>\n      <div className={`${classes.board} board4`}>\n        {BoardPositions().map( pos => {\n          const piece = G.pieces.find(p => p.position === pos);\n          const highlight = activeMove?.to === pos;\n          return (\n            <div key={pos} className={`cell ${pos}`}>\n              <div className={`spot ${highlight ? \"highlight\" : \"\"}`}>\n                { piece && (\n                  <Piece\n                    G={G} ctx={ctx}\n                    player={getPlayerBySeat(G, piece.seat)}\n                    position={pos}\n                    onSelect={isActive ? selectPiece : undefined}\n                    onActivate={isActive ? activatePiece : undefined}\n                    onDeactivate={isActive ? deactivatePiece : undefined}\n                    enabled={isActive && validMoves.some(_.matches({from: pos}))}\n                  />\n                )}\n              </div>\n            </div>\n          );\n        })}\n        { G.dieRoll && (\n          <div\n            className={`dice-view dice-view-${currentPlayer.seat}`}\n            style={{transform: `rotate(${((G.dieRoll + ctx.turn) % 18) * 10}deg)`}} >\n            <DiceIcon value={G.dieRoll} />\n          </div>\n        )}\n      </div>\n\n      <Container className={classes.controls}>\n        {!!(isActive && G.dieRoll && validMoves.length === 0) && (\n          <div>\n            <Typography>No moves</Typography>\n            <div>\n              <Button variant=\"contained\" onClick={skip}>Continue</Button>\n            </div>\n          </div>\n        )}\n\n        {isActive && !G.dieRoll && (\n          <div className={classes.diceContainer}>\n            <IconButton\n              className={classes.diceRandom}\n              onClick={e => {moves.rollDie()}}>\n              <DiceIcon />\n            </IconButton>\n            <div className={classes.diceWrapper}>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(1)}}>\n                <DiceIcon value={1} />\n              </IconButton>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(2)}}>\n                <DiceIcon value={2} />\n              </IconButton>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(3)}}>\n                <DiceIcon value={3} />\n              </IconButton>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(4)}}>\n                <DiceIcon value={4} />\n              </IconButton>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(5)}}>\n                <DiceIcon value={5} />\n              </IconButton>\n              <IconButton\n                className={classes.diceButton}\n                onClick={e => {moves.rollDie(6)}}>\n                <DiceIcon value={6} />\n              </IconButton>\n            </div>\n          </div>\n        )}\n      </Container>\n    </div>\n  );\n};\n\nexport default Board;\n","import React, {\n  ChangeEvent,\n  FunctionComponent,\n  useState,\n} from 'react';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport TextField from '@material-ui/core/TextField';\n\nimport * as api from '../api';\n\ninterface IGameProps {\n  gameID: string,\n  playerID?: string,\n  credentials?: string,\n}\n\ninterface FormState {\n  name: string,\n  roomID: string,\n}\n\nexport function useForm<T>(\n  initialState: T\n): [T, (event: ChangeEvent<HTMLInputElement>) => void] {\n  const [fields, setValues] = useState<T>(initialState);\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setValues({\n      ...fields,\n      [event.currentTarget.id]: event.currentTarget.value,\n    });\n  };\n  return [ fields, handleChange ];\n}\n\nconst JoinRoomDialog: FunctionComponent<{\n  open: boolean,\n  onSubmit: (gameProps: IGameProps) => void,\n}> = ({\n  open,\n  onSubmit,\n}) => {\n  const [fields, handleChange] = useForm<FormState>({roomID: \"\", name: \"\"})\n  const [loading, setLoading] = useState<boolean>(false)\n  const [error, setError] = useState<string|undefined>()\n\n  const handleSubmit = () => {\n    (async () => {\n      setLoading(true)\n      setError(undefined)\n\n      let room;\n      try {\n        room = await api.getRoom(fields.roomID);\n      } catch (error) {\n        setLoading(false)\n        setError(\"Game not found\")\n        return\n      }\n      for (const seat of room.players) {\n        if (seat.name) {\n          continue\n        }\n        try {\n          const credentials = await api.joinRoom(fields.roomID, fields.name, seat.id);\n          onSubmit({\n            gameID: fields.roomID,\n            playerID: seat.id + '',\n            credentials,\n          })\n          setLoading(false)\n          return\n        } catch (error) {\n          continue\n        }\n      }\n      setLoading(false)\n      setError(\"No open seats\")\n    })();\n  }\n\n  return (\n    <Dialog open={open}>\n      <DialogTitle>Join an online game</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Enter your name and a Game ID to join an online game.\n        </DialogContentText>\n        <TextField\n          required={true}\n          fullWidth={true}\n          id=\"name\"\n          name=\"name\"\n          label=\"Name\"\n          autoFocus={true}\n          onChange={handleChange}\n          value={fields.name}\n          helperText=\"The name you want to use in the game\"\n          disabled={loading}\n        />\n        <TextField\n          required={true}\n          fullWidth={true}\n          id=\"roomID\"\n          name=\"roomID\"\n          label=\"Game ID\"\n          onChange={handleChange}\n          value={fields.roomID}\n          helperText={error || \"Enter the 6 digit game ID\"}\n          disabled={loading}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleSubmit} color=\"primary\">\n          Join\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n};\n\nexport default JoinRoomDialog;\n","import React, { FunctionComponent } from 'react';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  main: {},\n  loading: {\n    padding: theme.spacing(2),\n  },\n}));\n\nconst Loading: FunctionComponent = () => {\n  const classes = useStyles();\n  return (\n    <Backdrop open={true}>\n      <Paper className={classes.loading}>\n        <CircularProgress color=\"inherit\" />\n      </Paper>\n    </Backdrop>\n  )\n};\n\nexport default Loading;\n","import React, {\n  Fragment,\n  FunctionComponent,\n} from 'react';\n\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Loading from './Loading'\n\nconst useStyles = makeStyles((theme) => ({\n  main: {},\n}));\n\nconst Layout: FunctionComponent<{\n  loading?: boolean,\n}> = ({\n  loading = false,\n  children,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Fragment>\n      <CssBaseline />\n      <main className={classes.main}>\n        {loading ? (\n          <Loading />\n        ) : (\n          <Fragment>\n            {children}\n          </Fragment>\n        )}\n      </main>\n    </Fragment>\n  )\n};\n\nexport default Layout;\n","import React, {\n  FunctionComponent,\n  useEffect,\n  useState,\n} from 'react';\nimport { SocketIO } from 'boardgame.io/multiplayer';\nimport { Client } from 'boardgame.io/react';\n\nimport * as api from './api';\nimport Game from './game';\nimport Board from './components/Board';\nimport JoinRoomDialog from './components/JoinRoomDialog';\nimport Layout from './components/Layout';\nimport Loading from './components/Loading';\n\nimport './App.css';\n\ninterface IGameProps {\n  gameID: string,\n  playerID?: string,\n  credentials?: string,\n}\n\nconst useSessionState = (key: string) => {\n  const [value, setValue] = useState(() => {\n    try {\n      return JSON.parse(sessionStorage.getItem(key) || \"null\")\n    } catch (error) {\n      return\n    }\n  });\n\n  useEffect(() => {\n    if (value) {\n      sessionStorage.setItem(key, JSON.stringify(value))\n    } else {\n      sessionStorage.removeItem(key)\n    }\n  }, [key, value]);\n\n  return [value, setValue];\n};\n\nconst OnlineClient = Client({\n  game: Game,\n  board: Board,\n  multiplayer: SocketIO({ server: 'https://seis-game.herokuapp.com' }),\n  loading: Loading,\n});\n\nconst OfflineClient = Client({\n  game: Game,\n  board: Board,\n});\n\nconst App: FunctionComponent = () => {\n  const [gameProps, setGameProps] = useSessionState(\"game\")\n  const [isLoading, setLoading] = useState<boolean>(false)\n\n  const debug = window.location.hash.indexOf(\"debug\") > 0;\n\n  useEffect(() => {\n    if (debug) {\n      return;\n    }\n    setLoading(true);\n    (async () => {\n      try {\n        await api.getRoom(gameProps.gameID);\n      } catch (error) {\n        setGameProps(undefined)\n      }\n      setLoading(false);\n    })();\n  }, [debug, gameProps, setGameProps]);\n\n  return (\n    <Layout loading={isLoading}>\n      { debug ? (\n          <OfflineClient debug={false} />\n        ) : (\n          gameProps ? (\n            <OnlineClient {...gameProps} debug={false} />\n          ) : (\n            <JoinRoomDialog open={true} onSubmit={setGameProps} />\n          )\n        )\n      }\n    </Layout>\n  )\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}