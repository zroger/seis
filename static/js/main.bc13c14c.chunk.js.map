{"version":3,"sources":["Board/layout.module.css","Board/img/purty-wood.png","serviceWorker.js","api.ts","game/board.ts","Home/CreateRoom.tsx","Home/index.tsx","game/index.ts","Board/Button2.tsx","Board/DiceIcon2.tsx","Board/Dice.tsx","Board/Controls.tsx","token.ts","user.ts","Board/Header.tsx","components/ViewPortUnits.tsx","components/Board/constants.ts","components/Board/Board.tsx","components/Board/Dice.tsx","components/Board/Player.tsx","components/Board/Token.tsx","components/Board/index.tsx","Board/index.tsx","components/Loading.tsx","PlayOnline/index.tsx","pages/OfflineGame.tsx","SvgBoard.tsx","theme.ts","App.tsx","index.js","SvgBoard.module.css","Board/controls.module.css","Board/Button.module.css","Board/header.module.css"],"names":["module","exports","Boolean","window","location","hostname","match","baseUrl","createRoom","numPlayers","a","fetch","method","body","JSON","stringify","unlisted","headers","resp","ok","Error","status","json","data","gameID","getRoom","roomID","joinRoom","playerName","user","console","log","room","seats","players","filter","p","clientId","length","id","warn","leaveRoom","open","name","seat","playerID","credentials","BoardLocationType","api","CreateRoom","onSuccess","children","buttonProps","create","useAsync","deferFn","useEffect","disabled","isPending","onClick","event","preventDefault","run","useStyles","makeStyles","theme","main","display","flexFlow","alignItems","title","fontFamily","color","fontSize","padding","spacing","button","margin","minWidth","backgroundImage","colors","boxShadow","shadows","Home","classes","history","useHistory","handleRoomFound","push","Container","className","component","maxWidth","Typography","variant","align","map","i","key","encode","type","index","toString","toUpperCase","_","curry","HOME","Circuit","CIRCUIT","Start","START","calculateNextPosition","fromPos","activeSeat","position","current","parseInt","isStart","isCircuit","nextSeat","isHome","INVALID_MOVE","calculateMove","roll","pieces","nextPos","piece","find","includes","range","reduce","acc","cur","next","some","matches","isPassing","error","executeMove","updates","captured","pos","first","difference","findStartPosition","getCurrentPlayer","G","ctx","player","currentPlayer","undefined","SeisGame","setup","random","phases","turn","activePlayers","all","Stage","NULL","onMove","Number","moves","ChooseSeat","prev","ChangeName","start","endIf","play","rollDie","value","D6","dieRoll","movePiece","events","endTurn","board","has","Pass","order","playOrderPos","playOrder","sortBy","plugins","PluginPlayer","every","Button","action","props","interactive","div","clsx","whileHover","scale","DiceIcon","pip","cx","cy","r","viewBox","Dice","animate","initial","rotate","transition","ease","Controls","isActive","gameMetadata","root","info","gameover","phase","pass","dice","meta","token","base","len","Math","floor","join","token16","getUser","creds","localStorage","getItem","setItem","sha1","Header","useRouteMatch","handleQuit","params","game_id","catch","exit","handleResize","vh","innerHeight","vw","innerWidth","document","documentElement","style","setProperty","min","max","ViewPortUnits","addEventListener","removeEventListener","Geo","S00","x","y","S01","S02","S03","S10","S11","S12","S13","S20","S21","S22","S23","S30","S31","S32","S33","C00","C01","C02","C03","C04","C05","C06","C07","C08","C09","C0A","C0B","C10","C11","C12","C13","C14","C15","C16","C17","C18","C19","C1A","C1B","C20","C21","C22","C23","C24","C25","C26","C27","C28","C29","C2A","C2B","C30","C31","C32","C33","C34","C35","C36","C37","C38","C39","C3A","C3B","H00","H01","H02","H03","H10","H11","H12","H13","H20","H21","H22","H23","H30","H31","H32","H33","createUseStyles","height","width","backgroundColor","bg","backgroundSize","paint0","fill","paint","fillOpacity","paint1","paint2","paint3","renderCell","coord","SvgBoard","showGrid","useTheme","xmlns","xmlnsXlink","gradientTransform","offset","stopColor","fx","fy","stopOpacity","pointerEvents","x1","y1","x2","y2","stroke","rx","transform","keys","gradRef","useRef","uniqueId","randRef","seatTheme","svg","diceBg","diceFg","strokeWidth","Player","dominantBaseline","textAnchor","Token","prevPos","origin","trail","from","to","buildTrail","attrX","attrY","duration","tokenId","shadowId","tokenRadius","e","ry","BoardController","Board","container","loading","Loading","Backdrop","Paper","CircularProgress","OnlineClient","Client","game","Game","multiplayer","SocketIO","server","loadGame","joinGame","ErrorDialog","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","FormDialog","onClose","useState","setName","handleSubmit","spectate","TextField","autoFocus","label","fullWidth","onChange","target","OnlineGame","gameId","state","promiseFn","setSpectate","isRejected","isFulfilled","debug","_spectate","GridLines","gridMinor","gridMajor","Cell","tokenRed","tokenBlue","tokenYellow","tokenGreen","paintedRed","paintedBlue","paintedYellow","paintedGreen","cell","App","exact","path","PlayOnline","OfflineGame","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","message"],"mappings":"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","file":"static/js/main.bc13c14c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"layout_container__Ml8q0\"};","module.exports = __webpack_public_path__ + \"static/media/purty-wood.658fa9bd.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { User } from './user';\n\n// export const baseUrl = 'http://10.0.1.27:8000';\nexport const baseUrl = (\n  window.location.hostname === '10.0.1.27' ?\n  'http://10.0.1.27:8000' :\n  'https://seis-game.herokuapp.com'\n)\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport async function createRoom(numPlayers: number): Promise<string> {\n  const resp = await fetch(baseUrl + '/games/seis/create', {\n    method: 'POST',\n    body: JSON.stringify({\n      numPlayers,\n      unlisted: true,\n    }),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  if (!resp.ok) {\n    throw new Error('HTTP status ' + resp.status);\n  }\n  const data = await resp.json();\n  return data.gameID;\n}\n\nexport interface Room {\n  roomID: string,\n  players: {\n    id: string,\n    name?: string,\n    data?: {\n      clientId?: string,\n    },\n  }[],\n  setupData?: any,\n}\n\nexport async function getRoom(roomID: string): Promise<Room> {\n  const resp = await fetch(baseUrl + '/games/seis/' + roomID);\n  if (!resp.ok) {\n    throw new Error(`Room ${roomID} not found`)\n  }\n  const data = await resp.json();\n  return data;\n}\n\nexport async function joinRoom(roomID: string, playerName: string, user: User) {\n  console.log(`attempting to join room ${roomID}`)\n  let room = await getRoom(roomID);\n  const seats = room.players.filter(p => p.data?.clientId === user.clientId);\n  if (seats.length === 1) {\n    console.log(`previously joined room ${roomID} at seat ${seats[0].id}`)\n    return \"\" + seats[0].id;\n  }\n\n  // If multiple seats are taken by this user, leave the room and re-join.\n  if (seats.length > 1) {\n    console.warn(`previously joined room ${roomID} in ${seats.length} seats`)\n    await leaveRoom(roomID, user);\n  }\n\n  room = await getRoom(roomID);\n  const open = room.players.filter(p => !p.name);\n\n  console.log(`found ${open.length} open seats in room ${roomID}`)\n  for (let seat of open) {\n    console.log(`attempting to join at seat ${seat.id}`)\n    const resp = await fetch(`${baseUrl}/games/seis/${roomID}/join`, {\n      method: 'POST',\n      body: JSON.stringify({\n        playerID: seat.id,\n        playerName,\n        data: { clientId: user.clientId },\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n        'bgio-credentials': user.credentials,\n      },\n    });\n    if (resp.ok) {\n      console.log(`successfully joined at seat ${seat.id}`)\n      return \"\" + seat.id;\n    } else {\n      console.log(`unable to join at seat ${seat.id}`)\n    }\n  }\n  console.log(`unable to join any seat`)\n  throw new Error(\"Unable to join room\")\n}\n\nexport async function leaveRoom(roomID: string, user: User) {\n  const room = await getRoom(roomID);\n  const seats = room.players.filter(p => p.data?.clientId === user.clientId);\n\n  for (let seat of seats) {\n    console.log(`leaving seat ${seat.id} of room ${roomID}`)\n    await fetch(`${baseUrl}/games/seis/${roomID}/leave`, {\n      method: 'POST',\n      body: JSON.stringify({playerID: seat.id, credentials: user.credentials}),\n      headers: { 'Content-Type': 'application/json' },\n    });\n  }\n}\n","import _ from 'lodash';\nimport { INVALID_MOVE } from \"boardgame.io/core\";\n\nimport { Piece } from '../types';\n\nenum BoardLocationType {\n  CIRCUIT = \"C\",\n  HOME = \"H\",\n  START = \"S\",\n}\n\nconst NUM_SEATS = 4;\n\nfunction encode(type: BoardLocationType, seat: number, index: number): string {\n  return (type + seat.toString(16) + index.toString(16)).toUpperCase();\n}\n\nfunction decode(position: string): {type: string, seat: number, index: number} {\n  return {\n    type: position[0],\n    seat: parseInt(position[1], 16),\n    index: parseInt(position[2], 16),\n  }\n}\n\nconst Home = _.curry(encode)(BoardLocationType.HOME)\nconst Circuit = _.curry(encode)(BoardLocationType.CIRCUIT)\nconst Start = _.curry(encode)(BoardLocationType.START)\n\n\n/**\n * Calculate the next position (N+1) for a token with the given seat position.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nexport function calculateNextPosition(fromPos: string, activeSeat: number): string {\n  const current = decode(fromPos);\n\n  if (isStart(fromPos)) {\n    return Circuit(current.seat, 0);\n  }\n\n  if (isCircuit(fromPos)) {\n    if (current.index < 11) {\n      return Circuit(current.seat, current.index + 1);\n    }\n    const nextSeat = (current.seat + 1) % NUM_SEATS;\n    if (nextSeat === activeSeat) {\n      return Home(nextSeat, 0)\n    }\n    return Circuit(nextSeat, 0)\n  }\n\n  if (isHome(fromPos) && current.index < 3) {\n    return Home(current.seat, current.index + 1)\n  }\n\n  return INVALID_MOVE;\n}\n\n/**\n * Calculate the next position for a token moving `roll` positions.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nexport function calculateMove(fromPos: string, roll: number, pieces: Piece[]): string {\n  const piece = pieces.find(p => p.position === fromPos)\n  if (typeof piece === \"undefined\") throw new Error(\"No piece in that position\")\n\n  // only a 1 or a 6 can get you out of the start position.\n  if (isStart(fromPos) && ![1, 6].includes(roll)) {\n    return INVALID_MOVE;\n  }\n\n  let nextPos: string;\n  try {\n    nextPos = _.range(roll).reduce(\n      (acc: string, cur: any): string => {\n        const next = calculateNextPosition(acc, piece.seat);\n        if (next === INVALID_MOVE) throw INVALID_MOVE;\n        if (isPassing(pieces, piece.seat, next)) throw INVALID_MOVE;\n        return next;\n      }, fromPos\n    )\n    if (nextPos === fromPos) return fromPos;\n  } catch (error) {\n    return INVALID_MOVE;\n  }\n\n  if (isSafety(nextPos) && pieces.find(p => nextPos === p.position)) {\n    return INVALID_MOVE;\n  }\n  return nextPos;\n}\n\n/**\n * Perform the given move, returning an updated list of pieces.\n */\nexport function executeMove(fromPos: string, roll: number, pieces: Piece[]): Record<string, string> {\n  const nextPos = calculateMove(fromPos, roll, pieces);\n  if (nextPos === INVALID_MOVE) {\n    throw new Error(\"invalid move\")\n  }\n  const updates: Record<string, string> = {};\n  updates[fromPos] = nextPos;\n\n  const captured = pieces.find(_.matches({position: nextPos}));\n  if (captured) {\n    updates[captured.position] = findStartPosition(pieces, captured.seat);\n  }\n  return updates;\n}\n\n/**\n * Find an unoccupied START location to return the captured piece to.\n */\nfunction findStartPosition(pieces: Piece[], seat: number): string {\n  const pos = _.first(\n    _.difference(\n      _.range(4).map(i => Start(seat, i)),\n      pieces.map(p => p.position)\n    )\n  )\n  if (!pos) throw new Error(\"cannot capture\")\n  return pos;\n}\n\nfunction isSafety(position: string): boolean {\n  return position[0].toUpperCase() === \"C\" && position[2] === \"5\"\n}\n\nfunction isCircuit(position: string): boolean {\n  return position[0].toUpperCase() === \"C\"\n}\n\nfunction isHome(position: string): boolean {\n  return position[0].toUpperCase() === \"H\"\n}\n\nfunction isStart(position: string): boolean {\n  return position[0].toUpperCase() === \"S\"\n}\n\nfunction isPassing(pieces: Piece[], seat: number, nextPos: string): boolean {\n  return pieces.some(_.matches({position: nextPos, seat: seat}))\n}\n\n/**\n * Return an Array of all positions on the board.\n */\nexport function BoardPositions() {\n  return _.flatten(\n    _.range(NUM_SEATS).map(\n      seat => (\n        _.concat(\n          [],\n          _.range(4).map(i => Start(seat, i)),\n          _.range(12).map(i => Circuit(seat, i)),\n          _.range(4).map(i => Home(seat, i)),\n        )\n      )\n    )\n  );\n}\n","import React, {\n  MouseEvent,\n  FunctionComponent,\n  useEffect,\n} from 'react';\nimport {\n  DeferFn,\n  useAsync,\n} from 'react-async';\n\nimport * as api from '../api';\n\nimport Button, { ButtonProps } from '@material-ui/core/Button';\n\nconst createRoom: DeferFn<string> = async ([numPlayers]) => {\n  return await api.createRoom(numPlayers as number);\n}\n\ninterface Props extends ButtonProps {\n  numPlayers: number,\n  onSuccess?: (roomID: string) => void;\n}\n\nconst CreateRoom: FunctionComponent<Props> = ({\n  numPlayers,\n  onSuccess,\n  children,\n  ...buttonProps\n}) => {\n  const create = useAsync({deferFn: createRoom});\n\n  const handleClick = (event: MouseEvent) => {\n    event.preventDefault();\n    create.run(numPlayers);\n  };\n\n  useEffect(() => {\n    if (onSuccess && create.data) {\n      onSuccess(create.data);\n    }\n  }, [create.data, onSuccess]);\n\n  return (\n    <Button {...buttonProps} disabled={create.isPending} onClick={handleClick}>{children}</Button>\n  )\n};\n\nexport default CreateRoom;\n","import React, {\n  FunctionComponent,\n} from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport * as api from '../api';\nimport CreateRoom from './CreateRoom';\n\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport * as colors from '@material-ui/core/colors';\n\nconst useStyles = makeStyles((theme) => ({\n  main: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    alignItems: 'center',\n  },\n  title: {\n    fontFamily: '\"Rye\", cursive',\n    color: '#ffcc80',\n    fontSize: '3rem',\n    padding: theme.spacing(2, 0),\n  },\n  button: {\n    display: 'block',\n    margin: theme.spacing(2, 'auto'),\n    minWidth: '50%',\n    backgroundImage: `linear-gradient(300deg, ${colors.orange[\"100\"]} 0%, ${colors.orange[\"200\"]} 100%)`,\n    color: colors.purple[\"900\"],\n    fontFamily: '\"Rye\", cursive',\n    fontSize: '1.5rem',\n    boxShadow: theme.shadows[2],\n  },\n}));\n\n\nconst Home: FunctionComponent<{}> = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleRoomFound = (room: api.Room|string) => {\n    const roomID = (typeof room === \"string\") ? room : room.roomID;\n    history.push(`/games/${roomID}`);\n  }\n\n  return (\n    <div>\n      <Container className={classes.main} component=\"main\" maxWidth=\"xs\">\n        <Typography variant=\"h1\" className={classes.title}>\n          seis\n        </Typography>\n\n        <Typography variant=\"body2\" align=\"center\">\n          Play seis online with friends.<br />Start a game and share the link.\n        </Typography>\n        {[2, 3, 4].map(i => (\n          <CreateRoom\n            key={i}\n            className={classes.button}\n            onSuccess={handleRoomFound}\n            numPlayers={i}\n          >\n            {i} players\n          </CreateRoom>\n        ))}\n\n      </Container>\n    </div>\n  )\n};\n\nexport default Home;\n","import { INVALID_MOVE, Stage } from \"boardgame.io/core\";\nimport { Game, Ctx as BaseCtx } from \"boardgame.io\";\nimport { PluginPlayer } from 'boardgame.io/plugins';\nimport _ from 'lodash';\n\nimport { DiceValue } from \"../constants\";\nimport * as board from \"./board\";\nimport {\n  Piece,\n  Seat,\n} from '../types';\n\nexport { BoardPositions } from './board';\n\nexport interface IPlayer {\n  id: string;\n  seat: number;\n  name: string;\n  color: string;\n}\n\nexport interface IG {\n  pieces: Piece[];\n  players: IPlayer[];\n  dieRoll?: number;\n  random: number;\n}\n\nexport interface Ctx extends BaseCtx {\n  player?: any;\n}\n\n\n/**\n * Roll the die. If passed a number 1-6, use that as the value,\n * otherwise, use a random die roll.\n */\nfunction rollDie(G: IG, ctx: Ctx, value: DiceValue | undefined): IG | string {\n  const roll = value || ctx.random?.D6();\n  console.log(\"rollDie\", {\n    playerID: ctx.playerID,\n    value: roll,\n  });\n  if (typeof G.dieRoll !== \"undefined\") {\n    return INVALID_MOVE;\n  }\n  return {\n    ...G,\n    dieRoll: roll,\n  };\n}\n\n/**\n * Pass to the next player, ending the turn.\n */\nfunction Pass(G: IG, ctx: Ctx): IG {\n  console.log(\"Pass\", {\n    playerID: ctx.playerID,\n  });\n  if (!ctx.events?.endTurn) {\n    throw new Error(\"ctx.events.endTurn is undefined\");\n  }\n  ctx.events.endTurn();\n  return {\n    ...G,\n    dieRoll: undefined,\n  };\n}\n\n/**\n * Selector to get the current player instance.\n */\nexport function getCurrentPlayer(G: IG, ctx: Ctx): IPlayer|undefined {\n  const player = G.players.find((p) => p.id === ctx.currentPlayer);\n  if (player === undefined) {\n    return;\n    // throw Error(\"undefined player\");\n  }\n  return player;\n}\n\n/**\n * Selector to get the current player instance.\n */\nexport function getPlayerById(G: IG, playerId: string): IPlayer {\n  const player = G.players.find((p) => p.id === playerId);\n  if (player === undefined) {\n    throw Error(\"undefined player\");\n  }\n  return player;\n}\n\n/**\n * Selector to get a player by their seat number.\n */\nexport function getPlayerBySeat(G: IG, seat: number): IPlayer {\n  const player = G.players.find(_.matches({ seat }));\n  if (player === undefined) {\n    throw Error(\"undefined player\");\n  }\n  return player;\n}\n\nexport interface IMove {\n  from: string,\n  to: string,\n}\n\n/**\n * Get a list of valid moves from the current game state.\n */\n// export function getValidMoves(G: IG, ctx: Ctx): Piece[] {\nexport function getValidMoves(G: IG, ctx: Ctx): IMove[] {\n  if (typeof G.dieRoll === \"undefined\") return [];\n\n  const currentPlayer = getPlayerById(G, ctx.currentPlayer);\n  return G.pieces\n    .map((piece): IMove => {\n      const nextPos = (piece.seat === currentPlayer.seat) ? (\n        board.calculateMove(piece.position, G.dieRoll as number, G.pieces)\n      ) : INVALID_MOVE;\n      return { from: piece.position, to: nextPos };\n    })\n    .filter((move: IMove) => move.to !== INVALID_MOVE);\n}\n\n/**\n * Move the piece at the given position.\n */\nfunction movePiece(G: IG, ctx: Ctx, position: string): IG | string {\n  if (G.dieRoll === undefined) {\n    return INVALID_MOVE;\n  }\n\n  if (position === \"\") {\n    if (!ctx.events?.endTurn) {\n      throw new Error(\"ctx.events.endTurn is undefined\");\n    }\n    ctx.events.endTurn();\n    return {\n      ...G,\n      dieRoll: undefined,\n    };\n  }\n\n  let updates: any;\n  try {\n    updates = board.executeMove(position, G.dieRoll as number, G.pieces);\n  } catch (error) {\n    return INVALID_MOVE;\n  }\n\n  if (!ctx.events || !ctx.events.endTurn) {\n    throw new Error(\"ctx.events is undefined\");\n  }\n\n  // The turn is over unless a 6 was rolled AND a move was made.\n  if (G.dieRoll < 6) {\n    if (!ctx.events?.endTurn) {\n      throw new Error(\"ctx.events.endTurn is undefined\");\n    }\n    ctx.events.endTurn();\n  }\n\n  return {\n    ...G,\n    dieRoll: undefined,\n    pieces: G.pieces.map(\n      p => ( _.has(updates, p.position) ? {...p, position: updates[p.position]} : p)\n    ),\n  };\n}\n\n/**\n * Choose the seat for a player.\n */\nfunction ChooseSeat(G: IG, ctx: Ctx, seat: Seat, name: string): string | undefined {\n  console.log(\"ChooseSeat\", {\n    playerID: ctx.playerID,\n    seat,\n    name,\n  });\n  if (G.players.some(p => p.seat === seat)) {\n    return INVALID_MOVE;\n  }\n\n  if (typeof ctx.playerID !== \"string\") {\n    return INVALID_MOVE;\n  }\n\n  // First remove the player and pieces if they were previously placed.\n  const prev = G.players.find(p => p.id === ctx.playerID);\n  if (prev) {\n    G.players = G.players.filter(p => p.id !== prev.id);\n    G.pieces = G.pieces.filter(p => p.seat !== prev.seat);\n  }\n\n  const colors = [\"red\", \"blue\", \"yellow\", \"green\"];\n  G.players.push({\n    seat,\n    name: name,\n    id: ctx.playerID,\n    color: colors[seat],\n  })\n  G.pieces.push(...([0, 1, 2, 3].map(i => ({\n    id: seat * 4 + i,\n    seat,\n    position: `S${seat}${i}`,\n  }))))\n}\n\n/**\n * Change the name for a player.\n */\nfunction ChangeName(G: IG, ctx: Ctx, name: string): string | undefined {\n  if (typeof ctx.playerID !== \"string\") {\n    return INVALID_MOVE;\n  }\n\n  const player = G.players.find(p => p.id === ctx.playerID);\n  if (!player) {\n    return INVALID_MOVE;\n  }\n\n  player.name = name;\n}\n\nconst SeisGame: Game<IG> = {\n  name: \"seis\",\n  // setup: (): IG => INITIAL_STATE,\n  setup: () : IG => ({players: [], pieces: [], random: 0}),\n  phases: {\n    setup: {\n      turn: {\n        activePlayers: { all: Stage.NULL },\n        onMove: (G: IG, ctx: Ctx): IG => {\n          return {...G, random: ctx.random?.Number() as number}\n        },\n      },\n      moves: {ChooseSeat, ChangeName},\n      start: true,\n      endIf: (G: IG, ctx: Ctx) => (G.players.length === ctx.numPlayers),\n      next: 'play',\n    },\n    play: {\n      moves: {\n        rollDie,\n        movePiece,\n        Pass,\n      },\n      turn: {\n        order: {\n          first: (G: IG, ctx: Ctx) => 0,\n          next: (G: IG, ctx: Ctx) => (ctx.playOrderPos + 1) % ctx.numPlayers,\n          playOrder: (G: IG) => (_.sortBy(G.players, ['seat']).map(p => p.id)),\n        },\n        onMove: (G: IG, ctx: Ctx): IG => {\n          return {...G, random: ctx.random?.Number() as number}\n        },\n      },\n    },\n  },\n  plugins: [\n    PluginPlayer({setup: (playerID) => ({}), }),\n  ],\n  endIf: (G: IG, ctx: Ctx): undefined|IPlayer  => {\n    return G.players.find(player => {\n      return G.pieces.filter(\n        piece => piece.seat === player.seat\n      ).every(\n        piece => piece.position[0] === 'H'\n      )\n    });\n  },\n};\n\nexport default SeisGame;\n","import React from 'react';\nimport clsx from 'clsx';\nimport classes from './Button.module.css';\nimport { motion, HTMLMotionProps } from 'framer-motion';\n\ninterface Props extends HTMLMotionProps<\"div\"> {\n  action?: () => void,\n  color?: string,\n  disabled?: boolean,\n}\n\nconst Button: React.FC<Props> = ({\n  action,\n  color='default',\n  disabled=false,\n  className,\n  children,\n  ...props\n}) => {\n\n  const handleClick = () => {\n    if (action && !disabled) {\n      action();\n    }\n  };\n  const interactive = !!action && !disabled;\n  return (\n    <motion.div\n      className={clsx(\n        classes[color],\n        className,\n        {[classes.disabled]: disabled},\n      )}\n      onClick={handleClick}\n      whileHover={interactive ? { scale: 1.5 } : {}}\n      {...props}\n    >\n      { children }\n    </motion.div>\n  )\n};\n\nexport default Button;\n","import React, {FunctionComponent} from 'react';\nimport { DiceValue } from \"../constants\";\n\ninterface Props extends React.SVGAttributes<SVGElement> {\n  value: DiceValue,\n}\n\nconst DiceIcon: FunctionComponent<Props> = ({\n  value,\n  ...props\n}) => {\n  const pip = (cx: number, cy: number) => {\n    return <circle cx={cx} cy={cy} r=\"2\" />\n  }\n\n  return (\n    <svg viewBox=\"-10 -10 20 20\" {...props}>\n      { [1, 3, 5].includes(value as number) && pip(0, 0) }\n      { [2, 3, 4, 5, 6].includes(value as number) && pip(-6, -6) }\n      { [4, 5, 6].includes(value as number) && pip(6, -6) }\n      { [4, 5, 6].includes(value as number) && pip(-6, 6) }\n      { [2, 3, 4, 5, 6].includes(value as number) && pip(6, 6) }\n      { [6].includes(value as number) && pip(0, -6) }\n      { [6].includes(value as number) && pip(0, 6) }\n    </svg>\n  )\n};\n\nexport default DiceIcon;\n","import React from 'react';\nimport clsx from 'clsx';\nimport classes from './Button.module.css';\nimport { motion } from 'framer-motion';\n\nimport { DiceValue } from \"../constants\";\nimport Button from './Button2';\nimport DiceIcon from './DiceIcon2';\n\ninterface Props extends React.HTMLAttributes<HTMLElement> {\n  action?: (value: DiceValue) => void,\n  value: DiceValue,\n  color?: string,\n  disabled?: boolean,\n  animate?: boolean,\n  random?: number,\n}\n\nconst Dice: React.FC<Props> = ({\n  action,\n  value,\n  color='default',\n  disabled=false,\n  animate=false,\n  className,\n  random=0,\n  ...props\n}) => {\n\n  const handleClick = () => {\n    if (action && !disabled) {\n      action(value);\n    }\n  };\n  return (\n    <Button\n      className={className}\n      action={action ? handleClick : undefined}\n      disabled={disabled}\n      color={color}\n      initial={ animate ? {\n        scale: 0,\n      } : false }\n      animate={ animate ? {\n        scale: [null, 1.5, 1],\n        rotate: [null, 360 * (1 + random) / 2, 360 * (1 + random)],\n        transition: {\n          ease: [\"easeIn\", \"linear\", \"easeOut\"],\n        },\n      } : undefined}\n    >\n      <DiceIcon value={value} />\n    </Button>\n  )\n};\n\nexport default Dice;\n","import React from 'react';\nimport { Ctx } from 'boardgame.io';\n\nimport {\n  IG,\n  getCurrentPlayer,\n} from '../game';\n\nimport Button from './Button2';\nimport Dice from './Dice';\n\nimport classes from './controls.module.css';\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  moves: any,\n  playerID?: string,\n  isActive: boolean,\n  gameMetadata: {id: number, name?: string}[]\n}\n\nconst colors = [\n  'red',\n  'blue',\n  'yellow',\n  'green',\n]\n\nconst Controls: React.FC<Props> = ({\n  G,\n  ctx,\n  moves,\n  playerID,\n  isActive,\n  gameMetadata\n}) => {\n  const currentPlayer = getCurrentPlayer(G, ctx);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.info}>\n        { ctx.gameover && 'Game Over' }\n        { ctx.phase === \"play\" && isActive && 'Your turn' }\n        { ctx.phase === \"play\" && !isActive && `${currentPlayer?.name}'s turn` }\n        { ctx.phase === \"setup\" && isActive && 'Choose your color' }\n        { ctx.phase === \"setup\" && !isActive && 'Waiting for other players' }\n      </div>\n\n      <div className={classes.main}>\n        { ctx.gameover && (\n          <div className={classes.gameover}>\n            {ctx.gameover.name} wins!\n          </div>\n        )}\n        { ctx.phase === \"play\" && (\n          <>\n            <Button\n              className={classes.roll}\n              action={moves.rollDie}\n              disabled={!isActive || !!G.dieRoll}\n            >\n              ROLL\n            </Button>\n            {[1, 2, 3, 4, 5, 6].map(i => (\n              <Dice key={i}\n                className={classes['dice' + i]}\n                action={moves.rollDie}\n                value={i}\n                disabled={!isActive || !!G.dieRoll}\n              />\n            ))}\n            <Button\n              className={classes.pass}\n              action={moves.Pass}\n              disabled={!isActive}\n            >\n              PASS\n            </Button>\n          </>\n        )}\n        { ctx.phase === \"setup\" && isActive && (\n          colors.map((color, seat) => (\n            <Dice\n              className={classes.dice}\n              action={() => {\n                const meta = gameMetadata.find(p => \"\" + p.id === playerID);\n                moves.ChooseSeat(seat, meta?.name || `Player  ${seat + 1}`);\n              }}\n              value={seat + 1}\n              color={color}\n              disabled={!!G.players.find(p => p.seat === seat)}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Controls;\n","import _ from 'lodash';\n\nexport function token(base: number, len: number): string {\n  return _.range(len).map(() => Math.floor(Math.random() * base).toString(base)).join(\"\")\n}\n\nexport const token10 = _.curry(token)(10);\nexport const token16 = _.curry(token)(16);\n","import sha1 from 'sha1';\nimport { token16 } from './token';\n\n\nexport interface User {\n  credentials: string,\n  clientId: string,\n}\n\nexport function getUser() {\n  let creds = localStorage.getItem(\"creds\")\n  if (!creds) {\n    creds = token16(16);\n    localStorage.setItem(\"creds\", creds)\n  }\n\n  return {\n    credentials: creds,\n    clientId: sha1(creds),\n  }\n}\n","import React, { MouseEvent } from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { IoIosExit } from 'react-icons/io';\n\nimport * as api from '../api';\nimport { getUser } from '../user';\nimport classes from './header.module.css';\n\n\nconst Header = (props: any) => {\n  const match = useRouteMatch<{game_id: string}>(\"/games/:game_id\");\n  const history = useHistory();\n  const handleQuit= async (event: MouseEvent) => {\n    event.preventDefault();\n    const user = getUser();\n    const gameId =match?.params?.game_id as string;\n    // Don't wait for this to finish.\n    api.leaveRoom(gameId, user).catch(error => console.error(error));\n    history.push('/')\n  }\n\n  return (\n    <>\n      <h1 className={classes.title}>seis</h1>\n      <button className={classes.exit} onClick={handleQuit}>\n        <IoIosExit />\n      </button>\n    </>\n  );\n};\n\nexport default Header;\n","/**\n * Custom viewport unit support.\n * Adds custom properties to the root element in response to window resize.\n *\n * --vh = 1% of Viewport height (window.innerHeight)\n * --vw = 1% of Viewport width (window.innerWidth)\n * --vmin = Smaller of --vh or --vw\n * --vmax = Larger of --vh or --vw\n */\nimport React, {\n  FunctionComponent,\n  useEffect,\n} from 'react';\n\nconst handleResize = () => {\n  const vh = window.innerHeight / 100;\n  const vw = window.innerWidth / 100;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n  document.documentElement.style.setProperty('--vw', `${vw}px`);\n  document.documentElement.style.setProperty('--vmin', `${Math.min(vh, vw)}px`);\n  document.documentElement.style.setProperty('--vmax', `${Math.max(vh, vw)}px`);\n}\n\nconst ViewPortUnits: FunctionComponent<{}> = ({ children }) => {\n  useEffect(() => {\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return <>{ children }</>\n};\n\nexport default ViewPortUnits;\n","export interface Coord {\n  x: number,\n  y: number,\n}\n\nexport const Geo: Record<string, Coord> = {\n  S00: {x: 180, y: -120},\n  S01: {x: 160, y: -140},\n  S02: {x: 140, y: -160},\n  S03: {x: 120, y: -180},\n\n  S10: {x: 120, y: 180},\n  S11: {x: 140, y: 160},\n  S12: {x: 160, y: 140},\n  S13: {x: 180, y: 120},\n\n  S20: {x: -180, y: 120},\n  S21: {x: -160, y: 140},\n  S22: {x: -140, y: 160},\n  S23: {x: -120, y: 180},\n\n  S30: {x: -120, y: -180},\n  S31: {x: -140, y: -160},\n  S32: {x: -160, y: -140},\n  S33: {x: -180, y: -120},\n\n  C00: {x: 30,  y: -180},\n  C01: {x: 30,  y: -150},\n  C02: {x: 30,  y: -120},\n  C03: {x: 30,  y: -90 },\n  C04: {x: 30,  y: -60 },\n  C05: {x: 30,  y: -30 },\n  C06: {x: 60,  y: -30 },\n  C07: {x: 90,  y: -30 },\n  C08: {x: 120, y: -30 },\n  C09: {x: 150, y: -30 },\n  C0A: {x: 180, y: -30 },\n  C0B: {x: 180, y: 0   },\n\n  C10: {x: 180, y: 30 },\n  C11: {x: 150, y: 30 },\n  C12: {x: 120, y: 30 },\n  C13: {x: 90,  y: 30 },\n  C14: {x: 60,  y: 30 },\n  C15: {x: 30,  y: 30 },\n  C16: {x: 30,  y: 60 },\n  C17: {x: 30,  y: 90 },\n  C18: {x: 30,  y: 120},\n  C19: {x: 30,  y: 150},\n  C1A: {x: 30,  y: 180},\n  C1B: {x: 0,   y: 180},\n\n  C20: {x: -30,  y: 180},\n  C21: {x: -30,  y: 150},\n  C22: {x: -30,  y: 120},\n  C23: {x: -30,  y: 90 },\n  C24: {x: -30,  y: 60 },\n  C25: {x: -30,  y: 30 },\n  C26: {x: -60,  y: 30 },\n  C27: {x: -90,  y: 30 },\n  C28: {x: -120, y: 30 },\n  C29: {x: -150, y: 30 },\n  C2A: {x: -180, y: 30 },\n  C2B: {x: -180, y: 0  },\n\n  C30: {x: -180, y: -30},\n  C31: {x: -150, y: -30},\n  C32: {x: -120, y: -30},\n  C33: {x: -90,  y: -30},\n  C34: {x: -60,  y: -30},\n  C35: {x: -30,  y: -30},\n  C36: {x: -30,  y: -60},\n  C37: {x: -30,  y: -90},\n  C38: {x: -30,  y: -120},\n  C39: {x: -30,  y: -150},\n  C3A: {x: -30,  y: -180},\n  C3B: {x: 0,    y: -180},\n\n  H00: {x: 0, y: -150},\n  H01: {x: 0, y: -120},\n  H02: {x: 0, y: -90},\n  H03: {x: 0, y: -60},\n\n  H10: {x: 150, y: 0},\n  H11: {x: 120, y: 0},\n  H12: {x: 90,  y: 0},\n  H13: {x: 60,  y: 0},\n\n  H20: {x: 0, y: 150},\n  H21: {x: 0, y: 120},\n  H22: {x: 0, y: 90 },\n  H23: {x: 0, y: 60 },\n\n  H30: {x: -150, y: 0},\n  H31: {x: -120, y: 0},\n  H32: {x: -90,  y: 0},\n  H33: {x: -60,  y: 0},\n};\n\nexport type GeoPosition = keyof typeof Geo;\n","import _ from 'lodash';\nimport React from 'react';\nimport { createUseStyles, useTheme } from 'react-jss'\n\nimport { Theme } from '../../theme.js';\nimport { Geo, GeoPosition } from './constants';\nimport Dice from './Dice';\nimport Player from './Player';\nimport Token from './Token';\n\nimport bg from '../../Board/img/purty-wood.png';\n\nconst useStyles = createUseStyles((theme: Theme) => ({\n  root: {\n    display: \"block\",\n    height: \"calc(var(--board-unit, 0.9vmin) * 100)\",\n    width: \"calc(var(--board-unit, 0.9vmin) * 100)\",\n    backgroundColor: \"#f0c7af\",\n    backgroundImage: `radial-gradient(circle farthest-corner at center, transparent 50%, rgba(0,0,0,0.25)), url(${bg})`,\n    backgroundSize: \"contain\",\n    boxShadow: \"0 5px 5px black\",\n  },\n\n  paint0: {\n    fill: theme.seats[0].paint,\n    fillOpacity: 0.4,\n  },\n  paint1: {\n    fill: theme.seats[1].paint,\n    fillOpacity: 0.4,\n  },\n  paint2: {\n    fill: theme.seats[2].paint,\n    fillOpacity: 0.4,\n  },\n  paint3: {\n    fill: theme.seats[3].paint,\n    fillOpacity: 0.4,\n  },\n}));\n\nconst renderGrid = () => {\n  const minor = \"#bdbdbd\";\n  const major = \"#9e9e9e\";\n  return (\n    <g pointerEvents=\"none\">\n      {_.range(-210, 210, 6).map(y => (\n        <line key={y} x1=\"-200\" y1={y} x2=\"200\" y2={y} stroke={y % 30 === 0 ? major : minor} />\n      ))}\n      {_.range(-210, 210, 6).map(x => (\n        <line key={x} x1={x} y1=\"-200\" x2={x} y2=\"200\" stroke={x % 30 === 0 ? major : minor} />\n      ))}\n    </g>\n  )\n}\n\nconst renderCell = (position: GeoPosition) => {\n  const coord = Geo[position];\n  return (\n    <circle cx={coord.x} cy={coord.y} r={10} fill=\"url('#cellGradient')\" />\n  )\n}\n\ninterface Props {\n  showGrid?: boolean;\n}\n\nconst SvgBoard: React.FC<Props> = ({ showGrid=false, children }) => {\n  const theme = useTheme() as Theme;\n  const classes = useStyles(theme);\n  return (\n    <svg\n      viewBox=\"-200 -200 400 400\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      className={classes.root}\n    >\n      <defs>\n        <linearGradient id=\"buttonGradient\" gradientTransform=\"rotate(70)\">\n          <stop offset=\"0%\" stopColor=\"#ffcdd2\" />\n          <stop offset=\"100%\" stopColor=\"#d32f2f\" />\n        </linearGradient>\n\n        <radialGradient id=\"cellGradient\" fx=\"30%\" fy=\"70%\">\n          <stop offset=\"0%\" stopColor=\"black\" stopOpacity=\"0.25\" />\n          <stop offset=\"80%\" stopColor=\"black\" stopOpacity=\"0.4\" />\n        </radialGradient>\n\n        <radialGradient id=\"boardGradient\">\n          <stop offset=\"50%\" stopColor=\"transparent\" />\n          <stop offset=\"100%\" stopColor=\"black\" stopOpacity=\"0.25\" />\n        </radialGradient>\n\n        <radialGradient id=\"tokenGradient1\" fx=\"70%\" fy=\"25%\">\n          <stop offset=\"15%\" stopColor=\"#ffffff\" stopOpacity=\"0.25\" />\n          <stop offset=\"20%\" stopColor=\"transparent\" stopOpacity=\"0.0\" />\n          <stop offset=\"80%\" stopColor=\"#000000\" stopOpacity=\"0.25\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0.5\" />\n        </radialGradient>\n\n        <radialGradient id=\"shadowGradient1\">\n          <stop offset=\"50%\" stopColor=\"#000000\" stopOpacity=\"1\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0\" />\n        </radialGradient>\n      </defs>\n\n      { showGrid && renderGrid() }\n\n      <g pointerEvents=\"none\" className={classes.paint0}>\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(0) translate(0 -105)\" />\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(45) translate(0 -211)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paint1}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(135) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(90) translate(0 -105)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paint2}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(225) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(180) translate(0 -105)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paint3}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(315) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(270) translate(0 -105)\" />\n      </g>\n\n      <g>\n        { _.keys(Geo).map(renderCell) }\n      </g>\n\n      {children}\n    </svg>\n  )\n};\n\nexport default SvgBoard;\n","import _ from 'lodash';\nimport React, { useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport { useTheme } from 'react-jss'\n\nimport { Theme } from '../../theme.js';\nimport { DiceValue } from \"../../constants\";\nimport DiceIcon from '../../Board/DiceIcon2';\n\ninterface Props extends React.HTMLAttributes<HTMLElement> {\n  value: DiceValue,\n  seat: number,\n  random?: number,\n}\n\nconst Dice: React.FC<Props> = ({\n  value,\n  seat,\n  random,\n}) => {\n  const theme = useTheme() as Theme;\n  const gradRef = useRef(_.uniqueId('DiceGradient'))\n  const randRef = useRef(Math.random());\n  random = random || randRef.current;\n  const seatTheme = theme.seats[seat];\n  const x = [70, 70, -100, -100][seat];\n  const y = [-100, 70, 70, -100][seat];\n  return (\n    <motion.svg\n      initial={{\n        scale: 0,\n      }}\n      style={{ x: x, y: y }}\n      animate={{\n        scale: [null, 1.5, 1],\n        rotate: [\n          null,\n          360,\n          360 * (2 + Math.random()),\n        ],\n        transition: {\n          ease: [\"easeIn\", \"linear\", \"easeOut\"],\n        },\n      }}\n    >\n      <defs>\n        <radialGradient id={gradRef.current}>\n          <stop offset=\"25%\" stopColor=\"transparent\" />\n          <stop offset=\"100%\" stopColor=\"black\" stopOpacity=\"0.25\" />\n        </radialGradient>\n      </defs>\n      <rect\n        fill={seatTheme.diceBg}\n        height={30}\n        width={30}\n        rx={5}\n      />\n      <rect\n        fill={`url(\"#${gradRef.current}\")`}\n        height={30}\n        width={30}\n        rx={5}\n      />\n      <DiceIcon\n        value={value}\n        height={30}\n        width={30}\n        fill={seatTheme.diceFg}\n      />\n      <rect\n        height={30}\n        width={30}\n        rx={5}\n        stroke={seatTheme.diceBg}\n        strokeWidth={1}\n        fill=\"transparent\"\n      />\n    </motion.svg>\n  )\n};\n\nexport default Dice;\n","import React from 'react';\n\ninterface Props {\n  seat: number,\n  name: string,\n}\n\nconst Player: React.FC<Props> = ({seat, name}) => {\n  const transform = [\n    \"rotate(45) translate(0 -195)\",\n    \"rotate(-45) translate(0 170)\",\n    \"rotate(45) translate(0 170)\",\n    \"rotate(-45) translate(0 -195)\",\n  ][seat];\n\n  return (\n    <text x={0} y={15}\n      pointerEvents=\"none\"\n      dominantBaseline=\"middle\"\n      textAnchor=\"middle\"\n      fontFamily=\"Rye\"\n      fill=\"black\"\n      fillOpacity=\"0.8\"\n      transform={transform}\n    >\n      {name}\n    </text>\n  )\n}\n\nexport default Player;\n","import _ from 'lodash';\nimport React, {useRef, useEffect} from 'react';\nimport { motion, MotionStyle } from 'framer-motion';\nimport { useTheme } from 'react-jss'\n\nimport { Theme } from '../../theme.js';\nimport { Geo, GeoPosition } from './constants';\nimport { calculateNextPosition } from '../../game/board';\n\n\nconst buildTrail = (from: GeoPosition, to: GeoPosition, seat: number, max: number = 80): GeoPosition[] => {\n  let i = 0;\n  const trail = [from];\n  while (trail[trail.length - 1] !== to && i++ < max) {\n    const next = calculateNextPosition(trail[trail.length - 1], seat);\n    if (next === \"INVALID_MOVE\") {\n      break;\n    }\n    trail.push(next);\n  }\n  if (trail[trail.length - 1] !== to) {\n    return [from, to]\n  }\n  return trail;\n}\n\ninterface Props {\n  pos: GeoPosition,\n  seat: number,\n  action?: (pos: string) => void,\n}\n\nconst Token: React.FC<Props> = ({pos, seat, action}) => {\n\n  // Use the previous value of the pos prop for animation.\n  const prevPos = useRef<string|undefined>();\n  useEffect(() => {\n    prevPos.current = pos;\n  }, [prevPos, pos]);\n\n  const origin = prevPos.current;\n  const trail = (origin && origin !== pos) ? buildTrail(origin, pos, seat) : [pos] ;\n\n  const cellRadius = 10;\n  const tokenRadius = 12;\n  const animate = trail.length > 1 ? {\n    attrX: trail.map(p => Geo[p].x - tokenRadius),\n    attrY: trail.map(p => Geo[p].y - (tokenRadius * 2 - cellRadius)),\n    transition: { duration: Math.max(1, trail.length / 2), ease: \"easeOut\" },\n  } : {\n    attrX: Geo[pos].x - tokenRadius,\n    attrY: Geo[pos].y - (tokenRadius * 2 - cellRadius)\n  };\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    if (action) {\n      action(pos);\n    }\n  }\n\n  const tokenId = _.uniqueId('TokenGradient')\n  const shadowId = _.uniqueId('ShadowGradient')\n\n  const theme = useTheme() as Theme;\n\n  return (\n    <motion.svg\n      viewBox=\"-10 -10 20 20\" x=\"0\" y=\"0\"\n      height={tokenRadius * 2}\n      width={tokenRadius * 2}\n      animate={animate}\n      initial={{\n        attrX: Geo[pos].x - tokenRadius,\n        attrY: Geo[pos].y - (tokenRadius * 2 - cellRadius),\n      } as MotionStyle}\n      fill={theme.seats[seat].diceBg}\n      onClick={handleClick}\n    >\n      <defs>\n        <radialGradient id={tokenId} fx=\"70%\" fy=\"25%\">\n          <stop offset=\"15%\" stopColor=\"#ffffff\" stopOpacity=\"0.25\" />\n          <stop offset=\"20%\" stopColor=\"transparent\" stopOpacity=\"0.0\" />\n          <stop offset=\"80%\" stopColor=\"#000000\" stopOpacity=\"0.25\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0.5\" />\n        </radialGradient>\n\n        <radialGradient id={shadowId}>\n          <stop offset=\"50%\" stopColor=\"#000000\" stopOpacity=\"1\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0\" />\n        </radialGradient>\n      </defs>\n      <ellipse\n        fill={`url(\"#${shadowId}\")`}\n        cx=\"0\"\n        cy=\"8\"\n        rx=\"10\"\n        ry=\"2\"\n      />\n      <circle cx=\"0\" cy=\"0\" r=\"10\" />\n      <circle\n        fill={`url(\"#${tokenId}\")`}\n        cx=\"0\"\n        cy=\"0\"\n        r=\"10\"\n      />\n    </motion.svg>\n  )\n}\n\nexport default Token;\n","import React from 'react';\n\nimport Board from './Board';\nimport Dice from './Dice';\nimport Player from './Player';\nimport Token from './Token';\n\nimport {\n  Ctx,\n  IG,\n  getCurrentPlayer,\n  getValidMoves,\n  BoardPositions,\n} from '../../game';\n\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  moves: any,\n  playerID?: string,\n  isActive: boolean,\n  gameMetadata: {id: number, name?: string}[]\n}\n\n\nconst BoardController: React.FC<Props> = ({\n  G,\n  ctx,\n  moves,\n  playerID,\n  isActive,\n  gameMetadata,\n}) => {\n  const currentPlayer = getCurrentPlayer(G, ctx);\n  return (\n    <Board>\n      { G.players.map(p => (\n        <Player key={p.seat} seat={p.seat} name={p.name} />\n      ))}\n\n      { G.pieces.map(p => (\n        <Token\n          key={p.id}\n          seat={p.seat}\n          pos={p.position}\n          action={isActive && G.dieRoll ? moves.movePiece : console.log}\n        />\n      ))}\n\n      { G.dieRoll && (\n        <Dice seat={currentPlayer?.seat as number} value={G.dieRoll} />\n      )}\n    </Board>\n  )\n}\n\nexport default BoardController;\n","import React from 'react';\n\nimport classes from './layout.module.css';\nimport Controls from './Controls';\nimport GameBoard from './GameBoard';\nimport Header from './Header';\nimport ViewPortUnits from '../components/ViewPortUnits';\nimport NewBoard from '../components/Board';\n\nconst Board = (props: any) => {\n  return (\n    <ViewPortUnits>\n      <div className={classes.container}>\n        <header>\n          <Header />\n        </header>\n\n        <main>\n          { //<GameBoard {...props} />\n          }\n          <NewBoard {...props} />\n        </main>\n\n        <footer>\n          <Controls {...props} />\n        </footer>\n      </div>\n    </ViewPortUnits>\n  );\n};\n\nexport default Board;\n","import React, { FunctionComponent } from 'react';\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  main: {},\n  loading: {\n    padding: theme.spacing(2),\n  },\n}));\n\nconst Loading: FunctionComponent = () => {\n  const classes = useStyles();\n  return (\n    <Backdrop open={true}>\n      <Paper className={classes.loading}>\n        <CircularProgress color=\"inherit\" />\n      </Paper>\n    </Backdrop>\n  )\n};\n\nexport default Loading;\n","import React, { useState } from 'react';\nimport {\n  DeferFn,\n  PromiseFn,\n  useAsync,\n} from 'react-async';\nimport { Client } from 'boardgame.io/react';\nimport { SocketIO } from 'boardgame.io/multiplayer';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport * as api from '../api';\nimport Game from '../game';\nimport Board from '../Board';\nimport Loading from '../components/Loading';\nimport { getUser } from '../user';\n\nconst OnlineClient = Client({\n  game: Game,\n  board: Board,\n  multiplayer: SocketIO({ server: api.baseUrl }),\n  loading: Loading,\n});\n\ninterface GameProps {\n  gameID: string;\n  playerID?: string;\n  credentials?: string;\n}\n\ninterface RoomState {\n  room: api.Room;\n  playerID?: string;\n  credentials?: string;\n}\n\nconst loadGame: PromiseFn<RoomState> = async ({gameID, user}) => {\n  const room = await api.getRoom(gameID);\n  const seats = room.players.filter(p => p.data?.clientId === user.clientId);\n  if (seats.length === 1) {\n    console.log(`previously joined room ${gameID} at seat ${seats[0].id}`)\n    return {room, playerID: \"\" + seats[0].id, credentials: user.credentials};\n  }\n\n  if (seats.length > 1) {\n    console.warn(`previously joined room ${gameID} in ${seats.length} seats`)\n    await api.leaveRoom(gameID, user);\n  }\n\n  return {room};\n}\n\nconst joinGame: DeferFn<RoomState> = async ([name], {gameID, user}) => {\n  const room = await api.getRoom(gameID);\n  const playerID = await api.joinRoom(gameID, name, user);\n  if (playerID) {\n    return {room, playerID, credentials: user.credentials}\n  }\n  return {room}\n}\n\nconst ErrorDialog = () => {\n  const history = useHistory();\n\n  return (\n    <Dialog open={true}>\n      <DialogTitle>Game not found</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          The game you're trying to access wasn't found.\n          This probably means the game finished, or all players left.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => {history.push(\"/\")}} color=\"primary\">\n          Back\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n};\n\nconst FormDialog = ({\n  open,\n  onClose,\n}: {\n  open: boolean,\n  onClose: (name: string, spectate: boolean) => void,\n}) => {\n  const [name, setName] = useState<string>(\n    window.localStorage.getItem(\"playerName\") || \"\"\n  );\n\n  const handleSubmit = (spectate: boolean) => {\n    window.localStorage.setItem(\"playerName\", name);\n    onClose(name, spectate);\n  };\n\n  return (\n    <Dialog open={open}>\n      <DialogTitle>Join the game</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Enter the name you want to use in the game, then click play.\n          You can also choose to Just Watch if you don't want to play.\n        </DialogContentText>\n        <TextField\n          autoFocus={true}\n          margin=\"dense\"\n          label=\"Your name\"\n          fullWidth={true}\n          value={name}\n          onChange={(e) => {setName(e.target.value)}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => {handleSubmit(true)}} color=\"secondary\">\n          Just watch\n        </Button>\n        <Button onClick={() => {handleSubmit(false)}} color=\"primary\">\n          Play\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst OnlineGame = () => {\n  const match = useRouteMatch<{game_id: string}>(\"/games/:game_id\");\n  const gameId = match?.params?.game_id as string;\n  const user = getUser();\n  const state = useAsync({\n    promiseFn: loadGame,\n    deferFn: joinGame,\n    gameID: gameId,\n    user: user,\n  });\n  const [spectate, setSpectate] = useState<boolean>(false);\n\n  const handleSubmit = (name: string, _spectate: boolean) => {\n    setSpectate(_spectate);\n    if (!_spectate) {\n      state.run(name);\n    }\n  };\n\n  return (\n    <>\n      {state.isPending && <Loading />}\n      {state.isRejected && (\n        <ErrorDialog />\n      )}\n      {state.isFulfilled && spectate && (\n        <OnlineClient debug={false} {...state.data} />\n      )}\n      {state.isFulfilled && state.data.playerID && (\n        <OnlineClient\n          debug={false}\n          gameID={state.data.room.roomID}\n          playerID={state.data.playerID}\n          credentials={state.data.credentials}\n        />\n      )}\n      {state.isFulfilled && !spectate && !state.data.playerID && (\n        <FormDialog open={true} onClose={handleSubmit} />\n      )}\n    </>\n  )\n}\n\nexport default OnlineGame;\n","import { Client } from 'boardgame.io/react';\nimport Game from '../game';\nimport Board from '../Board';\n\nexport default Client({\n  game: Game,\n  board: Board,\n});\n","import _ from 'lodash';\nimport React, {useRef, useEffect} from 'react';\nimport { motion, MotionStyle, SVGMotionProps } from 'framer-motion';\nimport classes from './SvgBoard.module.css';\n\nimport { calculateNextPosition } from './game/board';\n\n\ninterface Coord {\n  x: number,\n  y: number,\n}\n\nconst Geo: Record<string, Coord> = {\n  S00: {x: 180, y: -120},\n  S01: {x: 160, y: -140},\n  S02: {x: 140, y: -160},\n  S03: {x: 120, y: -180},\n\n  S10: {x: 120, y: 180},\n  S11: {x: 140, y: 160},\n  S12: {x: 160, y: 140},\n  S13: {x: 180, y: 120},\n\n  S20: {x: -180, y: 120},\n  S21: {x: -160, y: 140},\n  S22: {x: -140, y: 160},\n  S23: {x: -120, y: 180},\n\n  S30: {x: -120, y: -180},\n  S31: {x: -140, y: -160},\n  S32: {x: -160, y: -140},\n  S33: {x: -180, y: -120},\n\n  C00: {x: 30,  y: -180},\n  C01: {x: 30,  y: -150},\n  C02: {x: 30,  y: -120},\n  C03: {x: 30,  y: -90 },\n  C04: {x: 30,  y: -60 },\n  C05: {x: 30,  y: -30 },\n  C06: {x: 60,  y: -30 },\n  C07: {x: 90,  y: -30 },\n  C08: {x: 120, y: -30 },\n  C09: {x: 150, y: -30 },\n  C0A: {x: 180, y: -30 },\n  C0B: {x: 180, y: 0   },\n\n  C10: {x: 180, y: 30 },\n  C11: {x: 150, y: 30 },\n  C12: {x: 120, y: 30 },\n  C13: {x: 90,  y: 30 },\n  C14: {x: 60,  y: 30 },\n  C15: {x: 30,  y: 30 },\n  C16: {x: 30,  y: 60 },\n  C17: {x: 30,  y: 90 },\n  C18: {x: 30,  y: 120},\n  C19: {x: 30,  y: 150},\n  C1A: {x: 30,  y: 180},\n  C1B: {x: 0,   y: 180},\n\n  C20: {x: -30,  y: 180},\n  C21: {x: -30,  y: 150},\n  C22: {x: -30,  y: 120},\n  C23: {x: -30,  y: 90 },\n  C24: {x: -30,  y: 60 },\n  C25: {x: -30,  y: 30 },\n  C26: {x: -60,  y: 30 },\n  C27: {x: -90,  y: 30 },\n  C28: {x: -120, y: 30 },\n  C29: {x: -150, y: 30 },\n  C2A: {x: -180, y: 30 },\n  C2B: {x: -180, y: 0  },\n\n  C30: {x: -180, y: -30},\n  C31: {x: -150, y: -30},\n  C32: {x: -120, y: -30},\n  C33: {x: -90,  y: -30},\n  C34: {x: -60,  y: -30},\n  C35: {x: -30,  y: -30},\n  C36: {x: -30,  y: -60},\n  C37: {x: -30,  y: -90},\n  C38: {x: -30,  y: -120},\n  C39: {x: -30,  y: -150},\n  C3A: {x: -30,  y: -180},\n  C3B: {x: 0,    y: -180},\n\n  H00: {x: 0, y: -150},\n  H01: {x: 0, y: -120},\n  H02: {x: 0, y: -90},\n  H03: {x: 0, y: -60},\n\n  H10: {x: 150, y: 0},\n  H11: {x: 120, y: 0},\n  H12: {x: 90,  y: 0},\n  H13: {x: 60,  y: 0},\n\n  H20: {x: 0, y: 150},\n  H21: {x: 0, y: 120},\n  H22: {x: 0, y: 90 },\n  H23: {x: 0, y: 60 },\n\n  H30: {x: -150, y: 0},\n  H31: {x: -120, y: 0},\n  H32: {x: -90,  y: 0},\n  H33: {x: -60,  y: 0},\n};\n\ntype GeoPosition = keyof typeof Geo;\n\ninterface RoundedRectProps extends React.SVGAttributes<SVGElement> {\n  a: GeoPosition,\n  b: GeoPosition,\n  radius?: number,\n}\n\nconst RoundedRect = ({a, b, radius=15, ...props}: RoundedRectProps) => {\n  const r1 = Geo[a];\n  const r2 = Geo[b];\n  const center = {x: (r1.x + r2.x) / 2, y: (r1.y + r2.y) / 2};\n  const slope = (r2.x - r1.x) / (r2.y - r1.y);\n  const distance = Math.sqrt((r2.x - r1.x)**2 + (r2.y - r1.y)**2) + radius * 2\n  console.log(slope, distance)\n  const rotation = (slope === Infinity ? 90 : (slope === -Infinity ? -90 : slope * -45))\n  return (\n    <rect\n      x={center.x - radius}\n      y={center.y - (distance / 2)}\n      width={radius * 2}\n      height={distance}\n      rx={radius}\n      transform={`rotate(${rotation} ${center.x} ${center.y})`}\n      {...props}\n    />)\n}\n\n\nconst GridLines = () => {\n  return (\n    <g pointerEvents=\"none\">\n      {_.range(-201, 200, 6).map(y => (\n          <line key={y} x1=\"-200\" y1={y} x2=\"200\" y2={y} className={classes.gridMinor} />\n      ))}\n      {_.range(-201, 200, 6).map(x => (\n          <line key={x} x1={x} y1=\"-200\" x2={x} y2=\"200\" className={classes.gridMinor} />\n      ))}\n      {_.range(-180, 200, 30).map(y => (\n          <line key={y} x1=\"-200\" y1={y} x2=\"200\" y2={y} className={classes.gridMajor} />\n      ))}\n      {_.range(-180, 200, 30).map(x => (\n          <line key={x} x1={x} y1=\"-200\" x2={x} y2=\"200\" className={classes.gridMajor} />\n      ))}\n    </g>\n  )\n}\n\n\ninterface CellProps extends React.SVGAttributes<SVGElement> {\n  position: GeoPosition,\n  r?: number,\n}\n\nconst Cell = ({ position, r = 10, ...props }: CellProps) => {\n  const coord = Geo[position];\n  return (\n    <circle cx={coord.x} cy={coord.y} r={r} {...props} />\n  )\n}\n\n\nconst buildTrail = (from: GeoPosition, to: GeoPosition, seat: number, max: number = 80): GeoPosition[] => {\n  let i = 0;\n  const trail = [from];\n  while (trail[trail.length - 1] !== to && i++ < max) {\n    const next = calculateNextPosition(trail[trail.length - 1], seat);\n    if (next === \"INVALID_MOVE\") {\n      break;\n    }\n    trail.push(next);\n  }\n  if (trail[trail.length - 1] !== to) {\n    return [from, to]\n  }\n  return trail;\n}\n\ninterface TokenProps extends SVGMotionProps<SVGElement> {\n  pos: GeoPosition,\n  seat: number,\n}\n\nconst Token = ({pos, seat, ...props}: TokenProps) => {\n\n  // Use the previous value of the pos prop for animation.\n  const prevPos = useRef<string|undefined>();\n  useEffect(() => {\n    prevPos.current = pos;\n  }, [prevPos, pos]);\n\n  const origin = prevPos.current;\n  const trail = (origin && origin !== pos) ? buildTrail(origin, pos, seat) : [pos] ;\n\n  const cellRadius = 10;\n  const tokenRadius = 12;\n  const className = [\n    classes.tokenRed,\n    classes.tokenBlue,\n    classes.tokenYellow,\n    classes.tokenGreen,\n  ][seat];\n\n  const animate = trail.length > 1 ? {\n    attrX: trail.map(p => Geo[p].x - tokenRadius),\n    attrY: trail.map(p => Geo[p].y - (tokenRadius * 2 - cellRadius)),\n    transition: { duration: Math.max(1, trail.length / 2), ease: \"easeOut\" },\n  } : {\n    attrX: Geo[pos].x - tokenRadius,\n    attrY: Geo[pos].y - (tokenRadius * 2 - cellRadius)\n  };\n\n  return (\n    <motion.svg\n      viewBox=\"-10 -10 20 20\" x=\"0\" y=\"0\"\n      height={tokenRadius * 2}\n      width={tokenRadius * 2}\n      animate={animate}\n      initial={{\n        attrX: Geo[pos].x - tokenRadius,\n        attrY: Geo[pos].y - (tokenRadius * 2 - cellRadius),\n      } as MotionStyle}\n      className={className}\n    >\n      <ellipse\n        fill=\"url(#shadowGradient1)\"\n        cx=\"0\"\n        cy=\"8\"\n        rx=\"10\"\n        ry=\"2\"\n      />\n      <circle cx=\"0\" cy=\"0\" r=\"10\" />\n      <circle fill=\"url(#tokenGradient1)\" cx=\"0\" cy=\"0\" r=\"10\" />\n    </motion.svg>\n  )\n}\n\ninterface PlayerProps {\n  seat: number,\n  name: string,\n}\n\nconst Player: React.FC<PlayerProps> = ({seat, name}) => {\n  const transform = [\n    \"rotate(45) translate(0 -195)\",\n    \"rotate(-45) translate(0 170)\",\n    \"rotate(45) translate(0 170)\",\n    \"rotate(-45) translate(0 -195)\",\n  ][seat];\n\n  return (\n    <text x={0} y={15}\n      pointerEvents=\"none\"\n      className={classes.player}\n      dominantBaseline=\"middle\"\n      textAnchor=\"middle\"\n      transform={transform}\n    >\n      {name}\n    </text>\n  )\n}\n\ninterface Props {\n  showGrid?: boolean;\n  children?: React.ReactNode;\n}\n\nconst SvgBoard = ({\n  showGrid = false,\n  children,\n}: Props) => {\n\n  const handleClick = (pos: GeoPosition) => {\n    return () => {\n      console.log(pos);\n    }\n  };\n\n  return (\n    <svg\n      viewBox=\"-200 -200 400 400\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      className={classes.root}\n    >\n      <defs>\n        <linearGradient id=\"buttonGradient\" gradientTransform=\"rotate(70)\">\n          <stop offset=\"0%\" stopColor=\"#ffcdd2\" />\n          <stop offset=\"100%\" stopColor=\"#d32f2f\" />\n        </linearGradient>\n\n        <radialGradient id=\"cellGradient\" fx=\"30%\" fy=\"70%\">\n          <stop offset=\"0%\" stopColor=\"black\" stopOpacity=\"0.25\" />\n          <stop offset=\"80%\" stopColor=\"black\" stopOpacity=\"0.4\" />\n        </radialGradient>\n\n        <radialGradient id=\"boardGradient\">\n          <stop offset=\"50%\" stopColor=\"transparent\" />\n          <stop offset=\"100%\" stopColor=\"black\" stopOpacity=\"0.25\" />\n        </radialGradient>\n\n        <radialGradient id=\"tokenGradient1\" fx=\"70%\" fy=\"30%\">\n          <stop offset=\"0%\" stopColor=\"#ffffff\" stopOpacity=\"0.5\" />\n          <stop offset=\"80%\" stopColor=\"#0a0a0a\" stopOpacity=\"0.5\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0.5\" />\n        </radialGradient>\n        <radialGradient id=\"shadowGradient1\">\n          <stop offset=\"50%\" stopColor=\"#000000\" stopOpacity=\"1\" />\n          <stop offset=\"100%\" stopColor=\"#000000\" stopOpacity=\"0\" />\n        </radialGradient>\n\n        <symbol id=\"token\" viewBox=\"-10 -10 20 20\" x=\"0\" y=\"0\">\n          <ellipse\n            fill=\"url(#shadowGradient1)\"\n            cx=\"0\"\n            cy=\"8\"\n            rx=\"10\"\n            ry=\"2\"\n          />\n          <circle cx=\"0\" cy=\"0\" r=\"10\" />\n          <circle fill=\"url(#tokenGradient1)\" cx=\"0\" cy=\"0\" r=\"10\" />\n        </symbol>\n\n      </defs>\n\n      { showGrid && <GridLines /> }\n\n      <g pointerEvents=\"none\" className={classes.paintedRed}>\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(0) translate(0 -105)\" />\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(45) translate(0 -211)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paintedBlue}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(135) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(90) translate(0 -105)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paintedYellow}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(225) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(180) translate(0 -105)\" />\n      </g>\n\n      <g pointerEvents=\"none\" className={classes.paintedGreen}>\n        <rect x={-60} y={-15} width={120} height={30} rx={15}\n          transform=\"rotate(315) translate(0 -211)\" />\n        <rect x={-15} y={-60} width={30} height={120} rx={15}\n          transform=\"rotate(270) translate(0 -105)\" />\n      </g>\n\n      <g>\n        { _.keys(Geo).map(key => (\n          <Cell\n            key={key}\n            position={key}\n            r={10}\n            className={classes.cell}\n            onClick={handleClick(key)}\n          />\n        ))}\n      </g>\n\n      <Player seat={0} name=\"Red\" />\n      <Player seat={1} name=\"Blue\" />\n      <Player seat={2} name=\"Yellow\" />\n      <Player seat={3} name=\"Green\" />\n\n      <Token pos=\"S00\" seat={0} />\n      <Token pos=\"S01\" seat={0} />\n      <Token pos=\"S02\" seat={0} />\n      <Token pos=\"S03\" seat={0} />\n\n      <Token pos=\"S10\" seat={1} />\n      <Token pos=\"S11\" seat={1} />\n      <Token pos=\"S12\" seat={1} />\n      <Token pos=\"S13\" seat={1} />\n\n      <Token pos=\"S20\" seat={2} />\n      <Token pos=\"S21\" seat={2} />\n      <Token pos=\"S22\" seat={2} />\n      <Token pos=\"S23\" seat={2} />\n\n      <Token pos=\"S30\" seat={3} />\n      <Token pos=\"S31\" seat={3} />\n      <Token pos=\"S32\" seat={3} />\n      <Token pos=\"S33\" seat={3} />\n    </svg>\n  )\n};\n\nexport default SvgBoard;\n","const theme = {\n  // Theming by seat number.\n  seats: [\n    // 0 => Red\n    {\n      paint: \"#c62828\",\n      diceBg: \"#c62828\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 1 => Blue\n    {\n      paint: \"#1565c0\",\n      diceBg: \"#1565c0\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 2 => Yellow\n    {\n      paint: \"#ffab00\",\n      diceBg: \"#ffab00\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 3 => Green\n    {\n      paint: \"#388e3c\",\n      diceBg: \"#388e3c\",\n      diceFg: \"#f0f0f0\",\n    },\n  ],\n};\n\nexport default theme;\n\nexport type Theme = typeof theme;\n","import React, { FunctionComponent } from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport { ThemeProvider } from 'react-jss';\n\nimport Home from './Home';\nimport PlayOnline from './PlayOnline';\nimport OfflineGame from './pages/OfflineGame';\nimport ViewPortUnits from './components/ViewPortUnits';\nimport SvgBoard from './SvgBoard';\nimport theme from './theme';\n\nimport './App.css';\n\nconst App: FunctionComponent = () => {\n  return (\n    <ViewPortUnits>\n      <ThemeProvider theme={theme}>\n        <Router>\n          <Switch>\n            <Route exact path=\"/games/:game_id\">\n              <PlayOnline />\n            </Route>\n\n            <Route exact path=\"/svg\">\n              <SvgBoard />\n            </Route>\n\n            <Route exact path=\"/offline\">\n              <OfflineGame />\n            </Route>\n\n            <Route>\n              <Home />\n            </Route>\n          </Switch>\n        </Router>\n      </ThemeProvider>\n    </ViewPortUnits>\n  )\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"SvgBoard_root__2vlYo\",\"painted\":\"SvgBoard_painted__1wL0c\",\"player\":\"SvgBoard_player__2KRH_\",\"paintedRed\":\"SvgBoard_paintedRed__1FwMr SvgBoard_painted__1wL0c\",\"paintedBlue\":\"SvgBoard_paintedBlue__1Bcyf SvgBoard_painted__1wL0c\",\"paintedYellow\":\"SvgBoard_paintedYellow__3Z1k5 SvgBoard_painted__1wL0c\",\"paintedGreen\":\"SvgBoard_paintedGreen__2iWor SvgBoard_painted__1wL0c\",\"gridMajor\":\"SvgBoard_gridMajor__3gWTi\",\"gridMinor\":\"SvgBoard_gridMinor__34m8P\",\"cell\":\"SvgBoard_cell__12JSt\",\"tokenRed\":\"SvgBoard_tokenRed__35Di3\",\"tokenBlue\":\"SvgBoard_tokenBlue__3S9iU\",\"tokenYellow\":\"SvgBoard_tokenYellow__3S0qZ\",\"tokenGreen\":\"SvgBoard_tokenGreen__1mE2h\",\"button\":\"SvgBoard_button__3KjHV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"controls_root__34suz\",\"info\":\"controls_info__10tQH\",\"gameover\":\"controls_gameover__1pMDk\",\"main\":\"controls_main__1ObY0\",\"roll\":\"controls_roll__q_yNR\",\"pass\":\"controls_pass__1bLrU\",\"dice\":\"controls_dice__mtd7l\",\"dice1\":\"controls_dice1__2qOJt controls_dice__mtd7l\",\"dice2\":\"controls_dice2__2s9pX controls_dice__mtd7l\",\"dice3\":\"controls_dice3__KRJvC controls_dice__mtd7l\",\"dice4\":\"controls_dice4__2qWsp controls_dice__mtd7l\",\"dice5\":\"controls_dice5__x9KQC controls_dice__mtd7l\",\"dice6\":\"controls_dice6__1vB_k controls_dice__mtd7l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1YFGw\",\"disabled\":\"Button_disabled__n1W1R\",\"default\":\"Button_default__1yZ7r Button_button__1YFGw\",\"red\":\"Button_red__2Zi0G Button_button__1YFGw\",\"blue\":\"Button_blue__1FFDR Button_button__1YFGw\",\"yellow\":\"Button_yellow__hB_Nw Button_button__1YFGw\",\"green\":\"Button_green__1hT-6 Button_button__1YFGw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"header_title__aB6b6\",\"exit\":\"header_exit__1D1BM\"};"],"sourceRoot":""}