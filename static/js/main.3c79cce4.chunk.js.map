{"version":3,"sources":["../../src/types.ts","../../src/ai.ts","../../src/index.ts","serviceWorker.js","theme.ts","BasicLayout.tsx","Button.tsx","Card.tsx","lobby/api.ts","lobby/service.ts","lobby/RoomHistory.ts","lobby/index.ts","Home.tsx","DiceIcon.tsx","GameOver.tsx","GameControls.tsx","Cell.tsx","Board/Board.tsx","Dice.tsx","PlayerName.tsx","Token.tsx","AnimatedTokenGroup.tsx","Board/index.tsx","GameLayout.tsx","PlayOffline.tsx","Overlay.tsx","Dialog.tsx","PreGameForm.tsx","Loading.tsx","PlayOnline.tsx","ViewPortUnits.tsx","App.tsx","index.js","Board/Board.module.css","../../src/game.ts","../../src/board.ts"],"names":["Boolean","window","location","hostname","match","fontStack","fonts","map","font","includes","join","theme","space","body","heading","monospace","fontSizes","fontWeights","bold","borderWidths","colors","seats","paint","diceBg","diceFg","Container","styled","div","Main","Header","h1","BasicLayout","children","to","variants","primary","background","border","text","secondary","Color","lighten","hex","red","blue","yellow","green","borderColor","variant","darken","textColor","StyledButton","button","props","stroke","StyledText","span","Button","Card","Title","header","Content","Footer","footer","justifyContent","Object","assign","baseUrl","numPlayers","a","fetch","method","JSON","stringify","unlisted","headers","resp","ok","Error","status","json","roomID","roomId","name","clientId","credentials","playerId","playerID","playerName","data","createRoom","getRoom","joinRoom","leaveRoom","roomHistory","key","item","localStorage","getItem","this","parse","err","rooms","sort","b","updated","slice","setItem","id","load","find","room","filter","r","push","Date","getTime","save","api","players","p","toString","gameID","getCredentials","creds","uniqueId","sha1","findCredentials","history","joinGame","length","console","log","warn","seat","open","parseInt","playerCredentials","update","leaveGame","Promise","all","remove","lobby","CardButton","PlayerLabel","Input","input","Home","path","useHistory","createGame","num","React","useState","gameId","setGameId","style","fontFamily","onClick","type","value","onChange","e","target","maxLength","inputMode","DiceIcon","pip","cx","cy","viewBox","Backdrop","StyledCanvas","canvas","rotate","keyframes","appear","PlayAgain","GameOver","winner","canvasRef","useRef","useEffect","confetti","ConfettiGenerator","current","render","clear","ReactDOM","createPortal","ref","document","Root","Info","default","disabled","css","RollButton","PassButton","DiceButton","Button2","Controls","G","ctx","moves","isActive","gameMetadata","currentPlayer","getCurrentPlayer","gameover","phase","rollDie","dieRoll","i","Pass","color","meta","ChooseSeat","C00","top","left","C01","C02","C03","C04","C05","C06","C07","C08","C09","C0A","C0B","C10","C11","C12","C13","C14","C15","C16","C17","C18","C19","C1A","C1B","C20","C21","C22","C23","C24","C25","C26","C27","C28","C29","C2A","C2B","C30","C31","C32","C33","C34","C35","C36","C37","C38","C39","C3A","C3B","H00","H01","H02","H03","H10","H11","H12","H13","H20","H21","H22","H23","H30","H31","H32","H33","S00","S01","S02","S03","S10","S11","S12","S13","S20","S21","S22","S23","S30","S31","S32","S33","Cell","position","Board","className","classes","root","startRed","startBlue","startYellow","startGreen","homeRed","homeBlue","homeYellow","homeGreen","boardPositions","cell","DiceRoll","Dice","random","Math","floor","PlayerName","StyledToken","Token","pos","action","preventDefault","getNextPos","final","trail","from","max","next","calculateNextPosition","buildTrail","reducer","state","payload","x","targets","fromEntries","pieces","AnimatedTokenGroup","useReducer","dispatch","handleTransitionEnd","onTransitionEnd","zIndex","BoardController","movePiece","BackButton","GameLayout","useRouteMatch","handleQuit","event","params","game_id","Loading","OfflineGame","OfflineClient","Client","game","Game","board","loading","multiplayer","Local","bots","SeisBot","debug","Overlay","slideUp","Dialog","title","PreGameForm","setName","joinState","useAsync","deferFn","onResolve","autoFocus","placeholder","run","Spinner","OnlineClient","SocketIO","server","sleep","ms","resolve","setTimeout","loadGame","setGameProps","OnlineGame","gameProps","promiseFn","isPending","isRejected","isFulfilled","handleResize","vh","innerHeight","vw","innerWidth","documentElement","setProperty","min","ViewPortUnits","addEventListener","removeEventListener","App","exact","PlayOnline","PlayOffline","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","module","exports"],"mappings":"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","file":"static/js/main.3c79cce4.chunk.js","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.boardPositions = void 0;\n/**\n * BoardPosition is a 3-character notation for a position on the board.\n */\nexports.boardPositions = [\n    \"S00\", \"S01\", \"S02\", \"S03\",\n    \"S10\", \"S11\", \"S12\", \"S13\",\n    \"S20\", \"S21\", \"S22\", \"S23\",\n    \"S30\", \"S31\", \"S32\", \"S33\",\n    \"H00\", \"H01\", \"H02\", \"H03\",\n    \"H10\", \"H11\", \"H12\", \"H13\",\n    \"H20\", \"H21\", \"H22\", \"H23\",\n    \"H30\", \"H31\", \"H32\", \"H33\",\n    \"C00\", \"C01\", \"C02\", \"C03\", \"C04\", \"C05\", \"C06\", \"C07\", \"C08\", \"C09\", \"C0A\", \"C0B\",\n    \"C10\", \"C11\", \"C12\", \"C13\", \"C14\", \"C15\", \"C16\", \"C17\", \"C18\", \"C19\", \"C1A\", \"C1B\",\n    \"C20\", \"C21\", \"C22\", \"C23\", \"C24\", \"C25\", \"C26\", \"C27\", \"C28\", \"C29\", \"C2A\", \"C2B\",\n    \"C30\", \"C31\", \"C32\", \"C33\", \"C34\", \"C35\", \"C36\", \"C37\", \"C38\", \"C39\", \"C3A\", \"C3B\",\n];\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.SeisBot = void 0;\nvar game_1 = require(\"./game\");\nvar MAKE_MOVE = 'MAKE_MOVE';\nvar GAME_EVENT = 'GAME_EVENT';\n/**\n * Generate a move to be dispatched to the game move reducer.\n *\n * @param {string} type - The move type.\n * @param {Array}  args - Additional arguments.\n * @param {string}  playerID - The ID of the player making this action.\n * @param {string}  credentials - (optional) The credentials for the player making this action.\n */\nvar makeMove = function (type, args, playerID, credentials) { return ({ action: {\n        type: MAKE_MOVE,\n        payload: { type: type, args: args, playerID: playerID, credentials: credentials }\n    } }); };\n/**\n * Generate a game event to be dispatched to the flow reducer.\n *\n * @param {string} type - The event type.\n * @param {Array}  args - Additional arguments.\n * @param {string}  playerID - The ID of the player making this action.\n * @param {string}  credentials - (optional) The credentials for the player making this action.\n */\nvar gameEvent = function (type, args, playerID, credentials) { return ({ action: {\n        type: GAME_EVENT,\n        payload: { type: type, args: args, playerID: playerID, credentials: credentials }\n    } }); };\nvar SeisBot = /** @class */ (function () {\n    function SeisBot() {\n    }\n    SeisBot.prototype.play = function (_a, playerID) {\n        var G = _a.G, ctx = _a.ctx;\n        return __awaiter(this, void 0, void 0, function () {\n            var seat, moves, move;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (ctx.phase === 'setup') {\n                            if (G.players.length > 0) {\n                                seat = (G.players[0].seat + 2) % 4;\n                                return [2 /*return*/, makeMove('ChooseSeat', [seat, 'bot'], playerID)];\n                            }\n                            return [2 /*return*/, makeMove('INVALID_MOVE', [], playerID)];\n                        }\n                        if (!(ctx.phase === 'play' && !G.dieRoll)) return [3 /*break*/, 2];\n                        // Wait briefly before the first roll of the turn.\n                        // If this is not the first roll, give the last move time to complete.\n                        return [4 /*yield*/, sleep(ctx.numMoves === 0 ? 1000 : 3000)];\n                    case 1:\n                        // Wait briefly before the first roll of the turn.\n                        // If this is not the first roll, give the last move time to complete.\n                        _b.sent();\n                        return [2 /*return*/, makeMove('rollDie', [], playerID)];\n                    case 2:\n                        if (!(ctx.phase === 'play' && !!G.dieRoll)) return [3 /*break*/, 6];\n                        moves = game_1.getValidMoves(G, ctx);\n                        if (!(moves.length === 0)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, sleep(3000)];\n                    case 3:\n                        _b.sent();\n                        return [2 /*return*/, makeMove('Pass', [], playerID)];\n                    case 4: return [4 /*yield*/, sleep(1000)];\n                    case 5:\n                        _b.sent();\n                        move = moves[Math.floor(Math.random() * moves.length)];\n                        return [2 /*return*/, makeMove('movePiece', [move.from], playerID)];\n                    case 6: \n                    // If anything else, sleep before trying again so we don't kill the CPU.\n                    return [4 /*yield*/, sleep(1000)];\n                    case 7:\n                        // If anything else, sleep before trying again so we don't kill the CPU.\n                        _b.sent();\n                        return [2 /*return*/, {}];\n                }\n            });\n        });\n    };\n    return SeisBot;\n}());\nexports.SeisBot = SeisBot;\nfunction sleep(milliseconds) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, milliseconds);\n    });\n}\n//# sourceMappingURL=ai.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nexports.__esModule = true;\n__exportStar(require(\"./board\"), exports);\n__exportStar(require(\"./game\"), exports);\nvar game_1 = require(\"./game\");\n__createBinding(exports, game_1, \"default\", \"Game\");\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./ai\"), exports);\n//# sourceMappingURL=index.js.map","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'typeface-anton';\n\nfunction fontStack(fonts: string[]) {\n    return fonts.map(font => (font.includes(' ') ? `\"${font}\"` : font)).join(', ')\n}\n\nconst theme = {\n  space: [ 0, 4, 8, 16, 32, 64],\n\n  fonts: {\n    body: fontStack([\n      '-apple-system',\n      'BlinkMacSystemFont',\n      'Segoe UI',\n      'Helvetica',\n      'Arial',\n      'sans-serif',\n      'Apple Color Emoji',\n      'Segoe UI Emoji'\n    ]),\n    heading: fontStack(['Anton', 'Arial', 'sans-serif']),\n    monospace: 'Menlo, monospace',\n  },\n  fontSizes: [14, 18, 24, 36, 48, 72, 96],\n  fontWeights: {\n    body: 400,\n    heading: 700,\n    bold: 700,\n  },\n  borderWidths: [0, 1, 2, 4],\n\n  colors: {\n  },\n\n  // Theming by seat number.\n  seats: [\n    // 0 => Red\n    {\n      paint: \"#c62828\",\n      diceBg: \"#c62828\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 1 => Blue\n    {\n      paint: \"#1565c0\",\n      diceBg: \"#1565c0\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 2 => Yellow\n    {\n      paint: \"#ffab00\",\n      diceBg: \"#ffab00\",\n      diceFg: \"#f0f0f0\",\n    },\n    // 3 => Green\n    {\n      paint: \"#388e3c\",\n      diceBg: \"#388e3c\",\n      diceFg: \"#f0f0f0\",\n    },\n  ],\n};\n\nexport default theme;\n\nexport type Theme = typeof theme;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  flex-direction: column;\n  height: 100%;\n`\n\nconst Main = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  flex-direction: column;\n  height: 100%;\n  max-height: 600px;\n  width: 320px;\n  margin: 0 auto;\n  color: #fdfcdc;\n  font-family: Anton;\n\n  & > * {\n    margin-bottom: 16px;\n  }\n`\n\nconst Header = styled.h1`\n  font-family: Anton;\n  font-size: 48px;\n  position: relative;\n  color: #0081a7;\n  margin: 16px 0;\n\n  &::before {\n    content: \"¡seis!\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    -webkit-text-stroke: 12px #fdfcdc;\n  }\n  & > a {\n    text-decoration: none;\n    position: relative;\n    z-index: 1;\n    color: #0081a7;\n  }\n`\n\nconst BasicLayout: React.FC = ({ children }) => {\n  return (\n    <Container>\n      <Main>\n        <Header>\n          <Link to=\"/\">¡seis!</Link>\n        </Header>\n        { children }\n      </Main>\n    </Container>\n  )\n};\n\nexport default BasicLayout;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Color from 'color';\n\n\ninterface Variant {\n  background: string\n  border?: string\n  stroke?: string\n  text: string\n};\n\nconst variants:Record<string, Variant> = {\n  primary: {\n    background: \"#00afb9\",\n    border: \"#0081a7\",\n    text: \"#fdfcdc\",\n  },\n  secondary: {\n    background: \"#bdc0c0\",\n    text: Color(\"#bdc0c0\").lighten(0.5).hex(),\n  },\n  red: {\n    background: \"#c62828\",\n    text: \"#fff\",\n  },\n  blue: {\n    background: \"#1565c0\",\n    text: \"#fff\",\n  },\n  yellow: {\n    background: \"#ffab00\",\n    text: \"#fff\",\n  },\n  green: {\n    background: \"#388e3c\",\n    text: \"#fff\",\n  },\n};\n\ninterface Props extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: keyof typeof variants\n}\n\nconst backgroundColor = ({ variant = \"primary\" }: Props) => {\n  return variants[variant].background;\n}\n\nconst borderColor = ({ variant = \"primary\" }: Props) => {\n  return variants[variant].border || (\n    Color(variants[variant].background).darken(0.5).hex()\n  );\n}\n\nconst strokeColor = ({ variant = \"primary\" }: Props) => {\n  return variants[variant].stroke || (\n    Color(variants[variant].background).darken(0.5).hex()\n  );\n}\n\nconst textColor = ({ variant = \"primary\" }: Props) => {\n  return variants[variant].text;\n}\n\n\nconst StyledButton = styled.button<Props>`\n  display: inline-block;\n  font-family: ${props => props.theme.fonts.heading};\n  font-size: ${props => props.theme.fontSizes[1]}px;\n  font-weight: ${props => props.theme.fontWeights.heading};\n  border-color: ${borderColor};\n  border-radius: 6px;\n  border-width: 2px;\n  border-style: solid;\n  padding: 4px 16px;\n  background: ${backgroundColor};\n  transition: transform ease-in-out 200ms;\n  text-align: center;\n  box-sizing: border-box;\n  color: ${textColor};\n\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n  }\n  &:disabled:hover {\n    transform: none;\n  }\n  & > svg {\n    height: 100%;\n    width: 100%;\n    fill: #fdfcdc;\n    fill: ${textColor};\n    stoke: ${strokeColor};\n    stroke-width: 1px;\n  }\n`\n\nconst StyledText = styled.span<Pick<Props, \"variant\">>`\n  color: inherit;\n  display: inline-block;\n  position: relative;\n  -webkit-text-stroke: 4px ${borderColor};\n  text-decoration: none;\n\n  &::after {\n    content: \"${props => (props.children as string)}\";\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    -webkit-text-stroke: 0;\n  }\n\n  ${StyledButton}:disabled & {\n    -webkit-text-stroke-color: #7a979f;\n  }\n`\n\nconst Button: React.FC<Props> = ({\n  children,\n  ...props\n}) => {\n  return (\n    <StyledButton {...props}>\n      { typeof children === \"string\" ? (\n        <StyledText variant={props.variant}>{children}</StyledText>\n      ) : children }\n    </StyledButton>\n  )\n}\n\nexport default Button;\n","import styled from 'styled-components';\n\nconst Card = styled.div`\n  background: #f7f6e7;\n  color: #313638;\n  width: 100%;\n  border-radius: 8px;\n  border: solid 4px #f7f6e7;\n  overflow: hidden;\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n  font-family: ${props => props.theme.fonts.body};\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    z-index: -1;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border: solid 2px #313638;\n    border-radius: 6px;\n  }\n`;\n\nconst Title = styled.header`\n  color: #0081a7;\n  font-family: ${props => props.theme.fonts.heading};\n  font-size: ${props => props.theme.fontSizes[2]}px;\n  padding: 0 8px 7px;\n  border-bottom: solid 1px #313638;\n  margin-bottom: 8px;\n`;\n\nconst Content = styled.div`\n  margin: 8px 0;\n  padding: 0 8px;\n  font-family: ${props => props.theme.fonts.body};\n`;\n\ninterface FooterProps {\n  justifyContent?: string\n}\n\nconst Footer = styled.footer<FooterProps>`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: ${props => props.justifyContent || 'space-between'};\n  width: 100%;\n  box-sizing: border-box;\n  margin-top: 8px;\n  padding: 0 8px;\n\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n`;\n\n\nexport default Object.assign(Card, { Title, Content, Footer })\n","/**\n * Low-level Lobby API wrapper functions.\n * https://boardgame.io/documentation/#/api/Lobby\n */\n\nexport const baseUrl = (\n  window.location.hostname === '10.0.1.27' ?\n  'http://10.0.1.27:8000' :\n  'https://seis-game.herokuapp.com'\n)\n\n/**\n * Interface for the API response from POST /games/{name}\n */\ninterface CreateRoomResponse {\n  gameID: string;\n}\n\n/**\n * Create a new room.\n */\nasync function createRoom(numPlayers: number): Promise<CreateRoomResponse> {\n  const resp = await fetch(baseUrl + '/games/seis/create', {\n    method: 'POST',\n    body: JSON.stringify({\n      numPlayers,\n      unlisted: true,\n    }),\n    headers: { 'Content-Type': 'application/json' },\n  });\n  if (!resp.ok) {\n    throw new Error('HTTP status ' + resp.status);\n  }\n  return await resp.json() as CreateRoomResponse;\n}\n\n/**\n * Interface for the API response from GET /games/{name}/{id}\n */\ninterface RoomResponse {\n  roomID: string;\n  players: {\n    id: number\n    name?: string\n    data?: {\n      clientId?: string\n    }\n  }[]\n  setupData?: any\n}\n\n/**\n * Get the details of a room by its ID.\n */\nasync function getRoom(roomID: string): Promise<RoomResponse> {\n  const resp = await fetch(`${baseUrl}/games/seis/${roomID}`);\n  if (!resp.ok) {\n    throw new Error(`Room ${roomID} not found`)\n  }\n  return await resp.json() as RoomResponse;\n}\n\n/**\n * Interface for the API response from POST /games/{name}/{id}/join\n */\ninterface JoinRoomResponse {\n  playerCredentials: string;\n}\n\n/**\n * Join a game by ID.\n */\nasync function joinRoom({\n  roomId,\n  name,\n  clientId,\n  credentials,\n  playerId,\n}: {\n  roomId: string,\n  name: string,\n  clientId: string,\n  credentials: string,\n  playerId: number\n}): Promise<JoinRoomResponse> {\n  const resp = await fetch(`${baseUrl}/games/seis/${roomId}/join`, {\n    method: 'POST',\n    body: JSON.stringify({\n      playerID: playerId,\n      playerName: name,\n      data: { clientId: clientId },\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      'bgio-credentials': credentials,\n    },\n  });\n  if (!resp.ok) {\n    throw new Error(\"Unable to join room\")\n  }\n  return await resp.json() as JoinRoomResponse;\n}\n\n/**\n * Leave the room.\n */\nasync function leaveRoom({ roomID, credentials, playerID }: {\n  roomID: string,\n  credentials: string,\n  playerID: string,\n}) {\n  await fetch(`${baseUrl}/games/seis/${roomID}/leave`, {\n    method: 'POST',\n    body: JSON.stringify({playerID, credentials}),\n    headers: { 'Content-Type': 'application/json' },\n  });\n}\n\nexport default {\n  baseUrl,\n  createRoom,\n  getRoom,\n  joinRoom,\n  leaveRoom,\n}\n","import sha1 from 'sha1';\nimport { uniqueId } from '@seis/core';\n\nimport api from './api';\nimport RoomHistory from './RoomHistory';\n\nconst roomHistory = new RoomHistory('rooms');\n\nexport const baseUrl = api.baseUrl;\n\nexport interface RoomState {\n  roomId: string\n\n  players: {\n    id: string\n    name?: string\n    clientId?: string\n  }[]\n}\n\n/**\n * Get the details for a room by its ID.\n */\nexport async function getRoom(id: string): Promise<RoomState> {\n  const resp = await api.getRoom(id);\n  return {\n    roomId: id,\n    players: resp.players.map( p => ({\n      id: p.id.toString(10),\n      name: p.name,\n      clientId: p.data?.clientId,\n    })),\n  }\n}\n\n/**\n * Create a new room, returning the room ID.\n */\nexport async function createRoom(numPlayers: number) {\n  const resp = await api.createRoom(numPlayers);\n  return resp.gameID;\n}\n\n/**\n *\n */\nfunction getCredentials() {\n  let creds = localStorage.getItem(\"creds\")\n  if (!creds) {\n    creds = uniqueId()\n    localStorage.setItem(\"creds\", creds)\n  }\n\n  return {\n    credentials: creds,\n    clientId: sha1(creds),\n  }\n}\n\nexport interface GameProps {\n  playerID: string\n  credentials: string\n}\n\n/**\n * Find player credentials for the given room from the user's history.\n */\nexport function findCredentials(roomId: string): GameProps | undefined {\n  const history = roomHistory.find(roomId);\n  if (!history) {\n    return;\n  }\n  return {\n    playerID: history.playerID,\n    credentials: history.credentials,\n  }\n}\n\n\n/**\n * Join a game.\n *\n * Returns the props needed to join the game.\n */\nexport async function joinGame(roomId: string, name: string): Promise<GameProps> {\n  const creds = getCredentials();\n\n  // First check if this client has already joined.\n  let room = await getRoom(roomId);\n  const seats = room.players.filter(p => p.clientId === creds.clientId);\n\n  // Previously joined.\n  if (seats.length === 1) {\n    console.log(`previously joined room ${roomId} at seat ${seats[0].id}`)\n    return {\n      playerID: seats[0].id,\n      credentials: creds.credentials,\n    }\n  }\n\n  // If multiple seats are taken by this user, leave the room and re-join.\n  if (seats.length > 1) {\n    console.warn(`previously joined room ${roomId} in ${seats.length} seats`)\n    for (let seat of seats) {\n      await api.leaveRoom({roomID: roomId, playerID: seat.id, ...creds});\n    }\n  }\n\n  room = await getRoom(roomId);\n  const open = room.players.filter(p => !p.name);\n\n  console.log(`found ${open.length} open seats in room ${roomId}`)\n  for (let seat of open) {\n    console.log(`attempting to join at seat ${seat.id}`)\n    try {\n      const resp = await api.joinRoom({\n        roomId,\n        name,\n        playerId: parseInt(seat.id, 10),\n        ...creds,\n      })\n      const props = {playerID: seat.id, credentials: resp.playerCredentials};\n      roomHistory.update({roomId, ...props});\n      return props;\n    } catch (err) {\n      continue\n    }\n  }\n  console.log(`unable to join any seat`)\n  throw new Error(\"Unable to join room\")\n}\n\n/**\n * Leave a game.\n */\nexport async function leaveGame(roomId: string) {\n  const creds = getCredentials();\n  let room = await getRoom(roomId);\n  await Promise.all(\n    room.players.filter(\n      ({ clientId }) => clientId === creds.clientId\n    ).map(\n      ({ id: playerID }) => api.leaveRoom({roomID: roomId, playerID, ...creds})\n    )\n  )\n  roomHistory.remove(roomId)\n}\n","interface CachedRoom {\n  roomId: string\n  playerID: string\n  credentials: string\n  updated: number\n}\n\nexport default class RoomHistory {\n  constructor(readonly key: string) {};\n\n  load(): CachedRoom[] {\n    try {\n      const item = localStorage.getItem(this.key)\n      if (item === null) {\n        return [];\n      }\n      return (JSON.parse(item) || []) as CachedRoom[];\n    } catch (err) {\n      return [];\n    }\n  }\n\n  save(rooms: CachedRoom[]) {\n    // Only store the 3 most recent rooms.\n    rooms.sort((a, b) => a.updated - b.updated)\n    const item = JSON.stringify(rooms.slice(-3))\n    localStorage.setItem(this.key, item);\n  }\n\n  find(id: string): CachedRoom | undefined {\n    return this.load().find(room => room.roomId === id);\n  }\n\n  update(room: Omit<CachedRoom, 'updated'>) {\n    const rooms = this.load().filter(r => r.roomId !== room.roomId);\n    rooms.push({...room, updated: new Date().getTime()})\n    this.save(rooms)\n  }\n\n  remove(id: string) {\n    const rooms = this.load().filter(r => r.roomId !== id);\n    this.save(rooms)\n  }\n}\n","import * as lobby from './service';\nexport default lobby;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport BasicLayout from './BasicLayout';\nimport Button from './Button';\nimport Card from './Card';\nimport lobby from './lobby';\n\n\nconst CardButton = styled(Button)`\n  margin-left: 8px;\n`;\n\nconst PlayerLabel = styled.div`\n  flex-grow: 1;\n  padding: 4px 0px;\n  font-size: ${props => props.theme.fontSizes[1]}px;\n`;\n\nconst Input = styled.input`\n  flex-grow: 1;\n  font-family: Anton;\n  font-size: ${props => props.theme.fontSizes[1]}px;\n  border: solid 2px #0081a7;\n  border-radius: 4px;\n  width: 60%;\n  letter-spacing: 12px;\n  padding: 4px 8px;\n`;\n\nconst Home: React.FC<{}> = () => {\n  const history = useHistory();\n  const go = (path: string) => () => {\n    history.push(path);\n  }\n\n  const createGame = (num: number) => async () => {\n    const id = await(lobby.createRoom(num))\n    history.push(`/games/${id}`);\n  }\n\n  const [gameId, setGameId] = React.useState<string>(\"\");\n  const joinGame = () => {\n    history.push(`/games/${gameId}`);\n  }\n\n  return (\n    <BasicLayout>\n      <Card>\n        <Card.Title>Single Player</Card.Title>\n        <Card.Footer>\n          <div style={{fontFamily: '-apple-system'}}>Play 1 on 1 versus a bot</div>\n          <CardButton onClick={ go(\"/offline\") }>Play</CardButton>\n        </Card.Footer>\n      </Card>\n\n      <Card>\n        <Card.Title>Create a Game</Card.Title>\n        <Card.Content>\n          Create a new game to play with friends\n        </Card.Content>\n        <Card.Footer>\n          <PlayerLabel># of Players</PlayerLabel>\n          <CardButton onClick={ createGame(2) }>2</CardButton>\n          <CardButton onClick={ createGame(3) }>3</CardButton>\n          <CardButton onClick={ createGame(4) }>4</CardButton>\n        </Card.Footer>\n      </Card>\n\n      <Card>\n        <Card.Title>Join a Game</Card.Title>\n        <Card.Content>\n          Join an online game using the 6-digit game code\n        </Card.Content>\n        <Card.Footer>\n          <Input\n            type=\"text\"\n            value={gameId}\n            onChange={e => {setGameId(e.target.value)}}\n            maxLength={6}\n            inputMode=\"numeric\"\n          />\n          <CardButton onClick={joinGame}>Go</CardButton>\n        </Card.Footer>\n      </Card>\n    </BasicLayout>\n  )\n};\n\nexport default Home;\n","import React, {FunctionComponent} from 'react';\nimport { DiceValue } from '@seis/core';\n\ninterface Props extends React.SVGAttributes<SVGElement> {\n  value: DiceValue,\n}\n\nconst DiceIcon: FunctionComponent<Props> = ({\n  value,\n  ...props\n}) => {\n  const pip = (cx: number, cy: number) => {\n    return <circle cx={cx} cy={cy} r=\"2\" />\n  }\n\n  return (\n    <svg viewBox=\"-10 -10 20 20\" {...props}>\n      { [1, 3, 5].includes(value as number) && pip(0, 0) }\n      { [2, 3, 4, 5, 6].includes(value as number) && pip(-6, -6) }\n      { [4, 5, 6].includes(value as number) && pip(6, -6) }\n      { [4, 5, 6].includes(value as number) && pip(-6, 6) }\n      { [2, 3, 4, 5, 6].includes(value as number) && pip(6, 6) }\n      { [6].includes(value as number) && pip(0, -6) }\n      { [6].includes(value as number) && pip(0, 6) }\n    </svg>\n  )\n};\n\nexport default DiceIcon;\n","import React, { useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useHistory } from 'react-router-dom';\nimport styled, { keyframes } from 'styled-components';\nimport Button from './Button';\nimport ConfettiGenerator from 'confetti-js';\n\n\nconst Backdrop = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 9;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst StyledCanvas = styled.canvas`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 0;\n`\n\nconst rotate = keyframes`\n  from {\n    transform: scale(0) translate3d(0, -500%, 0) rotate(0deg);\n  }\n\n  to {\n    transform: scale(1.0) translate3d(0, 0, 0) rotate(1080deg);\n  }\n`\n\nconst StyledText = styled.div`\n  font-family: Anton;\n  font-size: 96px;\n  color: #fdfcdc;\n  display: block;\n  position: relative;\n  -webkit-text-stroke: 16px #0081a7;\n  text-decoration: none;\n  text-align: center;\n  animation: ${rotate} 2000ms ease-in-out;\n\n  &::after {\n    content: \"${props => (props.children as string)}\";\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    -webkit-text-stroke: 0;\n  }\n`\n\nconst appear = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1.0; }\n`\n\nconst PlayAgain = styled(Button)`\n  animation: ${appear} 500ms ease-in-out;\n  animation-delay: 2000ms;\n  animation-fill-mode: both;\n  opacity: 0;\n  margin-top: 32px;\n`;\n\ninterface Props {\n  winner: string;\n}\n\nconst GameOver: React.FC<Props> = ({ winner }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    const confetti = new ConfettiGenerator({ target: canvasRef.current })\n    confetti.render();\n    return () => confetti.clear();\n  }, [canvasRef])\n\n  return ReactDOM.createPortal(\n    (\n      <Backdrop>\n        <StyledCanvas ref={canvasRef} />\n        <StyledText>{`${winner} Wins!!!`}</StyledText>\n        <PlayAgain onClick={() => {history.push(\"/\")}}>\n          Play Again\n        </PlayAgain>\n\n      </Backdrop>\n    ),\n    document.body,\n  );\n};\n\nexport default GameOver;\n","import React from 'react';\nimport { Ctx } from 'boardgame.io';\nimport styled, { css } from 'styled-components';\nimport Color from 'color';\n\nimport { IG, getCurrentPlayer } from '@seis/core';\nimport Button2 from './Button';\nimport DiceIcon from './DiceIcon';\nimport GameOver from './GameOver';\n\nconst Root = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n\n  @media (max-width: 420px) {\n    width: 300px;\n  }\n`;\n\nconst Info = styled.div`\n  padding: 16px 8px 4px;\n  margin-bottom: 8px;\n  text-align: center;\n  border-bottom: solid 1px #555;\n  flex-grow: 0;\n  color: #ffcc80;\n  font-family: Anton;\n  font-size: 16px;\n  border-bottom: solid 1px #ffcc80;\n`;\n\nconst Main = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  align-content: flex-start;\n  justify-content: center;\n\n  @media (max-width: 420px) {\n    flex-flow: row wrap;\n  }\n`;\n\nconst variants = {\n  default: { primary: \"#cfd8dc\", secondary: \"#263238\"},\n  red: { primary: \"#c62828\", secondary: \"#fff\"},\n  blue: { primary: \"#1565c0\", secondary: \"#fff\"},\n  yellow: { primary: \"#ffab00\", secondary: \"#fff\"},\n  green: { primary: \"#388e3c\", secondary: \"#fff\"},\n}\n\ninterface ButtonProps extends React.HTMLAttributes<HTMLDivElement> {\n  variant?: keyof typeof variants,\n  disabled?: boolean,\n}\n\nconst Button = styled.div<ButtonProps>`\n  --primary: #cfd8dc;\n  --secondary: #263238;\n  background-color: ${({ variant = \"default\"}) => variants[variant].primary};\n  /* background-image: radial-gradient( */\n  /*   ellipse farthest-corner, */\n  /*   transparent 50%, */\n  /*   rgba(0, 0, 0, 0.25) */\n  /* ); */\n  border-color: ${({ variant = \"default\"}) => Color(variants[variant].primary).darken(0.5).hex()};\n  border-radius: 4px;\n  border-style: solid;\n  border-width: 2px;\n  box-sizing: border-box;\n  color: ${({ variant = \"default\"}) => variants[variant].secondary};\n  font-family: \"Anton\";\n  font-size: 24px;\n  height: 40px;\n  line-height: 37px;\n  text-align: center;\n  min-width: 40px;\n  transition: transform 200ms ease-in-out;\n\n  & > svg {\n    height: 100%;\n    width: 100%;\n    fill: ${({ variant = \"default\"}) => variants[variant].secondary};\n  }\n\n  ${({ disabled = false }) => disabled ? css`\n    cursor: not-allowed;\n    opacity: 0.25;\n  ` : css`\n    &:hover {\n      transform: scale(1.5);\n    }\n  `}\n`\n\nconst RollButton = styled(Button)`\n  width: 80px;\n  margin: 10px 20px;\n  order: 0;\n`;\n\nconst PassButton = styled(Button)`\n  width: 80px;\n  margin: 10px 20px;\n  order: 7;\n  @media (max-width: 420px) {\n    order: 3;\n  }\n`;\n\nconst DiceButton = styled(Button2)<{value: number}>`\n  height: 40px;\n  width: 40px;\n  padding: 0;\n  margin: 10px 5px;\n  order: ${props => props.value};\n`;\n\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  moves: any,\n  playerID?: string,\n  isActive: boolean,\n  gameMetadata: {id: number, name?: string}[]\n}\n\nconst colors = [\n  'red',\n  'blue',\n  'yellow',\n  'green',\n] as const;\n\nconst Controls: React.FC<Props> = ({\n  G,\n  ctx,\n  moves,\n  playerID,\n  isActive,\n  gameMetadata = []\n}) => {\n  const currentPlayer = getCurrentPlayer(G, ctx);\n  const variant = currentPlayer ? colors[currentPlayer.seat] : \"default\";\n\n  return (\n    <Root>\n      <Info>\n        { ctx.gameover && 'Game Over' }\n        { ctx.phase === \"play\" && isActive && 'Your turn' }\n        { ctx.phase === \"play\" && !isActive && `${currentPlayer?.name}'s turn` }\n        { ctx.phase === \"setup\" && isActive && 'Choose your color' }\n        { ctx.phase === \"setup\" && !isActive && 'Waiting for other players' }\n      </Info>\n\n      <Main>\n        { ctx.gameover && (\n          <GameOver winner={ctx.gameover.name} />\n        )}\n        { ctx.phase === \"play\" && (\n          <>\n            <RollButton\n              onClick={() => { moves.rollDie()}}\n              disabled={!isActive || !!G.dieRoll}\n              variant={variant}\n            >\n              ROLL\n            </RollButton>\n            {([1, 2, 3, 4, 5, 6] as const).map(i => (\n              <DiceButton\n                key={i}\n                value={i}\n                onClick={() => { moves.rollDie(i) }}\n                disabled={!isActive || !!G.dieRoll}\n                variant={variant === \"default\" ? \"primary\" : variant}\n              >\n                <DiceIcon value={i} />\n              </DiceButton>\n            ))}\n            <PassButton\n              onClick={() => { moves.Pass()}}\n              disabled={!isActive}\n              variant={variant}\n            >\n              PASS\n            </PassButton>\n          </>\n        )}\n        { ctx.phase === \"setup\" && isActive && (\n          colors.map((color, seat) => (\n            <DiceButton\n              key={seat}\n              value={seat}\n              onClick={() => {\n                const meta = gameMetadata.find(p => \"\" + p.id === playerID);\n                moves.ChooseSeat(seat, meta?.name || `Player  ${seat + 1}`);\n              }}\n              variant={color}\n              disabled={!!G.players.find(p => p.seat === seat)}\n            >\n              <DiceIcon value={([1, 2, 3, 4] as const)[seat]} />\n            </DiceButton>\n          ))\n        )}\n      </Main>\n    </Root>\n  );\n};\n\nexport default Controls;\n","/**\n * A Cell is a grid-positioned container. It uses a flex layout internally, to center\n * its children.\n */\nimport React from 'react';\nimport styled from 'styled-components';\nimport { BoardPosition } from '@seis/core';\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  position: BoardPosition\n}\n\nconst variants = {\n  C00: { top: \" 5.0%\", left: \"57.5%\" },\n  C01: { top: \"12.5%\", left: \"57.5%\" },\n  C02: { top: \"20.0%\", left: \"57.5%\" },\n  C03: { top: \"27.5%\", left: \"57.5%\" },\n  C04: { top: \"35.0%\", left: \"57.5%\" },\n  C05: { top: \"42.5%\", left: \"57.5%\" },\n\n  C06: { top: \"42.5%\", left: \"65.0%\" },\n  C07: { top: \"42.5%\", left: \"72.5%\" },\n  C08: { top: \"42.5%\", left: \"80.0%\" },\n  C09: { top: \"42.5%\", left: \"87.5%\" },\n  C0A: { top: \"42.5%\", left: \"95.0%\" },\n  C0B: { top: \"50.0%\", left: \"95.0%\" },\n\n  C10: { top: \"57.5%\", left: \"95.0%\" },\n  C11: { top: \"57.5%\", left: \"87.5%\" },\n  C12: { top: \"57.5%\", left: \"80.0%\" },\n  C13: { top: \"57.5%\", left: \"72.5%\" },\n  C14: { top: \"57.5%\", left: \"65.0%\" },\n  C15: { top: \"57.5%\", left: \"57.5%\" },\n\n  C16: { top: \"65.0%\", left: \"57.5%\" },\n  C17: { top: \"72.5%\", left: \"57.5%\" },\n  C18: { top: \"80.0%\", left: \"57.5%\" },\n  C19: { top: \"87.5%\", left: \"57.5%\" },\n  C1A: { top: \"95.0%\", left: \"57.5%\" },\n  C1B: { top: \"95.0%\", left: \"50.0%\" },\n\n  C20: { top: \"95.0%\", left: \"42.5%\" },\n  C21: { top: \"87.5%\", left: \"42.5%\" },\n  C22: { top: \"80.0%\", left: \"42.5%\" },\n  C23: { top: \"72.5%\", left: \"42.5%\" },\n  C24: { top: \"65.0%\", left: \"42.5%\" },\n  C25: { top: \"57.5%\", left: \"42.5%\" },\n\n  C26: { top: \"57.5%\", left: \"35.0%\" },\n  C27: { top: \"57.5%\", left: \"27.5%\" },\n  C28: { top: \"57.5%\", left: \"20.0%\" },\n  C29: { top: \"57.5%\", left: \"12.5%\" },\n  C2A: { top: \"57.5%\", left: \" 5.0%\" },\n  C2B: { top: \"50.0%\", left: \" 5.0%\" },\n\n  C30: { top: \"42.5%\", left: \" 5.0%\" },\n  C31: { top: \"42.5%\", left: \"12.5%\" },\n  C32: { top: \"42.5%\", left: \"20.0%\" },\n  C33: { top: \"42.5%\", left: \"27.5%\" },\n  C34: { top: \"42.5%\", left: \"35.0%\" },\n  C35: { top: \"42.5%\", left: \"42.5%\" },\n\n  C36: { top: \"35.0%\", left: \"42.5%\" },\n  C37: { top: \"27.5%\", left: \"42.5%\" },\n  C38: { top: \"20.0%\", left: \"42.5%\" },\n  C39: { top: \"12.5%\", left: \"42.5%\" },\n  C3A: { top: \" 5.0%\", left: \"42.5%\" },\n  C3B: { top: \" 5.0%\", left: \"50.0%\" },\n\n  H00: { top: \"12.5%\", left: \"50.0%\" },\n  H01: { top: \"20.0%\", left: \"50.0%\" },\n  H02: { top: \"27.5%\", left: \"50.0%\" },\n  H03: { top: \"35.0%\", left: \"50.0%\" },\n\n  H10: { top: \"50.0%\", left: \"87.5%\" },\n  H11: { top: \"50.0%\", left: \"80.0%\" },\n  H12: { top: \"50.0%\", left: \"72.5%\" },\n  H13: { top: \"50.0%\", left: \"65.0%\" },\n\n  H20: { top: \"87.5%\", left: \"50.0%\" },\n  H21: { top: \"80.0%\", left: \"50.0%\" },\n  H22: { top: \"72.5%\", left: \"50.0%\" },\n  H23: { top: \"65.0%\", left: \"50.0%\" },\n\n  H30: { top: \"50.0%\", left: \"12.5%\" },\n  H31: { top: \"50.0%\", left: \"20.0%\" },\n  H32: { top: \"50.0%\", left: \"27.5%\" },\n  H33: { top: \"50.0%\", left: \"35.0%\" },\n\n  S00: { top: \" 5.0%\", left: \"80.0%\" },\n  S01: { top: \"10.0%\", left: \"85.0%\" },\n  S02: { top: \"15.0%\", left: \"90.0%\" },\n  S03: { top: \"20.0%\", left: \"95.0%\" },\n\n  S10: { top: \"80.0%\", left: \"95.0%\" },\n  S11: { top: \"85.0%\", left: \"90.0%\" },\n  S12: { top: \"90.0%\", left: \"85.0%\" },\n  S13: { top: \"95.0%\", left: \"80.0%\" },\n\n  S20: { top: \"95.0%\", left: \"20.0%\" },\n  S21: { top: \"90.0%\", left: \"15.0%\" },\n  S22: { top: \"85.0%\", left: \"10.0%\" },\n  S23: { top: \"80.0%\", left: \" 5.0%\" },\n\n  S30: { top: \"20.0%\", left: \" 5.0%\" },\n  S31: { top: \"15.0%\", left: \"10.0%\" },\n  S32: { top: \"10.0%\", left: \"15.0%\" },\n  S33: { top: \" 5.0%\", left: \"20.0%\" },\n};\n\nconst Cell = styled.div<Props>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  position: absolute;\n  top: ${({ position }) => variants[position].top};\n  left: ${({ position }) => variants[position].left};\n  width: 7.5%;\n  height: 7.5%;\n  margin-top: -3.75%;\n  margin-left: -3.75%;\n\n  transition:\n    top 500ms ease-out,\n    left 500ms ease-out;\n`;\n\nexport default Cell;\n","import React from 'react';\n\nimport { BoardPosition, boardPositions } from '@seis/core';\nimport classes from './Board.module.css';\nimport Cell from '../Cell';\n\nconst Board: React.FC = ({ children }) => {\n  const renderCell = (position: BoardPosition) => {\n    return (\n      <Cell key={position} position={position}><div className={classes.cell} /></Cell>\n    )\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className=\"paint\">\n        <div className={classes.startRed} />\n        <div className={classes.startBlue} />\n        <div className={classes.startYellow} />\n        <div className={classes.startGreen} />\n        <div className={classes.homeRed} />\n        <div className={classes.homeBlue} />\n        <div className={classes.homeYellow} />\n        <div className={classes.homeGreen} />\n      </div>\n\n      <div className=\"cells\">\n        { boardPositions.map(renderCell) }\n      </div>\n\n      {children}\n\n      <div />\n    </div>\n  )\n};\n\nexport default Board;\n","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nimport { DiceValue } from '@seis/core';\nimport DiceIcon from './DiceIcon';\n\n\ninterface Props {\n  value: DiceValue,\n  seat: number,\n  random?: number,\n}\n\nconst DiceRoll = keyframes`\n  0% {\n    top: 100%;\n    left: 50%;\n    transform: scale(1.5) rotate(0deg);\n  }\n  100% {\n    top: var(--top, 50%);\n    left: var(--left, 50%);\n    transform: scale(1.0) rotate(var(--rotate, 1080deg));\n    animation-timing-function: ease-out;\n  }\n`;\n\n// By seat number\nconst variants = [\n  { color: \"#c62828\", top: \"27.5%\", left: \"72.5%\" },\n  { color: \"#1565c0\", top: \"72.5%\", left: \"72.5%\" },\n  { color: \"#ffab00\", top: \"72.5%\", left: \"27.5%\" },\n  { color: \"#288e3c\", top: \"27.5%\", left: \"27.5%\" },\n];\n\nconst Root = styled.div<Pick<Props, \"seat\">>`\n  --top: ${({ seat }) => variants[seat].top};\n  --left: ${({ seat }) => variants[seat].left};\n  top: var(--top);\n  left: var(--left);\n  position: absolute;\n  height: 8%;\n  width: 8%;\n  margin-top: -4%;\n  margin-left: -4%;\n  animation: ${DiceRoll} 800ms;\n  transform: scale(1.0) rotate(var(--rotate, 540deg));\n  border: solid 1px;\n  background-image: radial-gradient(\n    circle farthest-corner,\n    transparent 25%,\n    rgba(0, 0, 0, 0.35)\n  );\n  background-color: ${({ seat }) => variants[seat].color};\n  border-radius: 10%;\n  border-width: 10%;\n  border-color: ${({ seat }) => variants[seat].color};\n\n  & > svg {\n    height: 100%;\n    width: 100%;\n    fill: #f0f0f0;\n  }\n`\n\n/**\n * Display a single die on the board.\n *\n * This is rendered as a positioned SVG element. To ensure consistent animation,\n * the transitions are performed on an internal element.\n */\nconst Dice: React.FC<Props> = ({\n  value,\n  seat,\n  random = 0,\n}) => {\n  const style = {\n    '--rotate': `${Math.floor(1080 + (360 * random))}deg`,\n  } as React.CSSProperties;\n\n  return (\n    <Root seat={seat} style={style}>\n      <DiceIcon value={value} />\n    </Root>\n  )\n};\n\nexport default Dice;\n","import styled, { css } from 'styled-components';\n\n\ninterface Props {\n  seat: number,\n}\n\nconst PlayerName = styled.div<Props>`\n  position: absolute;\n  pointer-events: none;\n  font-size: calc(var(--board-unit) * 4);\n  font-family: Anton;\n  color: rgba(0, 0, 0, .75);\n  height: 8%;\n  width: 30%;\n  margin-top: -4%;\n  margin-left: -15%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ${props => {\n    switch (props.seat) {\n      case 0:\n        return css`\n          left: 82.5%;\n          top: 17.5%;\n          transform: rotate(45deg);\n        `;\n      case 1:\n        return css`\n          left: 82.5%;\n          top: 82.5%;\n          transform: rotate(-45deg);\n        `;\n      case 2:\n        return css`\n          left: 17.5%;\n          top: 82.5%;\n          transform: rotate(45deg);\n        `;\n      case 3:\n        return css`\n          left: 17.5%;\n          top: 17.5%;\n          transform: rotate(-45deg);\n        `;\n    }\n  }}\n`\n\nexport default PlayerName;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { BoardPosition } from '@seis/core';\nimport Cell from './Cell';\n\n\ntype Color = 'red' | 'blue' | 'yellow' | 'green';\ninterface StyledProps {\n  color: Color\n}\n\nconst StyledToken = styled.div<StyledProps>`\n  height: 80%;\n  width: 80%;\n  border-radius: 50%;\n  background-image:\n    radial-gradient(\n      circle at 65% 25%,\n      rgba(255, 255, 255, 0.5) 5%,\n      rgba(255, 255, 255, 0.0) 30%\n    ),\n    radial-gradient(\n      circle at 52% 45%,\n      rgba(0, 0, 0, 0) 60%,\n      rgba(0, 0, 0, 1) 80%\n    ),\n    radial-gradient(\n      circle at 65% 25%,\n      rgba(0, 0, 0, 0) 30%,\n      rgba(0, 0, 0, 0.25) 70%\n    );\n  background-color: ${props => (\n    {\n      red: '#c62828',\n      blue: '#1565c0',\n      yellow: '#ffab00',\n      green: '#388e3c',\n    }[props.color]\n  )};\n`\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  pos: BoardPosition,\n  seat: number,\n  action?: (pos: string) => void,\n}\n\nconst Token: React.FC<Props> = ({pos, seat, action, ...props}) => {\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    if (action) {\n      action(pos);\n    }\n  }\n\n  return (\n    <Cell position={pos} {...props}>\n      <StyledToken\n        color={['red', 'blue', 'yellow', 'green'][seat] as Color}\n        onClick={handleClick}\n      />\n    </Cell>\n  )\n}\n\nexport default Token;\n","import React, { useEffect, useReducer } from 'react';\n\nimport { calculateNextPosition, BoardPosition, Piece } from '@seis/core';\nimport Token from './Token';\n\ninterface Props {\n  pieces: Piece[];\n  action?: (pos: string) => void,\n}\n\nconst buildTrail = (from: BoardPosition, to: BoardPosition, seat: number, max: number = 80): BoardPosition[] => {\n  let i = 0;\n  const trail = [from];\n  while (trail[trail.length - 1] !== to && i++ < max) {\n    const next = calculateNextPosition(trail[trail.length - 1], seat);\n    if (next === \"INVALID_MOVE\") {\n      break;\n    }\n    trail.push(next);\n  }\n  if (trail[trail.length - 1] !== to) {\n    return [from, to]\n  }\n  return trail;\n}\n\nconst getNextPos = (current: BoardPosition, final: BoardPosition, seat: number): BoardPosition => {\n  const trail = buildTrail(current, final, seat);\n  return trail.length > 1 ? trail[1] : final;\n}\n\ninterface State {\n  i: number;\n  current: Piece[];\n  targets: Record<Piece[\"id\"], BoardPosition>;\n};\n\ninterface ResetAction {\n  type: 'reset';\n  payload: Piece[];\n};\n\ninterface StepAction {\n  type: 'step';\n  payload: any;\n};\n\ntype Action = ResetAction | StepAction;\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'reset':\n      return {\n        ...state,\n        i: state.i + 1,\n        current: action.payload.map(p => {\n          const current = state.current.find(x => x.id === p.id);\n\n          // New piece added to the board.\n          if (!current) {\n            return p;\n          }\n\n          // Target didn't change.\n          if (state.targets[p.id] === p.position) {\n            return current;\n          }\n\n          // This piece is being captured. Wait for it.\n          if (p.position[0] === \"S\") {\n            return current;\n          }\n\n          // Target changed. Advance the position.\n          return {\n            ...p,\n            position: getNextPos(current.position, p.position, p.seat)\n          };\n        }),\n        targets: Object.fromEntries(\n          action.payload.map(p => [p.id, p.position])\n        ),\n      };\n\n    case 'step':\n      return {\n        ...state,\n        i: state.i + 1,\n        current: state.current.map(p => {\n          const target = state.targets[p.id];\n\n          // Piece is at the target position.\n          if (p.position === target) {\n            return p;\n          }\n\n          // Piece will be captured. Delay this to a later phase.\n          if (target[0] === \"S\") {\n            return p;\n          }\n\n          // Advance the position by one.\n          const next = getNextPos(p.position, target, p.seat)\n          return {...p, position: next};\n        }).map((p, i, pieces) => {\n          // Process captures.\n          const target = state.targets[p.id];\n\n          // Not captured.\n          if (p.position === target || target[0] !== \"S\") {\n            return p;\n          }\n\n          // The capturing piece is in position.\n          const capturing = pieces.find(x => x.id !== p.id && x.position === p.position);\n          if (capturing) {\n            return {...p, position: target}\n          }\n\n          // Not yet.\n          return p;\n        }),\n      };\n  }\n\n  return state;\n};\n\nconst AnimatedTokenGroup: React.FC<Props> = ({pieces, action}) => {\n\n  const [state, dispatch] = useReducer(reducer, {i: 0, current: pieces, targets: {}});\n\n  useEffect(() => {\n    dispatch({type: 'reset', payload: pieces});\n  }, [pieces]);\n\n  const handleTransitionEnd = () => {\n    dispatch({type: 'step', payload: 'from handleTransitionEnd'});\n  };\n\n  return (\n    <>\n      { state.current.map(p => (\n        <Token\n          key={p.id}\n          seat={p.seat}\n          pos={p.position}\n          action={action}\n          onTransitionEnd={handleTransitionEnd}\n          style={{\n            zIndex: (p.position === state.targets[p.id]) ? 0 : 1\n          }}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default AnimatedTokenGroup;\n","import React from 'react';\n\nimport Board from './Board';\nimport Dice from '../Dice';\nimport PlayerName from '../PlayerName';\nimport AnimatedTokenGroup from '../AnimatedTokenGroup';\n\nimport {\n  Ctx,\n  IG,\n  getCurrentPlayer,\n  DiceValue,\n} from '@seis/core';\n\n\ninterface Props {\n  G: IG,\n  ctx: Ctx,\n  moves: any,\n  playerID?: string,\n  isActive: boolean,\n  gameMetadata: {id: number, name?: string}[]\n}\n\n\nconst BoardController: React.FC<Props> = ({\n  G,\n  ctx,\n  moves,\n  playerID,\n  isActive,\n  gameMetadata,\n}) => {\n  const currentPlayer = getCurrentPlayer(G, ctx);\n  return (\n    <Board>\n      { G.players.map(p => (\n        <PlayerName key={p.seat} seat={p.seat}>{p.name}</PlayerName>\n      ))}\n\n      <AnimatedTokenGroup\n        pieces={G.pieces}\n        action={isActive && G.dieRoll ? moves.movePiece : console.log}\n      />\n\n      { G.dieRoll && (\n        <Dice seat={currentPlayer?.seat as number} value={G.dieRoll as DiceValue} random={G.random} />\n      )}\n    </Board>\n  )\n}\n\nexport default BoardController;\n","import React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { GrFormPrevious } from \"react-icons/gr\";\n\nimport Controls from './GameControls';\nimport Board from './Board';\nimport lobby from './lobby';\n\n\nconst Container = styled.div`\n  --header-height: 60px;\n  --footer-height: 120px;\n  --board-unit: min(calc((var(--vh) * 100 - var(--header-height) - var(--footer-height)) / 100), var(--vw));\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  /* justify-content: space-between; */\n  height: calc(var(--vh) * 100);\n  margin: 0 auto;\n  width: calc(var(--board-unit) * 100);\n\n  @media (max-width: 420px) {\n    .container {\n      --footer-height: 150px;\n    }\n  }\n\n  & > header,\n  & > main,\n  & > footer {\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n  }\n  & > header {\n    height: var(--header-height);\n    width: 100%;\n    z-index: 1;\n  }\n  & > footer {\n    height: var(--footer-height);\n    z-index: 1;\n    flex-grow: 1;\n  }\n  & > main {\n    height: calc(var(--board-unit) * 100);\n    width: calc(var(--board-unit) * 100);\n  }\n`\n\nconst BackButton = styled.button`\n  height: 36px;\n  width: 36px;\n  font-size: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #ede7e3bb;\n  border: solid 4px #ede7e3;\n  border-radius: 50%;\n  color: #16697a;\n  transition: transform ease-in-out 120ms;\n  margin-left: 12px;\n  padding: 0;\n\n  &:hover {\n    transform: scale(1.25);\n  }\n  & > svg {\n    display: block;\n  }\n`;\n\n\nconst GameLayout = (props: any) => {\n  const match = useRouteMatch<{game_id: string}>(\"/games/:game_id\");\n  const history = useHistory();\n\n  const handleQuit= async (event: React.MouseEvent) => {\n    event.preventDefault();\n    const gameId =match?.params?.game_id;\n    if (gameId) {\n      // Don't wait for this to finish.\n      lobby.leaveGame(gameId);\n    }\n    history.push('/')\n  }\n\n  return (\n    <Container>\n      <header>\n        <BackButton onClick={handleQuit}>\n          <GrFormPrevious />\n        </BackButton>\n      </header>\n\n      <main>\n        <Board {...props} />\n      </main>\n\n      <footer>\n        <Controls {...props} />\n      </footer>\n    </Container>\n  );\n};\n\nexport default GameLayout;\n","import React from 'react';\nimport { Client } from 'boardgame.io/react';\nimport { Local } from 'boardgame.io/multiplayer';\n\nimport { Game, SeisBot } from '@seis/core';\nimport GameLayout from './GameLayout';\n\n\nconst Loading = () => <div />\n\nconst OfflineGame = () => {\n  const OfflineClient = Client({\n    game: Game,\n    board: GameLayout,\n    loading: Loading,\n    multiplayer: Local({\n      bots: { \"1\": SeisBot },\n    }),\n  });\n\n  return (\n    <OfflineClient playerID=\"0\" debug={false} />\n  )\n}\n\nexport default OfflineGame;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\n\n\nconst Backdrop = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 9;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\ninterface Props {\n  open?: boolean;\n}\n\nconst Overlay: React.FC<Props> = ({ open = false, children }) => {\n  return ReactDOM.createPortal(\n    open ? (\n      <Backdrop>{ children }</Backdrop>\n    ) : null,\n    document.body,\n  );\n};\n\nexport default Overlay;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport styled, { keyframes } from 'styled-components';\nimport Overlay from './Overlay';\n\n\nconst slideUp = keyframes`\n  from {\n    transform: translate3d(0, 100%, 0);\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\nconst Container = styled.div`\n  background: #f7f6e7;\n  color: #313638;\n  width: 100%;\n  border-radius: 8px;\n  border: solid 4px #f7f6e7;\n  overflow: hidden;\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n  width: 320px;\n  animation-name: ${slideUp};\n  animation-duration: 500ms;\n  animation-fill-mode: both;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    z-index: -1;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border: solid 2px #313638;\n    border-radius: 6px;\n  }\n`;\n\nconst Header = styled.header`\n  color: #0081a7;\n  font-family: ${props => props.theme.fonts.heading};\n  font-size: ${props => props.theme.fontSizes[2]}px;\n  padding: 8px 8px;\n  border-bottom: solid 1px #313638;\n`;\n\nconst Content = styled.div`\n  padding: 8px 8px;\n  font-family: ${props => props.theme.fonts.body};\n`;\n\ninterface Props {\n  open: boolean;\n  title: string;\n}\n\nconst Dialog: React.FC<Props> = ({ open, title, children }) => {\n  return ReactDOM.createPortal(\n    (\n      <Overlay open={open}>\n        <Container>\n          <Header>\n            { title }\n          </Header>\n          <Content>\n            {children}\n          </Content>\n        </Container>\n      </Overlay>\n    ),\n    document.body,\n  );\n};\n\nexport default Dialog;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { DeferFn, useAsync } from 'react-async';\n\nimport Button from './Button';\nimport Card from './Card';\nimport Overlay from './Overlay';\nimport lobby from './lobby';\n\n\nconst Container = styled.div`\n  width: 320px;\n`;\n\nconst Input = styled.input`\n  flex-grow: 1;\n  font-family: Anton;\n  font-size: ${props => props.theme.fontSizes[1]}px;\n  border: solid 2px #0081a7;\n  border-radius: 4px;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 4px 8px;\n  margin: 12px auto;\n`;\n\ntype GameProps = Partial<lobby.GameProps>\n\ninterface Props {\n  open: boolean\n  gameId: string\n  onChange: (props: GameProps) => void\n}\n\n\nconst joinGame: DeferFn<GameProps> = async ([roomId, name]) => {\n  const resp = await lobby.joinGame(roomId, name);\n  return { gameID: roomId, ...resp }\n}\n\n\nconst PreGameForm: React.FC<Props> = ({ open, gameId, onChange }) => {\n\n  const [name, setName] = React.useState<string>(\n    localStorage.getItem(\"name\") || \"\"\n  )\n\n  const joinState = useAsync<GameProps>({\n    deferFn: joinGame,\n    onResolve: onChange,\n  })\n\n  const handleJoin = () => {\n    localStorage.setItem(\"name\", name)\n    joinState.run(gameId, name)\n  };\n\n  const handleWatch = () => {\n    onChange({})\n  };\n\n  return (\n    <Overlay open={open}>\n      <Container>\n        <Card>\n          <Card.Title>Join Game</Card.Title>\n          <Card.Content>\n            <p>\n              Enter your name to join the game,\n              or choose to just watch.\n            </p>\n            <Input\n              autoFocus={true}\n              placeholder=\"Your name\"\n              value={name}\n              onChange={(e) => {setName(e.target.value)}}\n            />\n          </Card.Content>\n          <Card.Footer justifyContent=\"space-evenly\">\n            <Button disabled={name.length === 0} onClick={handleJoin}>Play</Button>\n            <Button onClick={handleWatch}>Watch</Button>\n          </Card.Footer>\n        </Card>\n      </Container>\n    </Overlay>\n  )\n}\n\nexport default PreGameForm;\n","import styled, { keyframes } from 'styled-components';\n\nconst rotate = keyframes`\n  0% {\n    border-top-color: #c62828;\n    transform: rotate(0deg);\n  }\n  25% {\n    border-top-color: #1565c0;\n    transform: rotate(360deg);\n  }\n  50% {\n    border-top-color: #ffab00;\n    transform: rotate(720deg);\n  }\n  75% {\n    border-top-color: #388e3c;\n    transform: rotate(1080deg);\n  }\n  100%; {\n    border-top-color: #c62828;\n    transform: rotate(1440deg);\n  }\n`\n\nconst Spinner = styled.div`\n  position: absolute;\n  height: 64px;\n  width: 64px;\n  border-radius: 50%;\n  animation: ${rotate} 4s linear infinite;\n  animation-delay: 200ms;\n  box-sizing: border-box;\n  border-width: 8px;\n  border-style: solid;\n  border-color: transparent;\n`\nexport default Spinner;\n","import React, { useState } from 'react';\nimport {\n  PromiseFn,\n  useAsync,\n} from 'react-async';\nimport { Client } from 'boardgame.io/react';\nimport { SocketIO } from 'boardgame.io/multiplayer';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\nimport { Game } from '@seis/core';\nimport GameLayout from './GameLayout';\nimport Button from './Button';\nimport Dialog from './Dialog';\nimport Overlay from './Overlay';\nimport PreGameForm from './PreGameForm';\nimport lobby from './lobby';\nimport Loading from './Loading';\n\n\nconst OnlineClient = Client({\n  game: Game,\n  board: GameLayout,\n  multiplayer: SocketIO({ server: lobby.baseUrl }),\n  loading: \"div\",\n});\n\ntype GameProps = Partial<lobby.GameProps>\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nconst loadGame: PromiseFn<lobby.RoomState> = async ({ gameID, setGameProps }) => {\n  await sleep(300);\n  const room = await lobby.getRoom(gameID);\n  const creds = lobby.findCredentials(gameID);\n  if (creds) {\n    console.log('found existing credentials')\n    setGameProps(creds);\n  } else {\n    console.log('no credentials')\n  }\n  return room;\n}\n\nconst OnlineGame = () => {\n  const history = useHistory();\n  const match = useRouteMatch<{game_id: string}>(\"/games/:game_id\");\n  const gameId = match?.params?.game_id as string;\n  const [gameProps, setGameProps] = useState<GameProps|null>(null);\n  const state = useAsync({\n    promiseFn: loadGame,\n    gameID: gameId,\n    setGameProps,\n  });\n  return (\n    <>\n      <OnlineClient\n        debug={false}\n        gameID={gameId}\n        { ...(gameProps !== null ? gameProps : {}) }\n      />\n\n      <Overlay open={state.isPending}>\n        <Loading />\n      </Overlay>\n\n      <Dialog open={state.isRejected} title=\"Game not found\">\n        <p>\n          The game you're trying to access wasn't found.\n          This probably means the game finished, or all players left.\n        </p>\n        <Button onClick={() => { history.push(\"/\") }}>Back</Button>\n      </Dialog>\n\n      <PreGameForm\n        open={state.isFulfilled && gameProps === null}\n        gameId={gameId}\n        onChange={setGameProps}\n      />\n    </>\n  )\n}\n\nexport default OnlineGame;\n","/**\n * Custom viewport unit support.\n * Adds custom properties to the root element in response to window resize.\n *\n * --vh = 1% of Viewport height (window.innerHeight)\n * --vw = 1% of Viewport width (window.innerWidth)\n * --vmin = Smaller of --vh or --vw\n * --vmax = Larger of --vh or --vw\n */\nimport React, { useEffect } from 'react';\n\nconst handleResize = () => {\n  const vh = window.innerHeight / 100;\n  const vw = window.innerWidth / 100;\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\n  document.documentElement.style.setProperty('--vw', `${vw}px`);\n  document.documentElement.style.setProperty('--vmin', `${Math.min(vh, vw)}px`);\n  document.documentElement.style.setProperty('--vmax', `${Math.max(vh, vw)}px`);\n}\n\nconst ViewPortUnits: React.FC = ({ children }) => {\n  useEffect(() => {\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return <>{ children }</>\n};\n\nexport default ViewPortUnits;\n","import React, { FunctionComponent } from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport { ThemeProvider } from 'styled-components';\n\nimport theme from './theme';\nimport Home from './Home';\nimport PlayOffline from './PlayOffline';\nimport PlayOnline from './PlayOnline';\nimport ViewPortUnits from './ViewPortUnits';\n\nimport './App.css';\n\nconst App: FunctionComponent = () => {\n  return (\n    <ViewPortUnits>\n      <ThemeProvider theme={theme}>\n        <Router>\n          <Switch>\n            <Route exact path=\"/games/:game_id\">\n              <PlayOnline />\n            </Route>\n\n            <Route exact path=\"/offline\">\n              <PlayOffline />\n            </Route>\n\n            <Route>\n              <Home />\n            </Route>\n          </Switch>\n        </Router>\n      </ThemeProvider>\n    </ViewPortUnits>\n  )\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Board_root__37s0h\",\"cell\":\"Board_cell__s1Ydb\",\"red\":\"Board_red__3LLzD\",\"blue\":\"Board_blue__1gkdI\",\"yellow\":\"Board_yellow__2DcCi\",\"green\":\"Board_green__2w_Zp\",\"start\":\"Board_start__1OOwc\",\"startRed\":\"Board_startRed__1zp78 Board_start__1OOwc Board_red__3LLzD\",\"startBlue\":\"Board_startBlue__2-Crl Board_start__1OOwc Board_blue__1gkdI\",\"startYellow\":\"Board_startYellow__3QUM6 Board_start__1OOwc Board_yellow__2DcCi\",\"startGreen\":\"Board_startGreen__2vE0K Board_start__1OOwc Board_green__2w_Zp\",\"homeRed\":\"Board_homeRed__2u7ZH Board_start__1OOwc Board_red__3LLzD\",\"homeBlue\":\"Board_homeBlue__1Sh4j Board_start__1OOwc Board_blue__1gkdI\",\"homeYellow\":\"Board_homeYellow__hFUxH Board_start__1OOwc Board_yellow__2DcCi\",\"homeGreen\":\"Board_homeGreen__YF1p7 Board_start__1OOwc Board_green__2w_Zp\"};","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.getValidMoves = exports.getPlayerBySeat = exports.getPlayerById = exports.getCurrentPlayer = exports.uniqueId = void 0;\nvar core_1 = require(\"boardgame.io/core\");\nvar plugins_1 = require(\"boardgame.io/plugins\");\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar board = __importStar(require(\"./board\"));\nfunction uniqueId(len) {\n    if (len === void 0) { len = 6; }\n    var base = 10;\n    return lodash_1[\"default\"].range(len).map(function () { return (Math.floor(Math.random() * base).toString(base)); }).join(\"\");\n}\nexports.uniqueId = uniqueId;\n/**\n * Roll the die. If passed a number 1-6, use that as the value,\n * otherwise, use a random die roll.\n */\nfunction rollDie(G, ctx, value) {\n    var _a;\n    var roll = value || ((_a = ctx.random) === null || _a === void 0 ? void 0 : _a.D6());\n    console.log(\"rollDie\", {\n        playerID: ctx.playerID,\n        value: roll\n    });\n    if (typeof G.dieRoll !== \"undefined\") {\n        return core_1.INVALID_MOVE;\n    }\n    return __assign(__assign({}, G), { dieRoll: roll });\n}\n/**\n * Pass to the next player, ending the turn.\n */\nfunction Pass(G, ctx) {\n    var _a;\n    console.log(\"Pass\", {\n        playerID: ctx.playerID\n    });\n    if (!((_a = ctx.events) === null || _a === void 0 ? void 0 : _a.endTurn)) {\n        throw new Error(\"ctx.events.endTurn is undefined\");\n    }\n    ctx.events.endTurn();\n    return __assign(__assign({}, G), { dieRoll: undefined });\n}\n/**\n * Selector to get the current player instance.\n */\nfunction getCurrentPlayer(G, ctx) {\n    var player = G.players.find(function (p) { return p.id === ctx.currentPlayer; });\n    if (player === undefined) {\n        return;\n        // throw Error(\"undefined player\");\n    }\n    return player;\n}\nexports.getCurrentPlayer = getCurrentPlayer;\n/**\n * Selector to get the current player instance.\n */\nfunction getPlayerById(G, playerId) {\n    var player = G.players.find(function (p) { return p.id === playerId; });\n    if (player === undefined) {\n        throw Error(\"undefined player\");\n    }\n    return player;\n}\nexports.getPlayerById = getPlayerById;\n/**\n * Selector to get a player by their seat number.\n */\nfunction getPlayerBySeat(G, seat) {\n    var player = G.players.find(lodash_1[\"default\"].matches({ seat: seat }));\n    if (player === undefined) {\n        throw Error(\"undefined player\");\n    }\n    return player;\n}\nexports.getPlayerBySeat = getPlayerBySeat;\n/**\n * Get a list of valid moves from the current game state.\n */\n// export function getValidMoves(G: IG, ctx: Ctx): Piece[] {\nfunction getValidMoves(G, ctx) {\n    if (typeof G.dieRoll === \"undefined\")\n        return [];\n    var currentPlayer = getPlayerById(G, ctx.currentPlayer);\n    return G.pieces\n        .map(function (piece) {\n        var nextPos = (piece.seat === currentPlayer.seat) ? (board.calculateMove(piece.position, G.dieRoll, G.pieces)) : core_1.INVALID_MOVE;\n        return { from: piece.position, to: nextPos };\n    })\n        .filter(function (move) { return move.to !== core_1.INVALID_MOVE; });\n}\nexports.getValidMoves = getValidMoves;\n/**\n * Move the piece at the given position.\n */\nfunction movePiece(G, ctx, position) {\n    var _a, _b;\n    console.log(\"movePiece\", {\n        playerID: ctx.playerID,\n        position: position\n    });\n    if (G.dieRoll === undefined) {\n        return core_1.INVALID_MOVE;\n    }\n    if (position === \"\") {\n        if (!((_a = ctx.events) === null || _a === void 0 ? void 0 : _a.endTurn)) {\n            throw new Error(\"ctx.events.endTurn is undefined\");\n        }\n        ctx.events.endTurn();\n        return __assign(__assign({}, G), { dieRoll: undefined });\n    }\n    var piece = G.pieces.find(function (p) { return p.position === position; });\n    if (!piece) {\n        return core_1.INVALID_MOVE;\n    }\n    if (!ctx.playerID) {\n        return core_1.INVALID_MOVE;\n    }\n    var currentPlayer = getPlayerById(G, ctx.playerID);\n    if (currentPlayer.seat !== piece.seat) {\n        return core_1.INVALID_MOVE;\n    }\n    var updates;\n    try {\n        updates = board.executeMove(position, G.dieRoll, G.pieces);\n    }\n    catch (error) {\n        return core_1.INVALID_MOVE;\n    }\n    if (!ctx.events || !ctx.events.endTurn) {\n        throw new Error(\"ctx.events is undefined\");\n    }\n    // The turn is over unless a 6 was rolled AND a move was made.\n    if (G.dieRoll < 6) {\n        if (!((_b = ctx.events) === null || _b === void 0 ? void 0 : _b.endTurn)) {\n            throw new Error(\"ctx.events.endTurn is undefined\");\n        }\n        ctx.events.endTurn();\n    }\n    return __assign(__assign({}, G), { dieRoll: undefined, pieces: G.pieces.map(function (p) { return (lodash_1[\"default\"].has(updates, p.position) ? __assign(__assign({}, p), { position: updates[p.position] }) : p); }) });\n}\n/**\n * Choose the seat for a player.\n */\nfunction ChooseSeat(G, ctx, seat, name) {\n    var _a;\n    name = name || \"Player \" + (seat + 1);\n    console.log(\"ChooseSeat\", {\n        playerID: ctx.playerID,\n        seat: seat,\n        name: name\n    });\n    if (G.players.some(function (p) { return p.seat === seat; })) {\n        return core_1.INVALID_MOVE;\n    }\n    if (typeof ctx.playerID !== \"string\") {\n        return core_1.INVALID_MOVE;\n    }\n    // First remove the player and pieces if they were previously placed.\n    var prev = G.players.find(function (p) { return p.id === ctx.playerID; });\n    if (prev) {\n        G.players = G.players.filter(function (p) { return p.id !== prev.id; });\n        G.pieces = G.pieces.filter(function (p) { return p.seat !== prev.seat; });\n    }\n    var colors = [\"red\", \"blue\", \"yellow\", \"green\"];\n    G.players.push({\n        seat: seat,\n        name: name,\n        id: ctx.playerID,\n        color: colors[seat]\n    });\n    (_a = G.pieces).push.apply(_a, ([0, 1, 2, 3].map(function (i) { return ({\n        id: seat * 4 + i,\n        seat: seat,\n        position: \"S\" + seat + i\n    }); })));\n    ctx.events.endTurn();\n}\n/**\n * Change the name for a player.\n */\nfunction ChangeName(G, ctx, name) {\n    if (typeof ctx.playerID !== \"string\") {\n        return core_1.INVALID_MOVE;\n    }\n    var player = G.players.find(function (p) { return p.id === ctx.playerID; });\n    if (!player) {\n        return core_1.INVALID_MOVE;\n    }\n    player.name = name;\n}\nvar SeisGame = {\n    name: \"seis\",\n    // setup: (): IG => INITIAL_STATE,\n    setup: function () { return ({ players: [], pieces: [], random: 0 }); },\n    phases: {\n        setup: {\n            turn: {\n                activePlayers: { all: core_1.Stage.NULL },\n                onMove: function (G, ctx) {\n                    var _a;\n                    return __assign(__assign({}, G), { random: (_a = ctx.random) === null || _a === void 0 ? void 0 : _a.Number() });\n                }\n            },\n            moves: { ChooseSeat: ChooseSeat, ChangeName: ChangeName },\n            start: true,\n            endIf: function (G, ctx) { return (G.players.length === ctx.numPlayers); },\n            next: 'play'\n        },\n        play: {\n            moves: {\n                rollDie: rollDie,\n                movePiece: movePiece,\n                Pass: Pass\n            },\n            turn: {\n                order: {\n                    first: function (G, ctx) { return 0; },\n                    next: function (G, ctx) { return (ctx.playOrderPos + 1) % ctx.numPlayers; },\n                    playOrder: function (G) { return (lodash_1[\"default\"].sortBy(G.players, ['seat']).map(function (p) { return p.id; })); }\n                },\n                onMove: function (G, ctx) {\n                    var _a;\n                    return __assign(__assign({}, G), { random: (_a = ctx.random) === null || _a === void 0 ? void 0 : _a.Number() });\n                }\n            }\n        }\n    },\n    plugins: [\n        plugins_1.PluginPlayer({ setup: function (playerID) { return ({}); } }),\n    ],\n    endIf: function (G, ctx) {\n        return G.players.find(function (player) {\n            return G.pieces.filter(function (piece) { return piece.seat === player.seat; }).every(function (piece) { return piece.position[0] === 'H'; });\n        });\n    },\n    ai: {\n        enumerate: function (G, ctx) {\n            if (ctx.phase == 'setup') {\n                return [\n                    { move: 'ChooseSeat', args: [2] }\n                ];\n            }\n            if (!G.dieRoll) {\n                return [{ move: 'rollDie', args: [] }];\n            }\n            var moves = getValidMoves(G, ctx);\n            if (moves.length === 0) {\n                return [{ move: 'Pass', args: [] }];\n            }\n            return moves.map(function (_a) {\n                var from = _a.from;\n                return ({ move: 'movePiece', args: [from] });\n            });\n        }\n    }\n};\nexports[\"default\"] = SeisGame;\n//# sourceMappingURL=game.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.executeMove = exports.calculateMove = exports.calculateNextPosition = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar core_1 = require(\"boardgame.io/core\");\nvar BoardLocationType;\n(function (BoardLocationType) {\n    BoardLocationType[\"CIRCUIT\"] = \"C\";\n    BoardLocationType[\"HOME\"] = \"H\";\n    BoardLocationType[\"START\"] = \"S\";\n})(BoardLocationType || (BoardLocationType = {}));\nvar NUM_SEATS = 4;\nfunction encode(type, seat, index) {\n    return (type + seat.toString(16) + index.toString(16)).toUpperCase();\n}\nfunction decode(position) {\n    return {\n        type: position[0],\n        seat: parseInt(position[1], 16),\n        index: parseInt(position[2], 16)\n    };\n}\nvar Home = lodash_1[\"default\"].curry(encode)(BoardLocationType.HOME);\nvar Circuit = lodash_1[\"default\"].curry(encode)(BoardLocationType.CIRCUIT);\nvar Start = lodash_1[\"default\"].curry(encode)(BoardLocationType.START);\n/**\n * Calculate the next position (N+1) for a token with the given seat position.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nfunction calculateNextPosition(fromPos, activeSeat) {\n    var current = decode(fromPos);\n    if (isStart(fromPos)) {\n        return Circuit(current.seat, 0);\n    }\n    if (isCircuit(fromPos)) {\n        if (current.index < 11) {\n            return Circuit(current.seat, current.index + 1);\n        }\n        var nextSeat = (current.seat + 1) % NUM_SEATS;\n        if (nextSeat === activeSeat) {\n            return Home(nextSeat, 0);\n        }\n        return Circuit(nextSeat, 0);\n    }\n    if (isHome(fromPos) && current.index < 3) {\n        return Home(current.seat, current.index + 1);\n    }\n    return core_1.INVALID_MOVE;\n}\nexports.calculateNextPosition = calculateNextPosition;\n/**\n * Calculate the next position for a token moving `roll` positions.\n *\n * Returns INVALID_MOVE if the move would be invalid.\n */\nfunction calculateMove(fromPos, roll, pieces) {\n    var piece = pieces.find(function (p) { return p.position === fromPos; });\n    if (typeof piece === \"undefined\")\n        throw new Error(\"No piece in that position\");\n    // only a 1 or a 6 can get you out of the start position.\n    if (isStart(fromPos) && ![1, 6].includes(roll)) {\n        return core_1.INVALID_MOVE;\n    }\n    var nextPos;\n    try {\n        nextPos = lodash_1[\"default\"].range(roll).reduce(function (acc, cur) {\n            var next = calculateNextPosition(acc, piece.seat);\n            if (next === core_1.INVALID_MOVE)\n                throw core_1.INVALID_MOVE;\n            if (isPassing(pieces, piece.seat, next))\n                throw core_1.INVALID_MOVE;\n            return next;\n        }, fromPos);\n        if (nextPos === fromPos)\n            return fromPos;\n    }\n    catch (error) {\n        return core_1.INVALID_MOVE;\n    }\n    if (isSafety(nextPos) && pieces.find(function (p) { return nextPos === p.position; })) {\n        return core_1.INVALID_MOVE;\n    }\n    return nextPos;\n}\nexports.calculateMove = calculateMove;\n/**\n * Perform the given move, returning an updated list of pieces.\n */\nfunction executeMove(fromPos, roll, pieces) {\n    var nextPos = calculateMove(fromPos, roll, pieces);\n    if (nextPos === core_1.INVALID_MOVE) {\n        throw new Error(\"invalid move\");\n    }\n    var updates = {};\n    updates[fromPos] = nextPos;\n    var captured = pieces.find(lodash_1[\"default\"].matches({ position: nextPos }));\n    if (captured) {\n        updates[captured.position] = findStartPosition(pieces, captured.seat);\n    }\n    return updates;\n}\nexports.executeMove = executeMove;\n/**\n * Find an unoccupied START location to return the captured piece to.\n */\nfunction findStartPosition(pieces, seat) {\n    var pos = lodash_1[\"default\"].first(lodash_1[\"default\"].difference(lodash_1[\"default\"].range(4).map(function (i) { return Start(seat, i); }), pieces.map(function (p) { return p.position; })));\n    if (!pos)\n        throw new Error(\"cannot capture\");\n    return pos;\n}\nfunction isSafety(position) {\n    return position[0].toUpperCase() === \"C\" && position[2] === \"5\";\n}\nfunction isCircuit(position) {\n    return position[0].toUpperCase() === \"C\";\n}\nfunction isHome(position) {\n    return position[0].toUpperCase() === \"H\";\n}\nfunction isStart(position) {\n    return position[0].toUpperCase() === \"S\";\n}\nfunction isPassing(pieces, seat, nextPos) {\n    return pieces.some(lodash_1[\"default\"].matches({ position: nextPos, seat: seat }));\n}\n//# sourceMappingURL=board.js.map"],"sourceRoot":""}