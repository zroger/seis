(this.webpackJsonpseis=this.webpackJsonpseis||[]).push([[0],{118:function(e,t,a){e.exports={container:"layout_container__Ml8q0"}},120:function(e,t,a){e.exports=a.p+"static/media/purty-wood.658fa9bd.png"},135:function(e,t,a){e.exports=a(183)},140:function(e,t,a){},179:function(e,t){},182:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o);a(140),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(61),l=a(20),s=a(38),u=a(16),d=a(8),m=a.n(d),f=a(34),p=a(11),y=a(75),x=a(66),v="10.0.1.27"===window.location.hostname?"http://10.0.1.27:8000":"https://seis-game.herokuapp.com";function h(e){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+"/games/seis/create",{method:"POST",body:JSON.stringify({numPlayers:t,unlisted:!0}),headers:{"Content-Type":"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("HTTP status "+a.status);case 5:return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n.gameID);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+"/games/seis/"+t);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Room ".concat(t," not found"));case 5:return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,a){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(m.a.mark((function e(t,a,n){var r,o,c,i,l,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attempting to join room ".concat(t)),e.next=3,g(t);case 3:if(r=e.sent,1!==(o=r.players.filter((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.clientId)===n.clientId}))).length){e.next=8;break}return console.log("previously joined room ".concat(t," at seat ").concat(o[0].id)),e.abrupt("return",""+o[0].id);case 8:if(!(o.length>1)){e.next=12;break}return console.warn("previously joined room ".concat(t," in ").concat(o.length," seats")),e.next=12,w(t,n);case 12:return e.next=14,g(t);case 14:r=e.sent,c=r.players.filter((function(e){return!e.name})),console.log("found ".concat(c.length," open seats in room ").concat(t)),i=Object(x.a)(c),e.prev=18,i.s();case 20:if((l=i.n()).done){e.next=34;break}return s=l.value,console.log("attempting to join at seat ".concat(s.id)),e.next=25,fetch("".concat(v,"/games/seis/").concat(t,"/join"),{method:"POST",body:JSON.stringify({playerID:s.id,playerName:a,data:{clientId:n.clientId}}),headers:{"Content-Type":"application/json","bgio-credentials":n.credentials}});case 25:if(!e.sent.ok){e.next=31;break}return console.log("successfully joined at seat ".concat(s.id)),e.abrupt("return",""+s.id);case 31:console.log("unable to join at seat ".concat(s.id));case 32:e.next=20;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(18),i.e(e.t0);case 39:return e.prev=39,i.f(),e.finish(39);case 42:throw console.log("unable to join any seat"),new Error("Unable to join room");case 44:case"end":return e.stop()}}),e,null,[[18,36,39,42]])})))).apply(this,arguments)}function w(e,t){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(m.a.mark((function e(t,a){var n,r,o,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:n=e.sent,r=n.players.filter((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.clientId)===a.clientId})),o=Object(x.a)(r),e.prev=5,o.s();case 7:if((c=o.n()).done){e.next=14;break}return i=c.value,console.log("leaving seat ".concat(i.id," of room ").concat(t)),e.next=12,fetch("".concat(v,"/games/seis/").concat(t,"/leave"),{method:"POST",body:JSON.stringify({playerID:i.id,credentials:a.credentials}),headers:{"Content-Type":"application/json"}});case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))).apply(this,arguments)}var S,k=a(237),j=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.a)(t,1),n=a[0],e.next=3,h(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=e.numPlayers,a=e.onSuccess,o=e.children,c=Object(u.a)(e,["numPlayers","onSuccess","children"]),i=Object(y.a)({deferFn:j});return Object(n.useEffect)((function(){a&&i.data&&a(i.data)}),[i.data,a]),r.a.createElement(k.a,Object.assign({},c,{disabled:i.isPending,onClick:function(e){e.preventDefault(),i.run(t)}}),o)},I=a(229),N=a(123),G=a(227),D=a(83),H=a(228),R=Object(G.a)((function(e){return{main:{display:"flex",flexFlow:"column nowrap",alignItems:"center"},title:{fontFamily:'"Rye", cursive',color:"#ffcc80",fontSize:"3rem",padding:e.spacing(2,0)},button:{display:"block",margin:e.spacing(2,"auto"),minWidth:"50%",backgroundImage:"linear-gradient(300deg, ".concat(D.a[100]," 0%, ").concat(D.a[200]," 100%)"),color:H.a[900],fontFamily:'"Rye", cursive',fontSize:"1.5rem",boxShadow:e.shadows[2]}}})),T=function(){var e=R(),t=Object(l.f)(),a=function(e){var a="string"===typeof e?e:e.roomID;t.push("/games/".concat(a))};return r.a.createElement("div",null,r.a.createElement(I.a,{className:e.main,component:"main",maxWidth:"xs"},r.a.createElement(N.a,{variant:"h1",className:e.title},"seis"),r.a.createElement(N.a,{variant:"body2",align:"center"},"Play seis online with friends.",r.a.createElement("br",null),"Start a game and share the link."),[2,3,4].map((function(t){return r.a.createElement(B,{key:t,className:e.button,onSuccess:a,numPlayers:t},t," players")}))))},F=a(81),M=a(84),P=a(236),Y=a(231),A=a(235),L=a(233),W=a(234),J=a(232),U=a(17),X=a(3),q=a(2),z=a(117),V=a(9),K=a.n(V);!function(e){e.CIRCUIT="C",e.HOME="H",e.START="S"}(S||(S={}));function Z(e,t,a){return(e+t.toString(16)+a.toString(16)).toUpperCase()}var Q=K.a.curry(Z)(S.HOME),$=K.a.curry(Z)(S.CIRCUIT),ee=K.a.curry(Z)(S.START);function te(e,t){var a,n={type:(a=e)[0],seat:parseInt(a[1],16),index:parseInt(a[2],16)};if(re(e))return $(n.seat,0);if(function(e){return"C"===e[0].toUpperCase()}(e)){if(n.index<11)return $(n.seat,n.index+1);var r=(n.seat+1)%4;return r===t?Q(r,0):$(r,0)}return function(e){return"H"===e[0].toUpperCase()}(e)&&n.index<3?Q(n.seat,n.index+1):q.f}function ae(e,t,a){var n,r,o=a.find((function(t){return t.position===e}));if("undefined"===typeof o)throw new Error("No piece in that position");if(re(e)&&![1,6].includes(t))return q.f;try{if((n=K.a.range(t).reduce((function(e,t){var n=te(e,o.seat);if(n===q.f)throw q.f;if(function(e,t,a){return e.some(K.a.matches({position:a,seat:t}))}(a,o.seat,n))throw q.f;return n}),e))===e)return e}catch(c){return q.f}return"C"===(r=n)[0].toUpperCase()&&"5"===r[2]&&a.find((function(e){return n===e.position}))?q.f:n}function ne(e,t,a){var n=ae(e,t,a);if(n===q.f)throw new Error("invalid move");var r={};r[e]=n;var o=a.find(K.a.matches({position:n}));return o&&(r[o.position]=function(e,t){var a=K.a.first(K.a.difference(K.a.range(4).map((function(e){return ee(t,e)})),e.map((function(e){return e.position}))));if(!a)throw new Error("cannot capture");return a}(a,o.seat)),r}function re(e){return"S"===e[0].toUpperCase()}function oe(e,t){var a=e.players.find((function(e){return e.id===t.currentPlayer}));if(void 0!==a)return a}var ce={name:"seis",setup:function(){return{players:[],pieces:[],random:0}},phases:{setup:{turn:{activePlayers:{all:q.B.NULL},onMove:function(e,t){var a;return Object(X.a)({},e,{random:null===(a=t.random)||void 0===a?void 0:a.Number()})}},moves:{ChooseSeat:function(e,t,a,n){var r;if(console.log("ChooseSeat",{playerID:t.playerID,seat:a,name:n}),e.players.some((function(e){return e.seat===a})))return q.f;if("string"!==typeof t.playerID)return q.f;var o=e.players.find((function(e){return e.id===t.playerID}));o&&(e.players=e.players.filter((function(e){return e.id!==o.id})),e.pieces=e.pieces.filter((function(e){return e.seat!==o.seat}))),e.players.push({seat:a,name:n,id:t.playerID,color:["red","blue","yellow","green"][a]}),(r=e.pieces).push.apply(r,Object(U.a)([0,1,2,3].map((function(e){return{id:4*a+e,seat:a,position:"S".concat(a).concat(e)}}))))},ChangeName:function(e,t,a){if("string"!==typeof t.playerID)return q.f;var n=e.players.find((function(e){return e.id===t.playerID}));if(!n)return q.f;n.name=a}},start:!0,endIf:function(e,t){return e.players.length===t.numPlayers},next:"play"},play:{moves:{rollDie:function(e,t,a){var n,r=a||(null===(n=t.random)||void 0===n?void 0:n.D6());return console.log("rollDie",{playerID:t.playerID,value:r}),"undefined"!==typeof e.dieRoll?q.f:Object(X.a)({},e,{dieRoll:r})},movePiece:function(e,t,a){if(void 0===e.dieRoll)return q.f;if(""===a){var n;if(!(null===(n=t.events)||void 0===n?void 0:n.endTurn))throw new Error("ctx.events.endTurn is undefined");return t.events.endTurn(),Object(X.a)({},e,{dieRoll:void 0})}var r;try{r=ne(a,e.dieRoll,e.pieces)}catch(c){return q.f}if(!t.events||!t.events.endTurn)throw new Error("ctx.events is undefined");if(e.dieRoll<6){var o;if(!(null===(o=t.events)||void 0===o?void 0:o.endTurn))throw new Error("ctx.events.endTurn is undefined");t.events.endTurn()}return Object(X.a)({},e,{dieRoll:void 0,pieces:e.pieces.map((function(e){return K.a.has(r,e.position)?Object(X.a)({},e,{position:r[e.position]}):e}))})},Pass:function(e,t){var a;if(console.log("Pass",{playerID:t.playerID}),!(null===(a=t.events)||void 0===a?void 0:a.endTurn))throw new Error("ctx.events.endTurn is undefined");return t.events.endTurn(),Object(X.a)({},e,{dieRoll:void 0})}},turn:{order:{first:function(e,t){return 0},next:function(e,t){return(t.playOrderPos+1)%t.numPlayers},playOrder:function(e){return K.a.sortBy(e.players,["seat"]).map((function(e){return e.id}))}},onMove:function(e,t){var a;return Object(X.a)({},e,{random:null===(a=t.random)||void 0===a?void 0:a.Number()})}}}},plugins:[Object(z.a)({setup:function(e){return{}}})],endIf:function(e,t){return e.players.find((function(t){return e.pieces.filter((function(e){return e.seat===t.seat})).every((function(e){return"H"===e.position[0]}))}))}},ie=a(118),le=a.n(ie),se=a(29),ue=a(6),de=a(94),me=a.n(de),fe=a(43),pe=function(e){var t=e.action,a=e.color,n=void 0===a?"default":a,o=e.disabled,c=void 0!==o&&o,i=e.className,l=e.children,s=Object(u.a)(e,["action","color","disabled","className","children"]),d=!!t&&!c;return r.a.createElement(fe.a.div,Object.assign({className:Object(ue.a)(me.a[n],i,Object(se.a)({},me.a.disabled,c)),onClick:function(){t&&!c&&t()},whileHover:d?{scale:1.5}:{}},s),l)},ye=function(e){var t=e.value,a=Object(u.a)(e,["value"]),n=function(e,t){return r.a.createElement("circle",{cx:e,cy:t,r:"2"})};return r.a.createElement("svg",Object.assign({viewBox:"-10 -10 20 20"},a),[1,3,5].includes(t)&&n(0,0),[2,3,4,5,6].includes(t)&&n(-6,-6),[4,5,6].includes(t)&&n(6,-6),[4,5,6].includes(t)&&n(-6,6),[2,3,4,5,6].includes(t)&&n(6,6),[6].includes(t)&&n(0,-6),[6].includes(t)&&n(0,6))},xe=function(e){var t=e.action,a=e.value,n=e.color,o=void 0===n?"default":n,c=e.disabled,i=void 0!==c&&c,l=e.animate,s=void 0!==l&&l,d=e.className,m=e.random,f=void 0===m?0:m;Object(u.a)(e,["action","value","color","disabled","animate","className","random"]);return r.a.createElement(pe,{className:d,action:t?function(){t&&!i&&t(a)}:void 0,disabled:i,color:o,initial:!!s&&{scale:0},animate:s?{scale:[null,1.5,1],rotate:[null,360*(1+f)/2,360*(1+f)],transition:{ease:["easeIn","linear","easeOut"]}}:void 0},r.a.createElement(ye,{value:a}))},ve=a(39),he=a.n(ve),Ee=["red","blue","yellow","green"],ge=function(e){var t=e.G,a=e.ctx,n=e.moves,o=e.playerID,c=e.isActive,i=e.gameMetadata,l=oe(t,a);return r.a.createElement("div",{className:he.a.root},r.a.createElement("div",{className:he.a.info},a.gameover&&"Game Over","play"===a.phase&&c&&"Your turn","play"===a.phase&&!c&&"".concat(null===l||void 0===l?void 0:l.name,"'s turn"),"setup"===a.phase&&c&&"Choose your color","setup"===a.phase&&!c&&"Waiting for other players"),r.a.createElement("div",{className:he.a.main},a.gameover&&r.a.createElement("div",{className:he.a.gameover},a.gameover.name," wins!"),"play"===a.phase&&r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{className:he.a.roll,action:n.rollDie,disabled:!c||!!t.dieRoll},"ROLL"),[1,2,3,4,5,6].map((function(e){return r.a.createElement(xe,{key:e,className:he.a["dice"+e],action:n.rollDie,value:e,disabled:!c||!!t.dieRoll})})),r.a.createElement(pe,{className:he.a.pass,action:n.Pass,disabled:!c},"PASS")),"setup"===a.phase&&c&&Ee.map((function(e,a){return r.a.createElement(xe,{className:he.a.dice,action:function(){var e=i.find((function(e){return""+e.id===o}));n.ChooseSeat(a,(null===e||void 0===e?void 0:e.name)||"Player  ".concat(a+1))},value:a+1,color:e,disabled:!!t.players.find((function(e){return e.seat===a}))})}))))},be=a(121),_e=a(119),Ce=a.n(_e);function we(e,t){return K.a.range(t).map((function(){return Math.floor(Math.random()*e).toString(e)})).join("")}K.a.curry(we)(10);var Oe=K.a.curry(we)(16);function Se(){var e=localStorage.getItem("creds");return e||(e=Oe(16),localStorage.setItem("creds",e)),{credentials:e,clientId:Ce()(e)}}var ke=a(95),je=a.n(ke),Be=function(e){var t=Object(l.g)("/games/:game_id"),a=Object(l.f)(),n=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o=Se(),w(null===t||void 0===t||null===(r=t.params)||void 0===r?void 0:r.game_id,o).catch((function(e){return console.error(e)})),a.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:je.a.title},"seis"),r.a.createElement("button",{className:je.a.exit,onClick:n},r.a.createElement(be.a,null)))},Ie=function(){var e=window.innerHeight/100,t=window.innerWidth/100;document.documentElement.style.setProperty("--vh","".concat(e,"px")),document.documentElement.style.setProperty("--vw","".concat(t,"px")),document.documentElement.style.setProperty("--vmin","".concat(Math.min(e,t),"px")),document.documentElement.style.setProperty("--vmax","".concat(Math.max(e,t),"px"))},Ne=function(e){var t=e.children;return Object(n.useEffect)((function(){return Ie(),window.addEventListener("resize",Ie),function(){window.removeEventListener("resize",Ie)}}),[]),r.a.createElement(r.a.Fragment,null,t)},Ge={S00:{x:180,y:-120},S01:{x:160,y:-140},S02:{x:140,y:-160},S03:{x:120,y:-180},S10:{x:120,y:180},S11:{x:140,y:160},S12:{x:160,y:140},S13:{x:180,y:120},S20:{x:-180,y:120},S21:{x:-160,y:140},S22:{x:-140,y:160},S23:{x:-120,y:180},S30:{x:-120,y:-180},S31:{x:-140,y:-160},S32:{x:-160,y:-140},S33:{x:-180,y:-120},C00:{x:30,y:-180},C01:{x:30,y:-150},C02:{x:30,y:-120},C03:{x:30,y:-90},C04:{x:30,y:-60},C05:{x:30,y:-30},C06:{x:60,y:-30},C07:{x:90,y:-30},C08:{x:120,y:-30},C09:{x:150,y:-30},C0A:{x:180,y:-30},C0B:{x:180,y:0},C10:{x:180,y:30},C11:{x:150,y:30},C12:{x:120,y:30},C13:{x:90,y:30},C14:{x:60,y:30},C15:{x:30,y:30},C16:{x:30,y:60},C17:{x:30,y:90},C18:{x:30,y:120},C19:{x:30,y:150},C1A:{x:30,y:180},C1B:{x:0,y:180},C20:{x:-30,y:180},C21:{x:-30,y:150},C22:{x:-30,y:120},C23:{x:-30,y:90},C24:{x:-30,y:60},C25:{x:-30,y:30},C26:{x:-60,y:30},C27:{x:-90,y:30},C28:{x:-120,y:30},C29:{x:-150,y:30},C2A:{x:-180,y:30},C2B:{x:-180,y:0},C30:{x:-180,y:-30},C31:{x:-150,y:-30},C32:{x:-120,y:-30},C33:{x:-90,y:-30},C34:{x:-60,y:-30},C35:{x:-30,y:-30},C36:{x:-30,y:-60},C37:{x:-30,y:-90},C38:{x:-30,y:-120},C39:{x:-30,y:-150},C3A:{x:-30,y:-180},C3B:{x:0,y:-180},H00:{x:0,y:-150},H01:{x:0,y:-120},H02:{x:0,y:-90},H03:{x:0,y:-60},H10:{x:150,y:0},H11:{x:120,y:0},H12:{x:90,y:0},H13:{x:60,y:0},H20:{x:0,y:150},H21:{x:0,y:120},H22:{x:0,y:90},H23:{x:0,y:60},H30:{x:-150,y:0},H31:{x:-120,y:0},H32:{x:-90,y:0},H33:{x:-60,y:0}},De=a(120),He=a.n(De),Re=Object(s.b)((function(e){return{root:{display:"block",height:"calc(var(--board-unit, 0.9vmin) * 100)",width:"calc(var(--board-unit, 0.9vmin) * 100)",backgroundColor:"#f0c7af",backgroundImage:"radial-gradient(circle farthest-corner at center, transparent 50%, rgba(0,0,0,0.25)), url(".concat(He.a,")"),backgroundSize:"contain",boxShadow:"0 5px 5px black"},paint0:{fill:e.seats[0].paint,fillOpacity:.4},paint1:{fill:e.seats[1].paint,fillOpacity:.4},paint2:{fill:e.seats[2].paint,fillOpacity:.4},paint3:{fill:e.seats[3].paint,fillOpacity:.4}}})),Te=function(e){var t=Ge[e];return r.a.createElement("circle",{cx:t.x,cy:t.y,r:10,fill:"url('#cellGradient')"})},Fe=function(e){var t=e.showGrid,a=void 0!==t&&t,n=e.children,o=Object(s.c)(),c=Re(o);return r.a.createElement("svg",{viewBox:"-200 -200 400 400",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:c.root},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"buttonGradient",gradientTransform:"rotate(70)"},r.a.createElement("stop",{offset:"0%",stopColor:"#ffcdd2"}),r.a.createElement("stop",{offset:"100%",stopColor:"#d32f2f"})),r.a.createElement("radialGradient",{id:"cellGradient",fx:"30%",fy:"70%"},r.a.createElement("stop",{offset:"0%",stopColor:"black",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"80%",stopColor:"black",stopOpacity:"0.4"})),r.a.createElement("radialGradient",{id:"boardGradient"},r.a.createElement("stop",{offset:"50%",stopColor:"transparent"}),r.a.createElement("stop",{offset:"100%",stopColor:"black",stopOpacity:"0.25"})),r.a.createElement("radialGradient",{id:"tokenGradient1",fx:"70%",fy:"25%"},r.a.createElement("stop",{offset:"15%",stopColor:"#ffffff",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"20%",stopColor:"transparent",stopOpacity:"0.0"}),r.a.createElement("stop",{offset:"80%",stopColor:"#000000",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0.5"})),r.a.createElement("radialGradient",{id:"shadowGradient1"},r.a.createElement("stop",{offset:"50%",stopColor:"#000000",stopOpacity:"1"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0"}))),a&&r.a.createElement("g",{pointerEvents:"none"},K.a.range(-210,210,6).map((function(e){return r.a.createElement("line",{key:e,x1:"-200",y1:e,x2:"200",y2:e,stroke:e%30===0?"#9e9e9e":"#bdbdbd"})})),K.a.range(-210,210,6).map((function(e){return r.a.createElement("line",{key:e,x1:e,y1:"-200",x2:e,y2:"200",stroke:e%30===0?"#9e9e9e":"#bdbdbd"})}))),r.a.createElement("g",{pointerEvents:"none",className:c.paint0},r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(0) translate(0 -105)"}),r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(45) translate(0 -211)"})),r.a.createElement("g",{pointerEvents:"none",className:c.paint1},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(135) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(90) translate(0 -105)"})),r.a.createElement("g",{pointerEvents:"none",className:c.paint2},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(225) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(180) translate(0 -105)"})),r.a.createElement("g",{pointerEvents:"none",className:c.paint3},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(315) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(270) translate(0 -105)"})),r.a.createElement("g",null,K.a.keys(Ge).map(Te)),n)},Me=function(e){var t=e.value,a=e.seat,o=e.random,c=Object(s.c)(),i=Object(n.useRef)(K.a.uniqueId("DiceGradient")),l=Object(n.useRef)(Math.random());o=o||l.current;var u=c.seats[a],d=[70,70,-100,-100][a],m=[-100,70,70,-100][a];return r.a.createElement(fe.a.svg,{initial:{scale:0},style:{x:d,y:m},animate:{scale:[null,1.5,1],rotate:[null,360,360*(2+Math.random())],transition:{ease:["easeIn","linear","easeOut"]}}},r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:i.current},r.a.createElement("stop",{offset:"25%",stopColor:"transparent"}),r.a.createElement("stop",{offset:"100%",stopColor:"black",stopOpacity:"0.25"}))),r.a.createElement("rect",{fill:u.diceBg,height:30,width:30,rx:5}),r.a.createElement("rect",{fill:'url("#'.concat(i.current,'")'),height:30,width:30,rx:5}),r.a.createElement(ye,{value:t,height:30,width:30,fill:u.diceFg}),r.a.createElement("rect",{height:30,width:30,rx:5,stroke:u.diceBg,strokeWidth:1,fill:"transparent"}))},Pe=function(e){var t=e.seat,a=e.name,n=["rotate(45) translate(0 -195)","rotate(-45) translate(0 170)","rotate(45) translate(0 170)","rotate(-45) translate(0 -195)"][t];return r.a.createElement("text",{x:0,y:15,pointerEvents:"none",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Rye",fill:"black",fillOpacity:"0.8",transform:n},a)},Ye=function(e){var t=e.pos,a=e.seat,o=e.action,c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=t}),[c,t]);var i=c.current,l=i&&i!==t?function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=0,o=[e];o[o.length-1]!==t&&r++<n;){var c=te(o[o.length-1],a);if("INVALID_MOVE"===c)break;o.push(c)}return o[o.length-1]!==t?[e,t]:o}(i,t,a):[t],u=l.length>1?{attrX:l.map((function(e){return Ge[e].x-12})),attrY:l.map((function(e){return Ge[e].y-14})),transition:{duration:Math.max(1,l.length/2),ease:"easeOut"}}:{attrX:Ge[t].x-12,attrY:Ge[t].y-14},d=K.a.uniqueId("TokenGradient"),m=K.a.uniqueId("ShadowGradient"),f=Object(s.c)();return r.a.createElement(fe.a.svg,{viewBox:"-10 -10 20 20",x:"0",y:"0",height:24,width:24,animate:u,initial:{attrX:Ge[t].x-12,attrY:Ge[t].y-14},fill:f.seats[a].diceBg,onClick:function(e){e.preventDefault(),o&&o(t)}},r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:d,fx:"70%",fy:"25%"},r.a.createElement("stop",{offset:"15%",stopColor:"#ffffff",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"20%",stopColor:"transparent",stopOpacity:"0.0"}),r.a.createElement("stop",{offset:"80%",stopColor:"#000000",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0.5"})),r.a.createElement("radialGradient",{id:m},r.a.createElement("stop",{offset:"50%",stopColor:"#000000",stopOpacity:"1"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0"}))),r.a.createElement("ellipse",{fill:'url("#'.concat(m,'")'),cx:"0",cy:"8",rx:"10",ry:"2"}),r.a.createElement("circle",{cx:"0",cy:"0",r:"10"}),r.a.createElement("circle",{fill:'url("#'.concat(d,'")'),cx:"0",cy:"0",r:"10"}))},Ae=function(e){var t=e.G,a=e.ctx,n=e.moves,o=(e.playerID,e.isActive),c=(e.gameMetadata,oe(t,a));return r.a.createElement(Fe,null,t.players.map((function(e){return r.a.createElement(Pe,{key:e.seat,seat:e.seat,name:e.name})})),t.pieces.map((function(e){return r.a.createElement(Ye,{key:e.id,seat:e.seat,pos:e.position,action:o&&t.dieRoll?n.movePiece:console.log})})),t.dieRoll&&r.a.createElement(Me,{seat:null===c||void 0===c?void 0:c.seat,value:t.dieRoll}))},Le=function(e){return r.a.createElement(Ne,null,r.a.createElement("div",{className:le.a.container},r.a.createElement("header",null,r.a.createElement(Be,null)),r.a.createElement("main",null,r.a.createElement(Ae,e)),r.a.createElement("footer",null,r.a.createElement(ge,e))))},We=a(185),Je=a(230),Ue=a(186),Xe=Object(G.a)((function(e){return{main:{},loading:{padding:e.spacing(2)}}})),qe=function(){var e=Xe();return r.a.createElement(We.a,{open:!0},r.a.createElement(Ue.a,{className:e.loading},r.a.createElement(Je.a,{color:"inherit"})))},ze=Object(F.a)({game:ce,board:Le,multiplayer:Object(M.b)({server:v}),loading:qe}),Ve=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.gameID,n=t.user,e.next=3,g(a);case 3:if(r=e.sent,1!==(o=r.players.filter((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.clientId)===n.clientId}))).length){e.next=8;break}return console.log("previously joined room ".concat(a," at seat ").concat(o[0].id)),e.abrupt("return",{room:r,playerID:""+o[0].id,credentials:n.credentials});case 8:if(!(o.length>1)){e.next=12;break}return console.warn("previously joined room ".concat(a," in ").concat(o.length," seats")),e.next=12,w(a,n);case 12:return e.abrupt("return",{room:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,o,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(t,1),r=n[0],o=a.gameID,c=a.user,e.next=4,g(o);case 4:return i=e.sent,e.next=7,_(o,r,c);case 7:if(!(l=e.sent)){e.next=10;break}return e.abrupt("return",{room:i,playerID:l,credentials:c.credentials});case 10:return e.abrupt("return",{room:i});case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(l.f)();return r.a.createElement(Y.a,{open:!0},r.a.createElement(J.a,null,"Game not found"),r.a.createElement(L.a,null,r.a.createElement(W.a,null,"The game you're trying to access wasn't found. This probably means the game finished, or all players left.")),r.a.createElement(A.a,null,r.a.createElement(k.a,{onClick:function(){e.push("/")},color:"primary"},"Back")))},Qe=function(e){var t=e.open,a=e.onClose,o=Object(n.useState)(window.localStorage.getItem("playerName")||""),c=Object(f.a)(o,2),i=c[0],l=c[1],s=function(e){window.localStorage.setItem("playerName",i),a(i,e)};return r.a.createElement(Y.a,{open:t},r.a.createElement(J.a,null,"Join the game"),r.a.createElement(L.a,null,r.a.createElement(W.a,null,"Enter the name you want to use in the game, then click play. You can also choose to Just Watch if you don't want to play."),r.a.createElement(P.a,{autoFocus:!0,margin:"dense",label:"Your name",fullWidth:!0,value:i,onChange:function(e){l(e.target.value)}})),r.a.createElement(A.a,null,r.a.createElement(k.a,{onClick:function(){s(!0)},color:"secondary"},"Just watch"),r.a.createElement(k.a,{onClick:function(){s(!1)},color:"primary"},"Play")))},$e=function(){var e,t=Object(l.g)("/games/:game_id"),a=null===t||void 0===t||null===(e=t.params)||void 0===e?void 0:e.game_id,o=Se(),c=Object(y.a)({promiseFn:Ve,deferFn:Ke,gameID:a,user:o}),i=Object(n.useState)(!1),s=Object(f.a)(i,2),u=s[0],d=s[1];return r.a.createElement(r.a.Fragment,null,c.isPending&&r.a.createElement(qe,null),c.isRejected&&r.a.createElement(Ze,null),c.isFulfilled&&u&&r.a.createElement(ze,Object.assign({debug:!1},c.data)),c.isFulfilled&&c.data.playerID&&r.a.createElement(ze,{debug:!1,gameID:c.data.room.roomID,playerID:c.data.playerID,credentials:c.data.credentials}),c.isFulfilled&&!u&&!c.data.playerID&&r.a.createElement(Qe,{open:!0,onClose:function(e,t){d(t),t||c.run(e)}}))},et=Object(F.a)({game:ce,board:Le}),tt=a(25),at=a.n(tt),nt={S00:{x:180,y:-120},S01:{x:160,y:-140},S02:{x:140,y:-160},S03:{x:120,y:-180},S10:{x:120,y:180},S11:{x:140,y:160},S12:{x:160,y:140},S13:{x:180,y:120},S20:{x:-180,y:120},S21:{x:-160,y:140},S22:{x:-140,y:160},S23:{x:-120,y:180},S30:{x:-120,y:-180},S31:{x:-140,y:-160},S32:{x:-160,y:-140},S33:{x:-180,y:-120},C00:{x:30,y:-180},C01:{x:30,y:-150},C02:{x:30,y:-120},C03:{x:30,y:-90},C04:{x:30,y:-60},C05:{x:30,y:-30},C06:{x:60,y:-30},C07:{x:90,y:-30},C08:{x:120,y:-30},C09:{x:150,y:-30},C0A:{x:180,y:-30},C0B:{x:180,y:0},C10:{x:180,y:30},C11:{x:150,y:30},C12:{x:120,y:30},C13:{x:90,y:30},C14:{x:60,y:30},C15:{x:30,y:30},C16:{x:30,y:60},C17:{x:30,y:90},C18:{x:30,y:120},C19:{x:30,y:150},C1A:{x:30,y:180},C1B:{x:0,y:180},C20:{x:-30,y:180},C21:{x:-30,y:150},C22:{x:-30,y:120},C23:{x:-30,y:90},C24:{x:-30,y:60},C25:{x:-30,y:30},C26:{x:-60,y:30},C27:{x:-90,y:30},C28:{x:-120,y:30},C29:{x:-150,y:30},C2A:{x:-180,y:30},C2B:{x:-180,y:0},C30:{x:-180,y:-30},C31:{x:-150,y:-30},C32:{x:-120,y:-30},C33:{x:-90,y:-30},C34:{x:-60,y:-30},C35:{x:-30,y:-30},C36:{x:-30,y:-60},C37:{x:-30,y:-90},C38:{x:-30,y:-120},C39:{x:-30,y:-150},C3A:{x:-30,y:-180},C3B:{x:0,y:-180},H00:{x:0,y:-150},H01:{x:0,y:-120},H02:{x:0,y:-90},H03:{x:0,y:-60},H10:{x:150,y:0},H11:{x:120,y:0},H12:{x:90,y:0},H13:{x:60,y:0},H20:{x:0,y:150},H21:{x:0,y:120},H22:{x:0,y:90},H23:{x:0,y:60},H30:{x:-150,y:0},H31:{x:-120,y:0},H32:{x:-90,y:0},H33:{x:-60,y:0}},rt=function(){return r.a.createElement("g",{pointerEvents:"none"},K.a.range(-201,200,6).map((function(e){return r.a.createElement("line",{key:e,x1:"-200",y1:e,x2:"200",y2:e,className:at.a.gridMinor})})),K.a.range(-201,200,6).map((function(e){return r.a.createElement("line",{key:e,x1:e,y1:"-200",x2:e,y2:"200",className:at.a.gridMinor})})),K.a.range(-180,200,30).map((function(e){return r.a.createElement("line",{key:e,x1:"-200",y1:e,x2:"200",y2:e,className:at.a.gridMajor})})),K.a.range(-180,200,30).map((function(e){return r.a.createElement("line",{key:e,x1:e,y1:"-200",x2:e,y2:"200",className:at.a.gridMajor})})))},ot=function(e){var t=e.position,a=e.r,n=void 0===a?10:a,o=Object(u.a)(e,["position","r"]),c=nt[t];return r.a.createElement("circle",Object.assign({cx:c.x,cy:c.y,r:n},o))},ct=function(e){var t=e.pos,a=e.seat,o=(Object(u.a)(e,["pos","seat"]),Object(n.useRef)());Object(n.useEffect)((function(){o.current=t}),[o,t]);var c=o.current,i=c&&c!==t?function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,r=0,o=[e];o[o.length-1]!==t&&r++<n;){var c=te(o[o.length-1],a);if("INVALID_MOVE"===c)break;o.push(c)}return o[o.length-1]!==t?[e,t]:o}(c,t,a):[t],l=[at.a.tokenRed,at.a.tokenBlue,at.a.tokenYellow,at.a.tokenGreen][a],s=i.length>1?{attrX:i.map((function(e){return nt[e].x-12})),attrY:i.map((function(e){return nt[e].y-14})),transition:{duration:Math.max(1,i.length/2),ease:"easeOut"}}:{attrX:nt[t].x-12,attrY:nt[t].y-14};return r.a.createElement(fe.a.svg,{viewBox:"-10 -10 20 20",x:"0",y:"0",height:24,width:24,animate:s,initial:{attrX:nt[t].x-12,attrY:nt[t].y-14},className:l},r.a.createElement("ellipse",{fill:"url(#shadowGradient1)",cx:"0",cy:"8",rx:"10",ry:"2"}),r.a.createElement("circle",{cx:"0",cy:"0",r:"10"}),r.a.createElement("circle",{fill:"url(#tokenGradient1)",cx:"0",cy:"0",r:"10"}))},it=function(e){var t=e.seat,a=e.name,n=["rotate(45) translate(0 -195)","rotate(-45) translate(0 170)","rotate(45) translate(0 170)","rotate(-45) translate(0 -195)"][t];return r.a.createElement("text",{x:0,y:15,pointerEvents:"none",className:at.a.player,dominantBaseline:"middle",textAnchor:"middle",transform:n},a)},lt=function(e){var t=e.showGrid,a=void 0!==t&&t;e.children;return r.a.createElement("svg",{viewBox:"-200 -200 400 400",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:at.a.root},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"buttonGradient",gradientTransform:"rotate(70)"},r.a.createElement("stop",{offset:"0%",stopColor:"#ffcdd2"}),r.a.createElement("stop",{offset:"100%",stopColor:"#d32f2f"})),r.a.createElement("radialGradient",{id:"cellGradient",fx:"30%",fy:"70%"},r.a.createElement("stop",{offset:"0%",stopColor:"black",stopOpacity:"0.25"}),r.a.createElement("stop",{offset:"80%",stopColor:"black",stopOpacity:"0.4"})),r.a.createElement("radialGradient",{id:"boardGradient"},r.a.createElement("stop",{offset:"50%",stopColor:"transparent"}),r.a.createElement("stop",{offset:"100%",stopColor:"black",stopOpacity:"0.25"})),r.a.createElement("radialGradient",{id:"tokenGradient1",fx:"70%",fy:"30%"},r.a.createElement("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.5"}),r.a.createElement("stop",{offset:"80%",stopColor:"#0a0a0a",stopOpacity:"0.5"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0.5"})),r.a.createElement("radialGradient",{id:"shadowGradient1"},r.a.createElement("stop",{offset:"50%",stopColor:"#000000",stopOpacity:"1"}),r.a.createElement("stop",{offset:"100%",stopColor:"#000000",stopOpacity:"0"})),r.a.createElement("symbol",{id:"token",viewBox:"-10 -10 20 20",x:"0",y:"0"},r.a.createElement("ellipse",{fill:"url(#shadowGradient1)",cx:"0",cy:"8",rx:"10",ry:"2"}),r.a.createElement("circle",{cx:"0",cy:"0",r:"10"}),r.a.createElement("circle",{fill:"url(#tokenGradient1)",cx:"0",cy:"0",r:"10"}))),a&&r.a.createElement(rt,null),r.a.createElement("g",{pointerEvents:"none",className:at.a.paintedRed},r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(0) translate(0 -105)"}),r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(45) translate(0 -211)"})),r.a.createElement("g",{pointerEvents:"none",className:at.a.paintedBlue},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(135) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(90) translate(0 -105)"})),r.a.createElement("g",{pointerEvents:"none",className:at.a.paintedYellow},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(225) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(180) translate(0 -105)"})),r.a.createElement("g",{pointerEvents:"none",className:at.a.paintedGreen},r.a.createElement("rect",{x:-60,y:-15,width:120,height:30,rx:15,transform:"rotate(315) translate(0 -211)"}),r.a.createElement("rect",{x:-15,y:-60,width:30,height:120,rx:15,transform:"rotate(270) translate(0 -105)"})),r.a.createElement("g",null,K.a.keys(nt).map((function(e){return r.a.createElement(ot,{key:e,position:e,r:10,className:at.a.cell,onClick:(t=e,function(){console.log(t)})});var t}))),r.a.createElement(it,{seat:0,name:"Red"}),r.a.createElement(it,{seat:1,name:"Blue"}),r.a.createElement(it,{seat:2,name:"Yellow"}),r.a.createElement(it,{seat:3,name:"Green"}),r.a.createElement(ct,{pos:"S00",seat:0}),r.a.createElement(ct,{pos:"S01",seat:0}),r.a.createElement(ct,{pos:"S02",seat:0}),r.a.createElement(ct,{pos:"S03",seat:0}),r.a.createElement(ct,{pos:"S10",seat:1}),r.a.createElement(ct,{pos:"S11",seat:1}),r.a.createElement(ct,{pos:"S12",seat:1}),r.a.createElement(ct,{pos:"S13",seat:1}),r.a.createElement(ct,{pos:"S20",seat:2}),r.a.createElement(ct,{pos:"S21",seat:2}),r.a.createElement(ct,{pos:"S22",seat:2}),r.a.createElement(ct,{pos:"S23",seat:2}),r.a.createElement(ct,{pos:"S30",seat:3}),r.a.createElement(ct,{pos:"S31",seat:3}),r.a.createElement(ct,{pos:"S32",seat:3}),r.a.createElement(ct,{pos:"S33",seat:3}))},st={seats:[{paint:"#c62828",diceBg:"#c62828",diceFg:"#f0f0f0"},{paint:"#1565c0",diceBg:"#1565c0",diceFg:"#f0f0f0"},{paint:"#ffab00",diceBg:"#ffab00",diceFg:"#f0f0f0"},{paint:"#388e3c",diceBg:"#388e3c",diceFg:"#f0f0f0"}]},ut=(a(182),function(){return r.a.createElement(Ne,null,r.a.createElement(s.a,{theme:st},r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/games/:game_id"},r.a.createElement($e,null)),r.a.createElement(l.a,{exact:!0,path:"/svg"},r.a.createElement(lt,null)),r.a.createElement(l.a,{exact:!0,path:"/offline"},r.a.createElement(et,null)),r.a.createElement(l.a,null,r.a.createElement(T,null))))))});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,t,a){e.exports={root:"SvgBoard_root__2vlYo",painted:"SvgBoard_painted__1wL0c",player:"SvgBoard_player__2KRH_",paintedRed:"SvgBoard_paintedRed__1FwMr SvgBoard_painted__1wL0c",paintedBlue:"SvgBoard_paintedBlue__1Bcyf SvgBoard_painted__1wL0c",paintedYellow:"SvgBoard_paintedYellow__3Z1k5 SvgBoard_painted__1wL0c",paintedGreen:"SvgBoard_paintedGreen__2iWor SvgBoard_painted__1wL0c",gridMajor:"SvgBoard_gridMajor__3gWTi",gridMinor:"SvgBoard_gridMinor__34m8P",cell:"SvgBoard_cell__12JSt",tokenRed:"SvgBoard_tokenRed__35Di3",tokenBlue:"SvgBoard_tokenBlue__3S9iU",tokenYellow:"SvgBoard_tokenYellow__3S0qZ",tokenGreen:"SvgBoard_tokenGreen__1mE2h",button:"SvgBoard_button__3KjHV"}},39:function(e,t,a){e.exports={root:"controls_root__34suz",info:"controls_info__10tQH",gameover:"controls_gameover__1pMDk",main:"controls_main__1ObY0",roll:"controls_roll__q_yNR",pass:"controls_pass__1bLrU",dice:"controls_dice__mtd7l",dice1:"controls_dice1__2qOJt controls_dice__mtd7l",dice2:"controls_dice2__2s9pX controls_dice__mtd7l",dice3:"controls_dice3__KRJvC controls_dice__mtd7l",dice4:"controls_dice4__2qWsp controls_dice__mtd7l",dice5:"controls_dice5__x9KQC controls_dice__mtd7l",dice6:"controls_dice6__1vB_k controls_dice__mtd7l"}},94:function(e,t,a){e.exports={button:"Button_button__1YFGw",disabled:"Button_disabled__n1W1R",default:"Button_default__1yZ7r Button_button__1YFGw",red:"Button_red__2Zi0G Button_button__1YFGw",blue:"Button_blue__1FFDR Button_button__1YFGw",yellow:"Button_yellow__hB_Nw Button_button__1YFGw",green:"Button_green__1hT-6 Button_button__1YFGw"}},95:function(e,t,a){e.exports={title:"header_title__aB6b6",exit:"header_exit__1D1BM"}}},[[135,1,2]]]);
//# sourceMappingURL=main.bc13c14c.chunk.js.map